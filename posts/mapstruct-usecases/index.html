<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>wangboâ€™s blog - Mapper Classes Generated by MapStruct</title>

      

      
          <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
          
      

      
          <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;site.css">
          
      

      
      
    </head>

    <body>
        <div class="container">

            <div id="mobile-navbar" class="mobile-navbar">
              <div class="mobile-header-logo">
                <a href="/" class="logo">WB Prime</a>
              </div>
              <div class="mobile-navbar-icon icon-out">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>

            <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
              <ul class="mobile-menu-list">
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">
                            Categories
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">
                            Tags
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;github.wangbo.im">
                            Github
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">
                            About
                        </a>
                    </li>
                
              </ul>
            </nav>

            <header id="header">
                <div class="logo"><a href="https:&#x2F;&#x2F;www.wangbo.im">WB Prime</a></div>
                <nav class="menu">
                    <ul>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">
                                    Categories
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">
                                    Tags
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;github.wangbo.im">
                                    Github
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">
                                    About
                                </a>
                            </li>
                        
                    </ul>
                </nav>
            </header>

            <main>
                <div class="content" id="mobile-panel">
                    



<article class="post">
    
    <header class="post__header">
        <h1 class="post__title">
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;mapstruct-usecases&#x2F;">Mapper Classes Generated by MapStruct</a>
        </h1>
        <div class="post__meta">
            <span class="post__time">2019-10-16</span>
            
        </div>
    </header>

    <div class="post-content">
      <p>å¯¹è±¡å®ä½“è½¬æ¢æ“ä½œåœ¨åˆ†å±‚åº”ç”¨ä¸­å¾ˆå¸¸è§ï¼Œæ¯”å¦‚æ•°æ®åº“å±‚çš„å¯¹è±¡å®ä½“å’Œè¡¨ç°å±‚çš„å®ä½“å¾ˆå¯èƒ½å…·æœ‰ä¸åŒçš„å±æ€§é›†ï¼Œéœ€è¦åœ¨äº’æ“ä½œæ—¶è¿›è¡Œå±æ€§çš„æ˜ å°„ï¼ˆæˆ–æ‹·è´ï¼‰ã€‚</p>
<p><a href="https://mapstruct.org/" title="Java bean mappings, the easy way!">MapStruct</a> æ˜¯ä¸€ä¸ªè¾…åŠ©è¿›è¡Œ Java å®ä½“ç±»ä¹‹é—´ç›¸äº’è½¬æ¢çš„ç±»åº“ï¼Œä¸å…¶ä»–å…·æœ‰ç›¸ä¼¼åŠŸèƒ½çš„å·¥å…·åº“ä¹‹é—´çš„æœ€å¤§åŒºåˆ«åœ¨äºå…¶ä½¿ç”¨äº† <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/apt/" title="Annotation Processing Tool (apt)">Java æ³¨è§£å¤„ç†å™¨ APT</a> æ¥å®ç°å®ä½“é—´å±æ€§çš„æ˜ å°„è€Œä¸æ˜¯ä½¿ç”¨åå°„æŠ€æœ¯ã€‚</p>
<p id="zola-continue-reading"><a name="continue-reading"></a></p>
<h1 id="maven-pei-zhi"><a class="zola-anchor" href="#maven-pei-zhi" aria-label="Anchor link for: maven-pei-zhi">ğŸ”—</a>Maven é…ç½®</h1>
<p>ç±»ä¼¼äº <a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">Auto Value</a>ï¼Œ<a href="https://mapstruct.org/" title="Java bean mappings, the easy way!">MapStruct</a> éœ€è¦å¼•å…¥ä¸¤ä¸ªç»„ä»¶ï¼š</p>
<ol>
<li><code>org.mapstruct:mapstruct</code> åŒ…å«å„ç§å®šåˆ¶ä»£ç ç”Ÿæˆè¡Œä¸ºè§„åˆ™çš„æ³¨è§£ç±»ã€æ¥å£ç±»å’Œä¸€ä¸ªè¾…åŠ©æ„å»º Mapper æ¥å£
å®ç°ç±»å®ä¾‹çš„ <code>org.mapstruct.factory.Mappers</code> ç±»ï¼›éœ€è¦åŠ å…¥åˆ°é¡¹ç›®çš„è¿è¡Œæ—¶ç±»è·¯å¾„ã€‚</li>
<li><code>org.mapstruct:mapstruct-processor</code> åŒ…å«åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆ Mapper å®ç°ç±»åŠç›¸å…³ä»£ç çš„æ³¨è§£å¤„ç†å™¨å®ç°ï¼›åª
éœ€è¦å‡ºç°åœ¨é¡¹ç›®çš„ç¼–è¯‘æ—¶ç±»è·¯å¾„ã€‚</li>
</ol>
<p>å¯¹äº <a href="http://maven.apache.org/" title="Apache Maven is a software project management and comprehension tool.">Maven</a> ç‰ˆæœ¬å¤§äº <code>3.5</code> çš„ï¼Œå¯ä»¥å¦‚ä¸‹é…ç½®ä½¿ç”¨ <a href="https://mapstruct.org/" title="Java bean mappings, the easy way!">MapStruct</a> ã€‚</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">&lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;
            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;
            &lt;version&gt;${mapstruct.version}&lt;/version&gt;
        &lt;/dependency&gt;
&lt;/dependencies&gt;
&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
            &lt;version&gt;${maven_plugin_compiler_version}&lt;/version&gt;
            &lt;configuration&gt;
                &lt;annotationProcessorPaths&gt;
                    &lt;path&gt;
                        &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;
                        &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;
                        &lt;version&gt;${mapstruct.version}&lt;/version&gt;
                    &lt;/path&gt;
                &lt;/annotationProcessorPaths&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</span></pre>
<p>å¦‚æ¬²è¯¦ç»†äº†è§£å¦‚ä½•åœ¨ <a href="http://maven.apache.org/" title="Apache Maven is a software project management and comprehension tool.">Maven</a> ä¸­é…ç½®ä½¿ç”¨æ³¨è§£å¤„ç†å™¨ç±»å®ç°ï¼Œè¯·å‚è§ <a href="https://www.wangbo.im/posts/add-supports-for-apt-in-maven/">åœ¨ Maven ä¸­æ”¯æŒ Java çš„æ³¨è§£å¤„ç†å™¨ APT</a>ã€‚</p>
<p>æˆªè‡³ 2019-10-16ï¼Œ<a href="https://mapstruct.org/" title="Java bean mappings, the easy way!">MapStruct</a> çš„æœ€æ–°ç‰ˆæœ¬æ˜¯ <code>1.3.1.Final</code> ã€‚</p>
<h1 id="pojo-mo-shi-shi-ti-dui-xiang-yu-dai-ma-sheng-cheng"><a class="zola-anchor" href="#pojo-mo-shi-shi-ti-dui-xiang-yu-dai-ma-sheng-cheng" aria-label="Anchor link for: pojo-mo-shi-shi-ti-dui-xiang-yu-dai-ma-sheng-cheng">ğŸ”—</a>POJO æ¨¡å¼å®ä½“å¯¹è±¡ä¸ä»£ç ç”Ÿæˆ</h1>
<h2 id="ji-ben-cao-zuo"><a class="zola-anchor" href="#ji-ben-cao-zuo" aria-label="Anchor link for: ji-ben-cao-zuo">ğŸ”—</a>åŸºæœ¬æ“ä½œ</h2>
<p>å¦‚æœæœ‰ä¸¤ä¸ªéœ€è¦ç›¸äº’è½¬æ¢çš„ç±» <code>SourceEntity</code> å’Œ <code>TargetDto</code>ï¼š</p>
<pre style="background-color:#282828;">
<span style="color:#fa5c4b;">public class </span><span style="color:#8ec07c;">SourceEntity </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">private int </span><span style="color:#fdf4c1aa;">intProperty;
    </span><span style="color:#fa5c4b;">private boolean </span><span style="color:#fdf4c1aa;">boolProperty;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">Long </span><span style="color:#fdf4c1aa;">longProperty;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">String </span><span style="color:#fdf4c1aa;">srtProperty;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">OffsetDateTime </span><span style="color:#fdf4c1aa;">dateTime;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">List</span><span style="color:#fdf4c1aa;">&lt;</span><span style="color:#8ec07c;">BigDecimal</span><span style="color:#fdf4c1aa;">&gt; numbers;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">Map</span><span style="color:#fdf4c1aa;">&lt;</span><span style="color:#8ec07c;">String</span><span style="color:#fdf4c1aa;">, </span><span style="color:#8ec07c;">String</span><span style="color:#fdf4c1aa;">&gt; types;
}

</span><span style="color:#fa5c4b;">public class </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">private int </span><span style="color:#fdf4c1aa;">intProperty;
    </span><span style="color:#fa5c4b;">private boolean </span><span style="color:#fdf4c1aa;">boolProperty;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">Long </span><span style="color:#fdf4c1aa;">longProperty;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">String </span><span style="color:#fdf4c1aa;">srtProperty;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">OffsetDateTime </span><span style="color:#fdf4c1aa;">dateTime;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">List</span><span style="color:#fdf4c1aa;">&lt;</span><span style="color:#8ec07c;">BigDecimal</span><span style="color:#fdf4c1aa;">&gt; numbers;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">Map</span><span style="color:#fdf4c1aa;">&lt;</span><span style="color:#8ec07c;">String</span><span style="color:#fdf4c1aa;">, </span><span style="color:#8ec07c;">String</span><span style="color:#fdf4c1aa;">&gt; types;
}
</span></pre>
<p>ä½¿ç”¨ <a href="https://mapstruct.org/" title="Java bean mappings, the easy way!">MapStruct</a> æ¥ç”Ÿæˆè½¬æ¢ç±»ï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ªè½¬æ¢æ¥å£ç±»ï¼š</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">Mapper
</span><span style="color:#fa5c4b;">public interface </span><span style="color:#8ec07c;">TypeMapper </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#8ec07c;">TargetDto convert</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">SourceEntity </span><span style="color:#fdf4c1;">from</span><span style="color:#fdf4c1aa;">);

    </span><span style="color:#8ec07c;">SourceEntity convert</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1;">from</span><span style="color:#fdf4c1aa;">);
}
</span></pre>
<p>åœ¨æ¥å£ç±»ä¸­å£°æ˜æ‰€éœ€æ–¹æ³•ï¼Œæ–¹æ³•çš„å‚æ•°æ˜¯æºç±»å‹å®ä¾‹ï¼Œè¿”å›å€¼æ˜¯ç›®æ ‡ç±»å‹ï¼›æ¥å£ç±»ä¸Šéœ€è¦æ·»åŠ  <code>org.mapstruct.Mapper</code> æ³¨è§£ã€‚</p>
<p>è¿è¡Œ <code>mvn clean compile</code> ä¹‹åå°±èƒ½çœ‹åˆ° <a href="https://mapstruct.org/" title="Java bean mappings, the easy way!">MapStruct</a> ç”Ÿæˆçš„ <code>TypeMapper</code> å®ç°ç±» <code>TypeMapperImpl</code>çš„ä»£ç ï¼Œéƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">Override
</span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1;">convert(</span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1;"> from) </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( from </span><span style="color:#fe8019;">== </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">null</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1aa;"> targetDto </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1aa;">();

    targetDto.</span><span style="color:#fdf4c1;">setIntProperty( from.getIntProperty() )</span><span style="color:#fdf4c1aa;">;
    targetDto.</span><span style="color:#fdf4c1;">setBoolProperty( from.isBoolProperty() )</span><span style="color:#fdf4c1aa;">;
    targetDto.</span><span style="color:#fdf4c1;">setLongProperty( from.getLongProperty() )</span><span style="color:#fdf4c1aa;">;
    targetDto.</span><span style="color:#fdf4c1;">setSrtProperty( from.getSrtProperty() )</span><span style="color:#fdf4c1aa;">;
    targetDto.</span><span style="color:#fdf4c1;">setDateTime( from.getDateTime() )</span><span style="color:#fdf4c1aa;">;
    </span><span style="color:#8ec07c;">List</span><span style="color:#fdf4c1aa;">&lt;</span><span style="color:#8ec07c;">BigDecimal</span><span style="color:#fdf4c1aa;">&gt; list </span><span style="color:#fe8019;">=</span><span style="color:#fdf4c1aa;"> from.</span><span style="color:#fdf4c1;">getNumbers()</span><span style="color:#fdf4c1aa;">;
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( list </span><span style="color:#fe8019;">!= </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        targetDto.</span><span style="color:#fdf4c1;">setNumbers( </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">ArrayList</span><span style="color:#fdf4c1;">&lt;</span><span style="color:#8ec07c;">BigDecimal</span><span style="color:#fdf4c1;">&gt;( list ) )</span><span style="color:#fdf4c1aa;">;
    }
    </span><span style="color:#8ec07c;">Map</span><span style="color:#fdf4c1aa;">&lt;</span><span style="color:#8ec07c;">String</span><span style="color:#fdf4c1aa;">, </span><span style="color:#8ec07c;">String</span><span style="color:#fdf4c1aa;">&gt; map </span><span style="color:#fe8019;">=</span><span style="color:#fdf4c1aa;"> from.</span><span style="color:#fdf4c1;">getTypes()</span><span style="color:#fdf4c1aa;">;
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( map </span><span style="color:#fe8019;">!= </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        targetDto.</span><span style="color:#fdf4c1;">setTypes( </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">HashMap</span><span style="color:#fdf4c1;">&lt;</span><span style="color:#8ec07c;">String</span><span style="color:#fdf4c1;">, </span><span style="color:#8ec07c;">String</span><span style="color:#fdf4c1;">&gt;( map ) )</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> targetDto;
}

@</span><span style="color:#fdf4c1;">Override
</span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">SourceEntity </span><span style="color:#fdf4c1;">convert(</span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1;"> from) </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( from </span><span style="color:#fe8019;">== </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">null</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1aa;"> sourceEntity </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1aa;">();

    sourceEntity.</span><span style="color:#fdf4c1;">setIntProperty( from.getIntProperty() )</span><span style="color:#fdf4c1aa;">;
    sourceEntity.</span><span style="color:#fdf4c1;">setBoolProperty( from.isBoolProperty() )</span><span style="color:#fdf4c1aa;">;
    sourceEntity.</span><span style="color:#fdf4c1;">setLongProperty( from.getLongProperty() )</span><span style="color:#fdf4c1aa;">;
    sourceEntity.</span><span style="color:#fdf4c1;">setSrtProperty( from.getSrtProperty() )</span><span style="color:#fdf4c1aa;">;
    sourceEntity.</span><span style="color:#fdf4c1;">setDateTime( from.getDateTime() )</span><span style="color:#fdf4c1aa;">;
    </span><span style="color:#8ec07c;">List</span><span style="color:#fdf4c1aa;">&lt;</span><span style="color:#8ec07c;">BigDecimal</span><span style="color:#fdf4c1aa;">&gt; list </span><span style="color:#fe8019;">=</span><span style="color:#fdf4c1aa;"> from.</span><span style="color:#fdf4c1;">getNumbers()</span><span style="color:#fdf4c1aa;">;
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( list </span><span style="color:#fe8019;">!= </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        sourceEntity.</span><span style="color:#fdf4c1;">setNumbers( </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">ArrayList</span><span style="color:#fdf4c1;">&lt;</span><span style="color:#8ec07c;">BigDecimal</span><span style="color:#fdf4c1;">&gt;( list ) )</span><span style="color:#fdf4c1aa;">;
    }
    </span><span style="color:#8ec07c;">Map</span><span style="color:#fdf4c1aa;">&lt;</span><span style="color:#8ec07c;">String</span><span style="color:#fdf4c1aa;">, </span><span style="color:#8ec07c;">String</span><span style="color:#fdf4c1aa;">&gt; map </span><span style="color:#fe8019;">=</span><span style="color:#fdf4c1aa;"> from.</span><span style="color:#fdf4c1;">getTypes()</span><span style="color:#fdf4c1aa;">;
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( map </span><span style="color:#fe8019;">!= </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        sourceEntity.</span><span style="color:#fdf4c1;">setTypes( </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">HashMap</span><span style="color:#fdf4c1;">&lt;</span><span style="color:#8ec07c;">String</span><span style="color:#fdf4c1;">, </span><span style="color:#8ec07c;">String</span><span style="color:#fdf4c1;">&gt;( map ) )</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> sourceEntity;
}
</span></pre>
<p>æ³¨æ„åˆ°ç”Ÿæˆçš„ä»£ç ä¸­å¯¹ <code>List</code> å’Œ <code>Map</code> ç±»å‹åšäº†ç‰¹æ®Šå¤„ç†ï¼Œåœ¨è½¬æ¢æ—¶è¿›è¡Œäº† <strong>æ·±åº¦æ‹·è´</strong> ä»¥é¿å…ä¸å¿…è¦çš„æ•°æ®å…±äº«ã€‚</p>
<h2 id="zi-duan-ming-bu-yi-yang"><a class="zola-anchor" href="#zi-duan-ming-bu-yi-yang" aria-label="Anchor link for: zi-duan-ming-bu-yi-yang">ğŸ”—</a>å­—æ®µåä¸ä¸€æ ·</h2>
<p>ä½¿ç”¨æ—¶ï¼Œ<a href="https://mapstruct.org/" title="Java bean mappings, the easy way!">MapStruct</a> éœ€è¦æºç±»å‹å’Œç›®æ ‡ç±»å‹çš„å±æ€§é›†åˆç±»å‹å’Œåç§°ä¿æŒä¸€è‡´ï¼Œä½†è¿™ä¸ªè¦æ±‚é€šå¸¸å¾ˆéš¾è¾¾åˆ°ï¼›å¯¹äºè¿™ç§éœ€æ±‚ï¼Œ<a href="https://mapstruct.org/" title="Java bean mappings, the easy way!">MapStruct</a> æä¾›äº†è§£æ³•ã€‚</p>
<p>æ¯”å¦‚ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªå®ä½“ç±»ï¼š</p>
<pre style="background-color:#282828;">
<span style="color:#fa5c4b;">public class </span><span style="color:#8ec07c;">SourceEntity </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">private int </span><span style="color:#fdf4c1aa;">intProperty;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">String </span><span style="color:#fdf4c1aa;">strProperty;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">OffsetDateTime </span><span style="color:#fdf4c1aa;">createdAt;
}

</span><span style="color:#fa5c4b;">public class </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">private int </span><span style="color:#fdf4c1aa;">intProperty;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">String </span><span style="color:#fdf4c1aa;">strProperty;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">OffsetDateTime </span><span style="color:#fdf4c1aa;">createTime;
}
</span></pre>
<p>ä¸¤ä¸ªå®ä½“ç±»ä¸­çš„å±æ€§åæœ‰çš„ç›¸åŒæœ‰çš„ä¸ç›¸åŒ (<code>createdAt</code> VS <code>createTime</code>) ã€‚</p>
<p>ç»§ç»­ä½¿ç”¨ä¹‹å‰å®šä¹‰çš„ Mapperï¼Œå‘ç°ç”Ÿæˆçš„ä»£ç ä¸­å¿½ç•¥äº†ä¸åŒ¹é…çš„å±æ€§ã€‚</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">Override
</span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1;">convert(</span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1;"> from) </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( from </span><span style="color:#fe8019;">== </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">null</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1aa;"> targetDto </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1aa;">();

    targetDto.</span><span style="color:#fdf4c1;">setIntProperty( from.getIntProperty() )</span><span style="color:#fdf4c1aa;">;
    targetDto.</span><span style="color:#fdf4c1;">setStrProperty( from.getStrProperty() )</span><span style="color:#fdf4c1aa;">;

    </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> targetDto;
}

@</span><span style="color:#fdf4c1;">Override
</span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">SourceEntity </span><span style="color:#fdf4c1;">convert(</span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1;"> from) </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( from </span><span style="color:#fe8019;">== </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">null</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1aa;"> sourceEntity </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1aa;">();

    sourceEntity.</span><span style="color:#fdf4c1;">setIntProperty( from.getIntProperty() )</span><span style="color:#fdf4c1aa;">;
    sourceEntity.</span><span style="color:#fdf4c1;">setStrProperty( from.getStrProperty() )</span><span style="color:#fdf4c1aa;">;

    </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> sourceEntity;
}
</span></pre>
<p>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥è®¾ç½® <code>@Mapper</code> æ³¨è§£çš„å±æ€§ï¼Œå¦‚ä¸‹ï¼š</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">Mapper</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">unmappedSourcePolicy </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">ReportingPolicy</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">WARN</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">unmappedTargetPolicy </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">ReportingPolicy</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">ERROR</span><span style="color:#fdf4c1aa;">)
</span><span style="color:#fa5c4b;">public interface </span><span style="color:#8ec07c;">TypeMapper </span><span style="color:#fdf4c1aa;">{
    </span><span style="font-style:italic;color:#928374;">// Omitted
</span><span style="color:#fdf4c1aa;">}
</span></pre>
<p>æ­¤æ—¶ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ï¼Œå¹¶æç¤ºæœªåŒ¹é…å±æ€§çš„é”™è¯¯: <code>Unmapped target property: &quot;createTime&quot;</code> ã€‚</p>
<p>ç„¶åå¯ä»¥åœ¨æ–¹æ³•çº§åˆ«æ·»åŠ  <code>org.mapstruct.Mapping</code> æ³¨è§£ï¼Œå¹¶è®¾ç½®å…¶ <code>source</code> å’Œ <code>target</code> å±æ€§ï¼š</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">Mapper</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">unmappedSourcePolicy </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">ReportingPolicy</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">WARN</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">unmappedTargetPolicy </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">ReportingPolicy</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">ERROR</span><span style="color:#fdf4c1aa;">)
</span><span style="color:#fa5c4b;">public interface </span><span style="color:#8ec07c;">TypeMapper </span><span style="color:#fdf4c1aa;">{

    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;createdAt&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;createTime&quot;</span><span style="color:#fdf4c1aa;">)
    </span><span style="color:#8ec07c;">TargetDto convert</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">SourceEntity </span><span style="color:#fdf4c1;">from</span><span style="color:#fdf4c1aa;">);

    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;createTime&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;createdAt&quot;</span><span style="color:#fdf4c1aa;">)
    </span><span style="color:#8ec07c;">SourceEntity convert</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1;">from</span><span style="color:#fdf4c1aa;">);
}
</span></pre>
<p><code>source</code> å±æ€§çš„å€¼è®¾ç½®ä¸ºæºç±»å‹é‡Œé¢çš„å±æ€§åï¼Œ<code>target</code> çš„å€¼è®¾ç½®ä¸ºç›®æ ‡ç±»å‹é‡Œé¢å¯¹åº”çš„å±æ€§åã€‚<code>@Mapping</code>
æ³¨è§£å¯ä»¥åº”ç”¨å¤šæ¬¡ï¼Œä»¥æŒ‡å®šå¤šä¸ªå±æ€§çš„æ˜ å°„è§„åˆ™ã€‚</p>
<p>ç”Ÿæˆçš„ä»£ç ä¸­ç°åœ¨å·²ç»å¯ä»¥åŒ…å«é¢„æœŸçš„ä»£ç äº†ï¼š</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">Override
</span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1;">convert(</span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1;"> from) </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( from </span><span style="color:#fe8019;">== </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">null</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1aa;"> targetDto </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1aa;">();

    targetDto.</span><span style="color:#fdf4c1;">setCreateTime( from.getCreatedAt() )</span><span style="color:#fdf4c1aa;">;
    targetDto.</span><span style="color:#fdf4c1;">setIntProperty( from.getIntProperty() )</span><span style="color:#fdf4c1aa;">;
    targetDto.</span><span style="color:#fdf4c1;">setStrProperty( from.getStrProperty() )</span><span style="color:#fdf4c1aa;">;

    </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> targetDto;
}

@</span><span style="color:#fdf4c1;">Override
</span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">SourceEntity </span><span style="color:#fdf4c1;">convert(</span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1;"> from) </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( from </span><span style="color:#fe8019;">== </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">null</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1aa;"> sourceEntity </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1aa;">();

    sourceEntity.</span><span style="color:#fdf4c1;">setCreatedAt( from.getCreateTime() )</span><span style="color:#fdf4c1aa;">;
    sourceEntity.</span><span style="color:#fdf4c1;">setIntProperty( from.getIntProperty() )</span><span style="color:#fdf4c1aa;">;
    sourceEntity.</span><span style="color:#fdf4c1;">setStrProperty( from.getStrProperty() )</span><span style="color:#fdf4c1aa;">;

    </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> sourceEntity;
}
</span></pre><h2 id="zi-duan-lei-xing-bu-yi-zhi"><a class="zola-anchor" href="#zi-duan-lei-xing-bu-yi-zhi" aria-label="Anchor link for: zi-duan-lei-xing-bu-yi-zhi">ğŸ”—</a>å­—æ®µç±»å‹ä¸ä¸€è‡´</h2>
<p>å¦‚æœæœ‰å±æ€§çš„ç±»å‹ä¸åŒ¹é…ï¼ˆä½†æ˜¯å¯ä»¥è½¬æ¢ï¼‰æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>ä¾‹å¦‚ï¼Œæºç±»å‹é‡Œé¢æœ‰ä¸€ä¸ª <code>int</code> ç±»å‹çš„å±æ€§è¡¨ç¤º <code>ç§ç±»</code> è¿™ä¸ªçŠ¶æ€ï¼Œç›®æ ‡ç±»å‹ä¸­å¯¹åº”çš„å±æ€§ç±»å‹æ˜¯é¢„å®šä¹‰çš„æšä¸¾å€¼ã€‚</p>
<pre style="background-color:#282828;">
<span style="color:#fa5c4b;">public class </span><span style="color:#8ec07c;">SourceEntity </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">private int </span><span style="color:#fdf4c1aa;">intType;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">String </span><span style="color:#fdf4c1aa;">strProperty;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">OffsetDateTime </span><span style="color:#fdf4c1aa;">createdAt;
}

</span><span style="color:#fa5c4b;">public enum </span><span style="color:#8ec07c;">TypeEnum </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fdf4c1;">LARGE</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">MEDIUM</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">SMALL
</span><span style="color:#fdf4c1aa;">}

</span><span style="color:#fa5c4b;">public class </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">TypeEnum </span><span style="color:#fdf4c1aa;">enumType;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">String </span><span style="color:#fdf4c1aa;">strProperty;
    </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">OffsetDateTime </span><span style="color:#fdf4c1aa;">createTime;
}
</span></pre>
<p>æ­¤æ—¶ï¼Œç¼–è¯‘å™¨å¯èƒ½ä¼šæŠ¥é”™ï¼š<code>Can't map property &quot;int intType&quot; to &quot;TypeEnum enumType&quot;. Consider to declare/implement a mapping method: &quot;TypeEnum map(int value)&quot;</code></p>
<p>æŒ‰ç…§é”™è¯¯è¯´æ˜ä¸­çš„æç¤ºï¼Œä¸º <code>TypeEnum</code> å’Œ <code>int</code> æ·»åŠ å•ç‹¬çš„è½¬æ¢æ–¹æ³•ã€‚</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">Mapper</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">unmappedSourcePolicy </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">ReportingPolicy</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">WARN</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">unmappedTargetPolicy </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">ReportingPolicy</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">ERROR</span><span style="color:#fdf4c1aa;">)
</span><span style="color:#fa5c4b;">public interface </span><span style="color:#8ec07c;">TypeMapper </span><span style="color:#fdf4c1aa;">{
    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;createdAt&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;createTime&quot;</span><span style="color:#fdf4c1aa;">)
    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;intType&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;enumType&quot;</span><span style="color:#fdf4c1aa;">)
    </span><span style="color:#8ec07c;">TargetDto convert</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">SourceEntity </span><span style="color:#fdf4c1;">from</span><span style="color:#fdf4c1aa;">);

    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;createTime&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;createdAt&quot;</span><span style="color:#fdf4c1aa;">)
    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;enumType&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;intType&quot;</span><span style="color:#fdf4c1aa;">)
    </span><span style="color:#8ec07c;">SourceEntity convert</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1;">from</span><span style="color:#fdf4c1aa;">);

    </span><span style="color:#fa5c4b;">default int </span><span style="color:#8ec07c;">mapType</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">TypeEnum </span><span style="color:#fdf4c1;">v</span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">switch </span><span style="color:#fdf4c1aa;">(v) {
            </span><span style="color:#fa5c4b;">case </span><span style="color:#fdf4c1;">LARGE</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">1</span><span style="color:#fdf4c1aa;">;
            </span><span style="color:#fa5c4b;">case </span><span style="color:#fdf4c1;">MEDIUM</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">2</span><span style="color:#fdf4c1aa;">;
            </span><span style="color:#fa5c4b;">default</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">3</span><span style="color:#fdf4c1aa;">;
        }
    }

    </span><span style="color:#fa5c4b;">static </span><span style="color:#8ec07c;">TypeEnum mapType</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final int </span><span style="color:#fdf4c1;">v</span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">switch </span><span style="color:#fdf4c1aa;">(v) {
            </span><span style="color:#fa5c4b;">case </span><span style="color:#d3869b;">1</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#8ec07c;">TypeEnum</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">LARGE</span><span style="color:#fdf4c1aa;">;
            </span><span style="color:#fa5c4b;">case </span><span style="color:#d3869b;">2</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#8ec07c;">TypeEnum</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">MEDIUM</span><span style="color:#fdf4c1aa;">;
            </span><span style="color:#fa5c4b;">default</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#8ec07c;">TypeEnum</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">SMALL</span><span style="color:#fdf4c1aa;">;
        }
    }
}
</span></pre>
<p>å•ç‹¬çš„è½¬æ¢æ–¹æ³•å¯ä»¥æ˜¯ <strong>é™æ€æ–¹æ³•</strong> ä¹Ÿå¯ä»¥æ˜¯ <strong>é»˜è®¤æ–¹æ³•</strong>ã€‚</p>
<p>åœ¨ç”Ÿæˆçš„å®ç°ç±»ä»£ç ä¸­ï¼Œè‡ªå®šä¹‰çš„è½¬æ¢æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">Override
</span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1;">convert(</span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1;"> from) </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( from </span><span style="color:#fe8019;">== </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">null</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1aa;"> targetDto </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1aa;">();

    targetDto.</span><span style="color:#fdf4c1;">setEnumType( </span><span style="color:#8ec07c;">TypeMapper</span><span style="color:#fdf4c1;">.mapType( from.getIntType() ) )</span><span style="color:#fdf4c1aa;">;
    targetDto.</span><span style="color:#fdf4c1;">setCreateTime( from.getCreatedAt() )</span><span style="color:#fdf4c1aa;">;
    targetDto.</span><span style="color:#fdf4c1;">setStrProperty( from.getStrProperty() )</span><span style="color:#fdf4c1aa;">;

    </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> targetDto;
}

@</span><span style="color:#fdf4c1;">Override
</span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">SourceEntity </span><span style="color:#fdf4c1;">convert(</span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1;"> from) </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( from </span><span style="color:#fe8019;">== </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">null</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1aa;"> sourceEntity </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1aa;">();

    sourceEntity.</span><span style="color:#fdf4c1;">setCreatedAt( from.getCreateTime() )</span><span style="color:#fdf4c1aa;">;
    sourceEntity.</span><span style="color:#fdf4c1;">setIntType( mapType( from.getEnumType() ) )</span><span style="color:#fdf4c1aa;">;
    sourceEntity.</span><span style="color:#fdf4c1;">setStrProperty( from.getStrProperty() )</span><span style="color:#fdf4c1aa;">;

    </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> sourceEntity;
}
</span></pre><h2 id="duo-ge-yuan-lei-xing"><a class="zola-anchor" href="#duo-ge-yuan-lei-xing" aria-label="Anchor link for: duo-ge-yuan-lei-xing">ğŸ”—</a>å¤šä¸ªæºç±»å‹</h2>
<p>å¦‚æœé‡åˆ°ä»¥ä¸‹çš„è¿™ç§æƒ…å†µï¼šæºæ•°æ®æœ‰ä¸¤ä¸ªæˆ–å¤šä¸ªç±»å‹ï¼Œæ¯”å¦‚ä¸€ä¸ªç”¨æˆ·çš„æ•°æ®è¢«å­˜å‚¨äºä¸¤ä¸ªæ•°æ®è¡¨ä¸­ï¼Œä½¿ç”¨ <a href="https://mapstruct.org/" title="Java bean mappings, the easy way!">MapStruct</a> ä¹Ÿå¯ä»¥å®ç°å¤šä¸ªæºå’Œä¸€ä¸ªç›®æ ‡ç±»å‹æ˜ å°„çš„è‡ªåŠ¨ä»£ç ç”Ÿæˆï¼ˆåƒä½ æƒ³çš„é‚£æ ·å®ç°ï¼‰ã€‚</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">public class AdditionalEntity {
    private OffsetDateTime updatedAt;
    private String updateBy;
    private String content;
}

public class SourceEntity {
    private int intType;
    private String strProperty;
    private OffsetDateTime createdAt;
}

public class TargetDto {
    private TypeEnum enumType;
    private String strProperty;
    private OffsetDateTime createTime;
    private OffsetDateTime lastUpdateTime;
}
</span></pre>
<p>æŒ‰ç…§ä¸‹é¢çš„ç”¨æ³•é…ç½® <code>@Mapper</code> å’Œ <code>@Mapping</code> æ³¨è§£ï¼š</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">Mapper</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">unmappedSourcePolicy </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">ReportingPolicy</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">WARN</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">unmappedTargetPolicy </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">ReportingPolicy</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">ERROR</span><span style="color:#fdf4c1aa;">)
</span><span style="color:#fa5c4b;">public interface </span><span style="color:#8ec07c;">TypeMapper </span><span style="color:#fdf4c1aa;">{
    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;from.intType&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;enumType&quot;</span><span style="color:#fdf4c1aa;">)
    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;from.createdAt&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;createTime&quot;</span><span style="color:#fdf4c1aa;">)
    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;additional.updatedAt&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;lastUpdateTime&quot;</span><span style="color:#fdf4c1aa;">)
    </span><span style="color:#8ec07c;">TargetDto convert</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">SourceEntity </span><span style="color:#fdf4c1;">from</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">AdditionalEntity </span><span style="color:#fdf4c1;">additional</span><span style="color:#fdf4c1aa;">);

    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;enumType&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;intType&quot;</span><span style="color:#fdf4c1aa;">)
    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;createTime&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;createdAt&quot;</span><span style="color:#fdf4c1aa;">)
    </span><span style="color:#8ec07c;">SourceEntity convertToSource</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1;">from</span><span style="color:#fdf4c1aa;">);

    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;lastUpdateTime&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;updatedAt&quot;</span><span style="color:#fdf4c1aa;">)
    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;updatedBy&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">constant </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;System&quot;</span><span style="color:#fdf4c1aa;">)
    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;content&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">expression </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;java(\&quot;Created at \&quot; + java.time.OffsetDateTime.now())&quot;</span><span style="color:#fdf4c1aa;">)
    </span><span style="color:#8ec07c;">AdditionalEntity convertToAdditional</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1;">from</span><span style="color:#fdf4c1aa;">);

    </span><span style="color:#fa5c4b;">default int </span><span style="color:#8ec07c;">mapType</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">TypeEnum </span><span style="color:#fdf4c1;">v</span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">switch </span><span style="color:#fdf4c1aa;">(v) {
            </span><span style="color:#fa5c4b;">case </span><span style="color:#fdf4c1;">LARGE</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">1</span><span style="color:#fdf4c1aa;">;
            </span><span style="color:#fa5c4b;">case </span><span style="color:#fdf4c1;">MEDIUM</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">2</span><span style="color:#fdf4c1aa;">;
            </span><span style="color:#fa5c4b;">default</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">3</span><span style="color:#fdf4c1aa;">;
        }
    }

    </span><span style="color:#fa5c4b;">static </span><span style="color:#8ec07c;">TypeEnum mapType</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final int </span><span style="color:#fdf4c1;">v</span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">switch </span><span style="color:#fdf4c1aa;">(v) {
            </span><span style="color:#fa5c4b;">case </span><span style="color:#d3869b;">1</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#8ec07c;">TypeEnum</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">LARGE</span><span style="color:#fdf4c1aa;">;
            </span><span style="color:#fa5c4b;">case </span><span style="color:#d3869b;">2</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#8ec07c;">TypeEnum</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">MEDIUM</span><span style="color:#fdf4c1aa;">;
            </span><span style="color:#fa5c4b;">default</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#8ec07c;">TypeEnum</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">SMALL</span><span style="color:#fdf4c1aa;">;
        }
    }
}
</span></pre>
<p><code>@Mapping</code> æ³¨è§£å¯ä»¥æ”¯æŒä¸ºç›®æ ‡å±æ€§è®¾ç½®å›ºå®šå€¼ï¼ˆ<code>constant</code>ï¼‰æˆ–è®¾ç½®è¡¨è¾¾å¼å€¼(<code>expression</code>)ï¼Œè€Œä¸”ç”±äº <a href="https://mapstruct.org/" title="Java bean mappings, the easy way!">MapStruct</a> çš„ç¼–è¯‘æ—¶ä»£ç ç”Ÿæˆç‰¹æ€§ï¼Œä¸åˆæ³•çš„å€¼ä¼šç›´æ¥åœ¨ç¼–è¯‘æ—¶æŠ¥é”™ã€‚</p>
<p>å¦‚ä½ æ‰€æƒ³ï¼Œç”Ÿæˆçš„ä»£ç æ­£ç¡®åœ°è®¾ç½®äº†ç›®æ ‡å±æ€§å€¼ã€‚</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">Override
</span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1;">convert(</span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1;"> from, </span><span style="color:#8ec07c;">AdditionalEntity</span><span style="color:#fdf4c1;"> additional) </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( from </span><span style="color:#fe8019;">== </span><span style="color:#d3869b;">null </span><span style="color:#fe8019;">&amp;&amp;</span><span style="color:#fdf4c1aa;"> additional </span><span style="color:#fe8019;">== </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">null</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1aa;"> targetDto </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1aa;">();

    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( from </span><span style="color:#fe8019;">!= </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        targetDto.</span><span style="color:#fdf4c1;">setEnumType( </span><span style="color:#8ec07c;">TypeMapper</span><span style="color:#fdf4c1;">.mapType( from.getIntType() ) )</span><span style="color:#fdf4c1aa;">;
        targetDto.</span><span style="color:#fdf4c1;">setCreateTime( from.getCreatedAt() )</span><span style="color:#fdf4c1aa;">;
        targetDto.</span><span style="color:#fdf4c1;">setStrProperty( from.getStrProperty() )</span><span style="color:#fdf4c1aa;">;
    }
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( additional </span><span style="color:#fe8019;">!= </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        targetDto.</span><span style="color:#fdf4c1;">setLastUpdateTime( additional.getUpdatedAt() )</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> targetDto;
}

@</span><span style="color:#fdf4c1;">Override
</span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">SourceEntity </span><span style="color:#fdf4c1;">convertToSource(</span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1;"> from) </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( from </span><span style="color:#fe8019;">== </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">null</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1aa;"> sourceEntity </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1aa;">();

    sourceEntity.</span><span style="color:#fdf4c1;">setCreatedAt( from.getCreateTime() )</span><span style="color:#fdf4c1aa;">;
    sourceEntity.</span><span style="color:#fdf4c1;">setIntType( mapType( from.getEnumType() ) )</span><span style="color:#fdf4c1aa;">;
    sourceEntity.</span><span style="color:#fdf4c1;">setStrProperty( from.getStrProperty() )</span><span style="color:#fdf4c1aa;">;

    </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> sourceEntity;
}

@</span><span style="color:#fdf4c1;">Override
</span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">AdditionalEntity </span><span style="color:#fdf4c1;">convertToAdditional(</span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1;"> from) </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( from </span><span style="color:#fe8019;">== </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">null</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#8ec07c;">AdditionalEntity</span><span style="color:#fdf4c1aa;"> additionalEntity </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">AdditionalEntity</span><span style="color:#fdf4c1aa;">();

    additionalEntity.</span><span style="color:#fdf4c1;">setUpdatedAt( from.getLastUpdateTime() )</span><span style="color:#fdf4c1aa;">;

    additionalEntity.</span><span style="color:#fdf4c1;">setUpdatedBy( </span><span style="color:#b8bb26;">&quot;System&quot; </span><span style="color:#fdf4c1;">)</span><span style="color:#fdf4c1aa;">;
    additionalEntity.</span><span style="color:#fdf4c1;">setContent( </span><span style="color:#b8bb26;">&quot;Created at &quot; </span><span style="color:#fe8019;">+ </span><span style="color:#fabd2f;">java</span><span style="color:#fdf4c1;">.</span><span style="color:#fabd2f;">time</span><span style="color:#fdf4c1;">.</span><span style="color:#8ec07c;">OffsetDateTime</span><span style="color:#fdf4c1;">.now() )</span><span style="color:#fdf4c1aa;">;

    </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> additionalEntity;
}
</span></pre><h1 id="builder-mo-shi-shi-ti-dui-xiang-yu-dai-ma-sheng-cheng"><a class="zola-anchor" href="#builder-mo-shi-shi-ti-dui-xiang-yu-dai-ma-sheng-cheng" aria-label="Anchor link for: builder-mo-shi-shi-ti-dui-xiang-yu-dai-ma-sheng-cheng">ğŸ”—</a>Builder æ¨¡å¼å®ä½“å¯¹è±¡ä¸ä»£ç ç”Ÿæˆ</h1>
<p><a href="https://mapstruct.org/" title="Java bean mappings, the easy way!">MapStruct</a> é™¤äº†å¯¹ POJO çš„æ”¯æŒå¤–ï¼Œè¿˜æä¾›å¯¹åŸºäº Builder æ¨¡å¼çš„ä¸å¯å˜å¯¹è±¡çš„æ”¯æŒï¼Œåªè¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ol>
<li>ç›®æ ‡ç±»ä¸­å¿…é¡»å­˜åœ¨ä¸€ä¸ªå…¬å…±çš„é™æ€æ— å‚æ–¹æ³•å¯ä»¥æ„é€ ä¸€ä¸ª Builder æ¨¡å¼å¯¹è±¡ (å½¢å¦‚ <code>public static Builder builder()</code>)</li>
<li>ç›®æ ‡ç±»çš„ Builder æ¨¡å¼ç±»ä¸­å¿…é¡»å­˜åœ¨ä¸€ä¸ªå…¬å¸çš„æ— å‚æ–¹æ³•å¯ä»¥ç”Ÿæˆä¸€ä¸ªç›®æ ‡ç±»å¯¹è±¡ (å½¢å¦‚ <code>public UserDto build()</code>)</li>
</ol>
<p>åœ¨ä¸Šè¿°æ¡ä»¶ä¸­ï¼Œæ–¹æ³•åå¯ä»¥è‡ªå®šä¹‰ï¼Œä½†ä¸€èˆ¬éƒ½çº¦å®šä¸º <code>public static Builder builder()</code> å’Œ <code>public UserDto build()</code> ã€‚</p>
<p><a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a> çš„ Builder æ¨¡å¼å’Œ <a href="https://freebuilder.inferred.org/" title="Automatic generation of the Builder pattern for Java">FreeBuilder</a> éƒ½èƒ½å¤Ÿæ»¡è¶³ä¸Šè¿°è¦æ±‚ã€‚</p>
<p>ä¸‹è¿°å®ä½“å¯¹è±¡åˆ†åˆ«ä½¿ç”¨äº† <a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a> å’Œ <a href="https://freebuilder.inferred.org/" title="Automatic generation of the Builder pattern for Java">FreeBuilder</a>ã€‚</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">AutoValue
</span><span style="color:#fa5c4b;">public abstract class </span><span style="color:#8ec07c;">SourceEntity </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">public abstract int </span><span style="color:#8ec07c;">getIntType</span><span style="color:#fdf4c1aa;">();
    </span><span style="color:#fa5c4b;">public abstract </span><span style="color:#8ec07c;">String getStrProperty</span><span style="color:#fdf4c1aa;">();
    </span><span style="color:#fa5c4b;">public abstract </span><span style="color:#8ec07c;">OffsetDateTime getCreatedAt</span><span style="color:#fdf4c1aa;">();

    </span><span style="color:#fa5c4b;">public static </span><span style="color:#8ec07c;">Builder builder</span><span style="color:#fdf4c1aa;">() {
        </span><span style="color:#fa5c4b;">return new </span><span style="color:#8ec07c;">AutoValue_SourceEntity</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">Builder</span><span style="color:#fdf4c1aa;">();
    }

    @</span><span style="color:#fdf4c1;">AutoValue</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">Builder
    </span><span style="color:#fa5c4b;">public abstract static class </span><span style="color:#8ec07c;">Builder </span><span style="color:#fdf4c1aa;">{
        </span><span style="color:#fa5c4b;">public abstract </span><span style="color:#8ec07c;">Builder setIntType</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">int </span><span style="color:#fdf4c1;">newIntType</span><span style="color:#fdf4c1aa;">);
        </span><span style="color:#fa5c4b;">public abstract </span><span style="color:#8ec07c;">Builder setStrProperty</span><span style="color:#fdf4c1aa;">(</span><span style="color:#8ec07c;">String </span><span style="color:#fdf4c1;">newStrProperty</span><span style="color:#fdf4c1aa;">);
        </span><span style="color:#fa5c4b;">public abstract </span><span style="color:#8ec07c;">Builder setCreatedAt</span><span style="color:#fdf4c1aa;">(</span><span style="color:#8ec07c;">OffsetDateTime </span><span style="color:#fdf4c1;">newCreatedAt</span><span style="color:#fdf4c1aa;">);

        </span><span style="color:#fa5c4b;">public abstract </span><span style="color:#8ec07c;">SourceEntity build</span><span style="color:#fdf4c1aa;">();
    }
}

@</span><span style="color:#fdf4c1;">FreeBuilder
</span><span style="color:#fa5c4b;">public abstract class </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">public abstract </span><span style="color:#8ec07c;">TypeEnum getEnumType</span><span style="color:#fdf4c1aa;">();
    </span><span style="color:#fa5c4b;">public abstract </span><span style="color:#8ec07c;">String getStrProperty</span><span style="color:#fdf4c1aa;">();
    </span><span style="color:#fa5c4b;">public abstract </span><span style="color:#8ec07c;">OffsetDateTime getCreateTime</span><span style="color:#fdf4c1aa;">();

    </span><span style="color:#fa5c4b;">public static </span><span style="color:#8ec07c;">Builder builder</span><span style="color:#fdf4c1aa;">() {
        </span><span style="color:#fa5c4b;">return new </span><span style="color:#8ec07c;">Builder</span><span style="color:#fdf4c1aa;">();
    }

    </span><span style="color:#fa5c4b;">static class </span><span style="color:#8ec07c;">Builder </span><span style="color:#fa5c4b;">extends </span><span style="color:#8ec07c;">TargetDto_Builder </span><span style="color:#fdf4c1aa;">{ }
}
</span></pre>
<p>æ³¨æ„ï¼Œåœ¨ <a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a> å’Œ <a href="https://freebuilder.inferred.org/" title="Automatic generation of the Builder pattern for Java">FreeBuilder</a> çš„ç”¨ä¾‹ä¸­ï¼Œå£°æ˜å±æ€§çš„æ–¹æ³•åå¿…é¡»ç¬¦åˆ Bean çš„è§„èŒƒ (å³ Getter æ–¹æ³•å¿…é¡»ä»¥ <code>get</code> æˆ– <code>is</code> å¼€å¤´ï¼ŒSetter æ–¹æ³•å¿…é¡»ä»¥ <code>set</code> å¼€å¤´)ã€‚</p>
<p>Mapper æ¥å£ç±»ä¸ POJO æ—¶ä¸€æ ·ã€‚</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">Mapper</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">unmappedSourcePolicy </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">ReportingPolicy</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">WARN</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">unmappedTargetPolicy </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">ReportingPolicy</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">ERROR</span><span style="color:#fdf4c1aa;">)
</span><span style="color:#fa5c4b;">public interface </span><span style="color:#8ec07c;">TypeMapper </span><span style="color:#fdf4c1aa;">{
    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;intType&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;enumType&quot;</span><span style="color:#fdf4c1aa;">)
    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;createdAt&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;createTime&quot;</span><span style="color:#fdf4c1aa;">)
    </span><span style="color:#8ec07c;">TargetDto convert</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">SourceEntity </span><span style="color:#fdf4c1;">from</span><span style="color:#fdf4c1aa;">);

    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;enumType&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;intType&quot;</span><span style="color:#fdf4c1aa;">)
    @</span><span style="color:#fdf4c1;">Mapping</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fdf4c1;">source </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;createTime&quot;</span><span style="color:#fdf4c1aa;">, </span><span style="color:#fdf4c1;">target </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;createdAt&quot;</span><span style="color:#fdf4c1aa;">)
    </span><span style="color:#8ec07c;">SourceEntity convert</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1;">from</span><span style="color:#fdf4c1aa;">);

    </span><span style="color:#fa5c4b;">default int </span><span style="color:#8ec07c;">mapType</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">TypeEnum </span><span style="color:#fdf4c1;">v</span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">switch </span><span style="color:#fdf4c1aa;">(v) {
            </span><span style="color:#fa5c4b;">case </span><span style="color:#fdf4c1;">LARGE</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">1</span><span style="color:#fdf4c1aa;">;
            </span><span style="color:#fa5c4b;">case </span><span style="color:#fdf4c1;">MEDIUM</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">2</span><span style="color:#fdf4c1aa;">;
            </span><span style="color:#fa5c4b;">default</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">3</span><span style="color:#fdf4c1aa;">;
        }
    }

    </span><span style="color:#fa5c4b;">static </span><span style="color:#8ec07c;">TypeEnum mapType</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final int </span><span style="color:#fdf4c1;">v</span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">switch </span><span style="color:#fdf4c1aa;">(v) {
            </span><span style="color:#fa5c4b;">case </span><span style="color:#d3869b;">1</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#8ec07c;">TypeEnum</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">LARGE</span><span style="color:#fdf4c1aa;">;
            </span><span style="color:#fa5c4b;">case </span><span style="color:#d3869b;">2</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#8ec07c;">TypeEnum</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">MEDIUM</span><span style="color:#fdf4c1aa;">;
            </span><span style="color:#fa5c4b;">default</span><span style="color:#fe8019;">: </span><span style="color:#fa5c4b;">return </span><span style="color:#8ec07c;">TypeEnum</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">SMALL</span><span style="color:#fdf4c1aa;">;
        }
    }
}
</span></pre>
<p>ç”Ÿæˆçš„å®ç°ç±»ä¸­ä½¿ç”¨äº†å„è‡ªçš„ Builder ç±»ã€‚</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">Override
</span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">TargetDto </span><span style="color:#fdf4c1;">convert(</span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1;"> from) </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( from </span><span style="color:#fe8019;">== </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">null</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">Builder</span><span style="color:#fdf4c1aa;"> targetDto </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">builder()</span><span style="color:#fdf4c1aa;">;

    targetDto.</span><span style="color:#fdf4c1;">setEnumType( </span><span style="color:#8ec07c;">TypeMapper</span><span style="color:#fdf4c1;">.mapType( from.getIntType() ) )</span><span style="color:#fdf4c1aa;">;
    targetDto.</span><span style="color:#fdf4c1;">setCreateTime( from.getCreatedAt() )</span><span style="color:#fdf4c1aa;">;
    targetDto.</span><span style="color:#fdf4c1;">setStrProperty( from.getStrProperty() )</span><span style="color:#fdf4c1aa;">;

    </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> targetDto.</span><span style="color:#fdf4c1;">build()</span><span style="color:#fdf4c1aa;">;
}

@</span><span style="color:#fdf4c1;">Override
</span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">SourceEntity </span><span style="color:#fdf4c1;">convert(</span><span style="color:#8ec07c;">TargetDto</span><span style="color:#fdf4c1;"> from) </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">( from </span><span style="color:#fe8019;">== </span><span style="color:#d3869b;">null </span><span style="color:#fdf4c1aa;">) {
        </span><span style="color:#fa5c4b;">return </span><span style="color:#d3869b;">null</span><span style="color:#fdf4c1aa;">;
    }

    </span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">Builder</span><span style="color:#fdf4c1aa;"> sourceEntity </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">SourceEntity</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">builder()</span><span style="color:#fdf4c1aa;">;

    sourceEntity.</span><span style="color:#fdf4c1;">setCreatedAt( from.getCreateTime() )</span><span style="color:#fdf4c1aa;">;
    sourceEntity.</span><span style="color:#fdf4c1;">setIntType( mapType( from.getEnumType() ) )</span><span style="color:#fdf4c1aa;">;
    sourceEntity.</span><span style="color:#fdf4c1;">setStrProperty( from.getStrProperty() )</span><span style="color:#fdf4c1aa;">;

    </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> sourceEntity.</span><span style="color:#fdf4c1;">build()</span><span style="color:#fdf4c1aa;">;
}
</span></pre><h1 id="mapper-shi-xian-lei-shi-li-de-huo-qu"><a class="zola-anchor" href="#mapper-shi-xian-lei-shi-li-de-huo-qu" aria-label="Anchor link for: mapper-shi-xian-lei-shi-li-de-huo-qu">ğŸ”—</a>Mapper å®ç°ç±»å®ä¾‹çš„è·å–</h1>
<p><a href="https://mapstruct.org/" title="Java bean mappings, the easy way!">MapStruct</a> è‡ªåŠ¨ç”Ÿæˆçš„ Mapper æ¥å£çš„å®ç°ç±»çš„ç±»åé»˜è®¤æ˜¯æ¥å£ååé¢åŠ ä¸Š <code>Impl</code> åç¼€ï¼Œå¦‚æœæœ‰éœ€è¦ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ã€‚</p>
<p>ä½¿ç”¨ Mapper æ¥å£çš„å®ç°æ—¶ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒç”¨å®ç°ç±»çš„ <code>new</code> è¡¨è¾¾å¼ã€‚</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">Mapper
</span><span style="color:#fa5c4b;">public interface </span><span style="color:#8ec07c;">TypeMapper </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#fa5c4b;">static </span><span style="color:#8ec07c;">TypeMapper instance</span><span style="color:#fdf4c1aa;">() {
        </span><span style="color:#fa5c4b;">return new </span><span style="color:#8ec07c;">TypeMapperImpl</span><span style="color:#fdf4c1aa;">();
    }
}
</span></pre>
<p>æˆ–è€…ä½¿ç”¨ <a href="https://mapstruct.org/" title="Java bean mappings, the easy way!">MapStruct</a> æä¾›çš„ <code>org.mapstruct.factory.Mappers</code> å®ç”¨ç±»ã€‚</p>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">Mapper
</span><span style="color:#fa5c4b;">public interface </span><span style="color:#8ec07c;">TypeMapper </span><span style="color:#fdf4c1aa;">{
    </span><span style="color:#8ec07c;">TypeMapper INSTANCE </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">Mappers</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">getMapper(</span><span style="color:#8ec07c;">TypeMapper</span><span style="color:#fdf4c1;">.class)</span><span style="color:#fdf4c1aa;">;
}
</span></pre>
<p>å¦‚æœä½¿ç”¨äº†ä¾èµ–æ³¨å…¥æ¡†æ¶ (å¦‚ <a href="https://jcp.org/en/jsr/detail?id=346">Contexts and Dependency Injection for JavaTM EE, CDI</a> <a href="https://projects.spring.io/spring-framework/">Spring</a> <a href="https://github.com/google/guice">Guice</a> ç­‰) çš„è¯ï¼Œä¹Ÿå¯ä»¥å¯ç”¨ <a href="https://mapstruct.org/" title="Java bean mappings, the easy way!">MapStruct</a> å¯¹å…¶çš„æ”¯æŒã€‚</p>
<hr />
<p>å®Œæ•´çš„ç¤ºä¾‹ä»£ç å¯ä»¥å‚è§ <a href="https://github.com/wbprime/java-mods/tree/master/mapstruct-usecases">MapStruct Usecases</a> ã€‚</p>
<p>æƒ³äº†è§£æ›´å¤šçš„ <a href="https://mapstruct.org/" title="Java bean mappings, the easy way!">MapStruct</a> ç”¨æ³•ï¼Œå¯ä»¥é˜…è¯» <a href="https://mapstruct.org/documentation/stable/reference/html/" title="MapStruct Reference Guide">å®˜æ–¹æ–‡æ¡£</a>ï¼Œä¹Ÿå¯ä»¥å» [å®˜æ–¹ä»“åº“][https://github.com/mapstruct/mapstruct-examples] äº†è§£å„ç§ç”¨ä¾‹ã€‚</p>
<hr />
<p>ä»¥ä¸Šã€‚</p>

    </div>

    
    

    <div class="post-footer">
        
            
                <div class="post-tags">
                    
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;java&#x2F;">#java</a>
                    
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;apt&#x2F;">#apt</a>
                    
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;mapstruct&#x2F;">#mapstruct</a>
                    
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;autovalue&#x2F;">#autovalue</a>
                    
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;freebuilder&#x2F;">#freebuilder</a>
                    
                </div>
            
            
                <div class="post-nav">
                    
                        <a class="previous" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;add-supports-for-apt-in-maven&#x2F;">â€¹ åœ¨ Maven ä¸­æ”¯æŒ Java çš„æ³¨è§£å¤„ç†å™¨ APT</a>
                    
                    
                        <a class="next" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;jooq-usecases-sql-builder&#x2F;">JOOQ çš„ä½¿ç”¨ - æ‹¼æ¥ SQL è¯­å¥ (SQL Builder) â€º</a>
                    
                    
                    
                </div>
            

        

    </div>

    
    
</article>


                </div>
            </main>

            
            
        </div>

      
          <script type="text/javascript" src="https:&#x2F;&#x2F;www.wangbo.im&#x2F;even.js" ></script>
      
    </body>

</html>
