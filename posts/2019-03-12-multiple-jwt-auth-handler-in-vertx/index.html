<!DOCTYPE html>
<html lang="en">
    <head>
    <title>Multiple JWT Auth Handlers in Vert.x - Elvis Wang</title>
    
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="wangboâ€™s home &amp; blog"/>

    <meta property="og:title" content="
    wangboâ€™s home &amp; blog -&nbsp;Multiple JWT Auth Handlers in Vert.x" />
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;2019-03-12-multiple-jwt-auth-handler-in-vertx&#x2F;"/>
    <meta property="og:description" content="&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;vertx.io&quot;&gt;Vert.x&lt;&#x2F;a&gt; çš„å®˜æ–¹ Web å¼€å‘åŒ… &lt;a href=&quot;https:&#x2F;&#x2F;vertx.io&#x2F;docs&#x2F;vertx-web&#x2F;java&#x2F;&quot;&gt;Vert.x-Webâ€¦"/>
    <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;style.css">
    <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;color&#x2F;blue.css">
<link rel="shortcut icon" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;favicon.ico" type="image/x-icon" /></head>
    <body>
        <div class="container full">
<header class="header">
    <div class="header__inner">
        <div class="header__logo">
            <a href="&#x2F;">
    <div class="logo">
        WB Prime
    </div>
</a>
        </div>
        <div class="menu-trigger">menu</div>
    </div>
    
    <nav class="menu">
        <ul class="menu__inner menu__inner--desktop">
            
            
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">About</a>
                    </li>
                
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">Categories</a>
                    </li>
                
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">Tags</a>
                    </li>
                
            </ul>

        <ul class="menu__inner menu__inner--mobile">
            
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">About</a>
        </li>
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">Categories</a>
        </li>
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">Tags</a>
        </li>
        </ul>
    </nav>

    </header>
<div class="content"><div class="post">
        <h1 class="post-title">
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;2019-03-12-multiple-jwt-auth-handler-in-vertx&#x2F;">Multiple JWT Auth Handlers in Vert.x</a>
        </h1>
        
    <div class="post-meta">
        <span class="post-date">2019.03.12
                </span>

        <span class="post-author"></span>

        

    
    :: {<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories&#x2F;vertx&#x2F;">Vertx</a>} 

            
    ::
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;vert-x&#x2F;">vert.x</a>
        
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;jwt&#x2F;">jwt</a>
        
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;auth&#x2F;">auth</a>
        
    
            
        
    </div>



        

        <div class="post-content">
            <p><a href="https://vertx.io">Vert.x</a> çš„å®˜æ–¹ Web å¼€å‘åŒ… <a href="https://vertx.io/docs/vertx-web/java/">Vert.x-Web</a> ä¸­
æä¾›äº†å†…ç½®çš„ Authentication&amp;Authorisation æ”¯æŒï¼›é€šè¿‡æ‰©å±•çš„
<a href="https://vertx.io/docs/vertx-auth-common/java/">Auth Common</a> æ¨¡å—å’Œ <a href="https://vertx.io/docs/vertx-auth-jdbc/java/">JDBC
auth</a> <a href="https://vertx.io/docs/vertx-auth-mongo/java/">MongoDB
auth</a> <a href="https://vertx.io/docs/vertx-auth-shiro/java/">Shiro
auth</a> <a href="https://vertx.io/docs/vertx-auth-jwt/java/">JWT
auth</a> <a href="https://vertx.io/docs/vertx-auth-oauth2/java/">OAuth 2</a> ç­‰æ¨¡å—ï¼Œå¯ä»¥è¦†ç›–å¤§éƒ¨åˆ†çš„ç”¨æˆ·è®¤è¯ä¸éªŒæƒçš„æ”¯æŒã€‚</p>
<p>åœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œé‡åˆ°äº†ä¸€ä¸ªæ”¯æŒå¤šç”¨æˆ·æä¾›æ–¹çš„éœ€æ±‚ï¼šé¡¹ç›®çš„ç”¨æˆ·æ˜¯ä»å¤šä¸ªå…¶ä»–é¡¹ç›®å¯¼å…¥çš„ï¼›é¡¹ç›®çš„é€»è¾‘æ¯”è¾ƒç®€
å•ï¼Œä¸æƒ³ç»´æŠ¤è‡ªå·±çš„ç”¨æˆ·ä¿¡æ¯æ•°æ®å’Œå¤–éƒ¨æ˜ å°„ã€‚</p>
<p>æ¯”å¦‚ï¼Œé¡¹ç›®éœ€è¦æ”¯æŒä¸»ç«™ç”¨æˆ·ã€è§†é¢‘ç½‘ç«™ç­‰å…¥å£ç™»å½•è®¿é—®ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œåªéœ€è¦é¡¹ç›®ç»´æŠ¤ä¸€å¥—å†…éƒ¨ç”¨æˆ·è¡¨ã€ä¸€ä¸ªå¤–
éƒ¨é¡¹ç›®è¡¨ä»¥åŠå†…éƒ¨ç”¨æˆ·å’Œå¤–éƒ¨ç”¨æˆ·çš„æ˜ å°„è¡¨ï¼›åœ¨ç”¨æˆ·å¯¼å…¥æˆ–ç”¨æˆ·ç»‘å®šè¯·æ±‚æ—¶ï¼Œå»ºç«‹å¤–éƒ¨é¡¹ç›® ID å’Œå¤–éƒ¨é¡¹ç›®ç”¨æˆ·
ID ä¸å†…éƒ¨ç”¨æˆ· ID çš„å¯¹åº”å…³ç³»ï¼›åœ¨ç™»å½•è¯·æ±‚æ—¶ï¼Œæ ¹æ®å¤–éƒ¨é¡¹ç›® ID å’Œå¤–éƒ¨é¡¹ç›®ç”¨æˆ· ID è°ƒç”¨ç”¨æˆ·è®¤è¯å›è°ƒï¼Œé€šè¿‡
åå†å¯»æ‰¾åˆ°å†…éƒ¨ç”¨æˆ·çš„ ID å³å¯ã€‚</p>
<p>å®é™…åœ¨é¡¹ç›®çš„è®¾è®¡å’Œå®ç°è¿‡ç¨‹ä¸­ï¼Œé‡‡ç”¨äº†ä¸€ä¸ªæ¯”è¾ƒå¥½ç©çš„æ–¹æ³•ï¼šåœ¨å†…éƒ¨ç”¨æˆ·è¡¨çš„åŸºç¡€ä¸Šï¼Œå¯¹ç”¨æˆ·ä½¿ç”¨
<a href="https://jwt.io">JWT</a> çš„è®¤è¯æ¨¡å‹ï¼›ç”¨æˆ·ç™»å½•æ—¶ï¼Œæ ¹æ®å¤–éƒ¨é¡¹ç›® ID å’Œå¤–éƒ¨é¡¹ç›®ç”¨æˆ· ID è°ƒç”¨ç”¨æˆ·è®¤è¯å›è°ƒï¼Œå‘
æ”¾ JWT tokenï¼Œåœ¨ token ä¸­é™å®šç”¨æˆ·çš„è®¿é—®æƒé™ã€‚</p>
<p><a name="continue-reading"></a></p>
<h1 id="vert-x-dui-jwt-de-zhi-chi"><a class="zola-anchor" href="#vert-x-dui-jwt-de-zhi-chi" aria-label="Anchor link for: vert-x-dui-jwt-de-zhi-chi">ğŸ”—</a>
Vert.x å¯¹ JWT çš„æ”¯æŒ</h1>
<p>ç›¸å…³æ–‡æ¡£å‚è§ <a href="https://vertx.io/docs/vertx-auth-common/java/">Vert.x Auth Common</a> <a href="https://vertx.io/docs/vertx-auth-jwt/java/">Vert.x
JWT</a> <a href="https://vertx.io/docs/vertx-web/java/#_authentication_authorisation">Vert.x Web AuthN &amp;
AuthZ</a> ã€‚</p>
<ol>
<li>ç¡®å®š JWT çš„ç®—æ³•å’Œå¯†é’¥</li>
</ol>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">WTAuthOptions authConfig = </span><span style="color:#569cd6;">new </span><span style="color:#dcdcdc;">JWTAuthOptions()
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">.setKeyStore(</span><span style="color:#569cd6;">new </span><span style="color:#dcdcdc;">KeyStoreOptions()
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">.setType(</span><span style="color:#d69d85;">&quot;jceks&quot;</span><span style="color:#dcdcdc;">)
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">.setPath(</span><span style="color:#d69d85;">&quot;keystore.jceks&quot;</span><span style="color:#dcdcdc;">)
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">.setPassword(</span><span style="color:#d69d85;">&quot;secret&quot;</span><span style="color:#dcdcdc;">));
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">JWTAuth authProvider = JWTAuth.create(vertx, authConfig);
</span></pre>
<p>JWTAuth æ˜¯ Vert.x çš„ AuthProvider çš„ä¸€ä¸ªå®ç°ï¼›AuthProvider ä¸»è¦æä¾›æ ¹æ®ä¸€ä¸ª JSON çš„ç”¨æˆ·ä¿¡æ¯å¯¹è±¡è¿›è¡Œç”¨æˆ·è®¤è¯çš„èƒ½åŠ›ï¼›JWTAuth åˆ™é€šè¿‡æ ¡éªŒä¸€ä¸ª JWT å‹çš„ JSON token æ¥éªŒæƒï¼ŒåŒæ—¶æ‰©å±•åŠ ä¸Šäº†ç”Ÿæˆ JWT token çš„æ–¹æ³•ã€‚</p>
<p>JWT ç®—æ³•å’Œç»“æ„ç›¸å…³å‚è§ <a href="https://jwt.io">JWT</a> ã€‚</p>
<ol start="2">
<li>ç”Ÿæˆå¹¶å‘æ”¾ Token</li>
</ol>
<p>è¿™ä¸€æ­¥ä¸€èˆ¬åœ¨ç™»å½•æ—¶è¿›è¡Œã€‚</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">router.route(&quot;/login&quot;).handler(this::login);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">private void login(final RoutingContext ctx) {
</span><span style="color:#dcdcdc;">  </span><span style="color:#dcdcdc;">if (&quot;paulo&quot;.equals(ctx.request().getParam(&quot;username&quot;)) &amp;&amp; &quot;secret&quot;.equals(ctx.request().getParam(&quot;password&quot;))) {
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">ctx.response().end(authProvider.generateToken(new JsonObject().put(&quot;sub&quot;, &quot;paulo&quot;), new JWTOptions()));
</span><span style="color:#dcdcdc;">  </span><span style="color:#dcdcdc;">} else {
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">ctx.fail(401);
</span><span style="color:#dcdcdc;">  </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">}
</span></pre>
<ol start="3">
<li>éªŒè¯ Token</li>
</ol>
<p>è¿™ä¸€æ­¥ä¸€èˆ¬ä»¥æ‹¦æˆªå™¨çš„å½¢å¼å®ç°ï¼Œç”¨äºåœ¨è®¿é—®éœ€è¦æƒé™æ§åˆ¶çš„æ¥å£æ—¶ï¼Œæå‰é€šè¿‡ JWT éªŒæƒæ¥ç¡®å®šæ˜¯å¦æ”¾è¡Œã€‚</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">router.route().handler(JWTAuthHandler.create(authProvider));
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">router.get().handler(this::findById);
</span><span style="color:#dcdcdc;">router.post().handler(this::add);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">private void findById(final RoutingContext ctx) {
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">final User user = ctx.getUser();
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">if (null != user) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">// Authenticated
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">// TODO
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">private void add(final RoutingContext ctx) {
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">final User user = ctx.getUser();
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">if (null != user) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">// Authenticated
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">// TODO
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">}
</span></pre><h1 id="ji-yu-tong-yong-liu-cheng-de-gai-zao"><a class="zola-anchor" href="#ji-yu-tong-yong-liu-cheng-de-gai-zao" aria-label="Anchor link for: ji-yu-tong-yong-liu-cheng-de-gai-zao">ğŸ”—</a>
åŸºäºé€šç”¨æµç¨‹çš„æ”¹é€ </h1>
<p>å› ä¸ºéœ€è¦å¢åŠ å¯¹å¤šç”¨æˆ·æºçš„æ”¯æŒï¼Œæ‰€ä»¥éœ€è¦æ‰©å……å®ç° JWT éªŒè¯çš„æµç¨‹ï¼Œä½¿å¾—èƒ½å¤Ÿï¼š1. ä¸åŒç”¨æˆ·æºçš„ç”¨æˆ·éœ€è¦ä½¿ç”¨ä¸åŒçš„å¯†é’¥å’Œæœ‰æ•ˆæœŸç­‰åŸºæœ¬é…ç½®ï¼›2. ä¸åŒæ•°æ®æºçš„ç”¨æˆ·çš„ç™»å½•æ¥å£å‚æ•°å¯ä»¥ä¸ä¸€æ ·ï¼ˆå¦‚ç”¨æˆ·æº A é€šè¿‡ username/passwordï¼Œç”¨æˆ·æº B é€šè¿‡ uid/tokenï¼‰</p>
<p>æœ€ä¸»è¦çš„æ€è·¯æ˜¯æŠŠå„ä¸ªç”¨æˆ·æºä¸åŒçš„é€»è¾‘æŠ½è±¡å‡ºæ¥ï¼ŒåŒ…æ‹¬ç”¨æˆ·ç®¡ç†ã€JWT å¯†é’¥ç®¡ç†ã€ç”¨æˆ·è®¤è¯ã€ç”¨æˆ·æˆæƒç­‰ï¼›æ‰©å±•
å®˜æ–¹çš„ JWT Auth Providerï¼Œæä¾›å¤šæºçš„åˆ†å‘éªŒè¯ã€‚</p>
<h2 id="yong-hu-yuan-de-chou-xiang-userrealm"><a class="zola-anchor" href="#yong-hu-yuan-de-chou-xiang-userrealm" aria-label="Anchor link for: yong-hu-yuan-de-chou-xiang-userrealm">ğŸ”—</a>
ç”¨æˆ·æºçš„æŠ½è±¡ UserRealm</h2>
<pre style="background-color:#1e1e1e;">
<span style="color:#569cd6;">public interface </span><span style="color:#dcdcdc;">RxUserRealm {
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">Set&lt;String&gt; supportedRealms();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">Single&lt;Boolean&gt; isUserAvailable(String uid);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">Single&lt;String&gt; getJwtSecret();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">Single&lt;JwtTokenDto&gt; authenticate(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">LoginDto login);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">Single&lt;Boolean&gt; authorize(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">PrincipalDto pricipal, </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">PermissionDto permission);
</span><span style="color:#dcdcdc;">}
</span></pre>
<p>å…¶ä¸­ï¼ŒsupportedRealms è¯´æ˜è‡ªèº«çš„ç”¨æˆ·æºé›†åˆï¼›isUserAvailable æä¾›æ ¹æ®ç”¨æˆ·IDæˆ–ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å­˜åœ¨çš„åŠŸèƒ½ï¼›getJwtSecret æä¾›æŸ¥è¯¢ç”¨æˆ·æºç›¸å…³çš„ JWT å¯†é’¥çš„åŠŸèƒ½ï¼›authenticate &amp; authorize æä¾›å„ç”¨æˆ·æºçš„ç”¨æˆ·è®¤è¯å’Œæˆæƒç®¡ç†çš„åŠŸèƒ½ã€‚</p>
<p>æ¥å£çš„è¿”å›ä½¿ç”¨ <a href="https://github.com/ReactiveX/RxJava">RxJava 2</a> çš„ç±»å‹ï¼Œä¸»è¦åŸå› æ˜¯è¿™äº›æ¥å£å¯ä»¥æ˜¯è¿œç¨‹è°ƒç”¨çš„ï¼Œå¯ä»¥åˆ©ç”¨RxJava çš„å¼‚æ­¥å“åº”æœºåˆ¶æ¥å°è£…å·®å¼‚ã€‚</p>
<p>ä½œä¸ºç¤ºä¾‹ï¼ŒæœåŠ¡æä¾›äº†ä¸€ä¸ª DemoUserRealmï¼Œç”¨ä»¥æä¾›æ— æ•°æ®æºç”¨æˆ·ä½“éªŒæœåŠ¡çš„èƒ½åŠ›ã€‚</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">@AutoService(RxUserRealm.class)
</span><span style="color:#569cd6;">public class </span><span style="color:#dcdcdc;">DemoUserRealm </span><span style="color:#569cd6;">implements </span><span style="color:#4ec9b0;">RxUserRealm </span><span style="color:#dcdcdc;">{
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">private static final </span><span style="color:#dcdcdc;">String UID_PREFIX = </span><span style="color:#d69d85;">&quot;demo&quot;</span><span style="color:#dcdcdc;">;
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">private static final </span><span style="color:#dcdcdc;">String JWT_SECRET = </span><span style="color:#d69d85;">&quot;demo&quot;</span><span style="color:#dcdcdc;">;
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">@Override
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public </span><span style="color:#dcdcdc;">Set&lt;String&gt; supportedRealms() {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">return </span><span style="color:#dcdcdc;">ImmutableSet.of(</span><span style="color:#d69d85;">&quot;demo&quot;</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">@Override
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public </span><span style="color:#dcdcdc;">Single&lt;Boolean&gt; isUserAvailable(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">String uid) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">return </span><span style="color:#dcdcdc;">Single.just(uid.startsWith(</span><span style="color:#b4cea8;">UID_PREFIX</span><span style="color:#dcdcdc;">));
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">@Override
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public </span><span style="color:#dcdcdc;">Single&lt;String&gt; getJwtSecret() {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">return </span><span style="color:#dcdcdc;">Single.just(</span><span style="color:#b4cea8;">JWT_SECRET</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">@Override
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public </span><span style="color:#dcdcdc;">Single&lt;JwtTokenDto&gt; authenticate(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">LoginDto login) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">String pw = login.claims().get(</span><span style="color:#d69d85;">&quot;password&quot;</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#608b4e;">// Omitted
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">return </span><span style="color:#dcdcdc;">Single.just(JwtTokenDto.create()); </span><span style="color:#608b4e;">// Omitted
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">@Override
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public </span><span style="color:#dcdcdc;">Single&lt;Boolean&gt; authorize(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">PrincipalDto principal, </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">PermissionDto permission) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">switch </span><span style="color:#dcdcdc;">(permission.category()) {
</span><span style="color:#dcdcdc;">            </span><span style="color:#569cd6;">case </span><span style="color:#b4cea8;">READ</span><span style="color:#569cd6;">:
</span><span style="color:#dcdcdc;">                </span><span style="color:#569cd6;">return </span><span style="color:#dcdcdc;">Single.just(Boolean.</span><span style="color:#b4cea8;">TRUE</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">            </span><span style="color:#569cd6;">case </span><span style="color:#b4cea8;">WRITE</span><span style="color:#569cd6;">:
</span><span style="color:#dcdcdc;">                </span><span style="color:#569cd6;">return </span><span style="color:#dcdcdc;">Single.just(Boolean.</span><span style="color:#b4cea8;">FALSE</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">            </span><span style="color:#569cd6;">default:
</span><span style="color:#dcdcdc;">                </span><span style="color:#569cd6;">return </span><span style="color:#dcdcdc;">Single.just(Boolean.</span><span style="color:#b4cea8;">FALSE</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">}
</span></pre>
<p><code>@AutoService</code> æ³¨è§£æ˜¯ Google Auto-Service åŒ…çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ¥è¾…åŠ©å®ç° Java åŸºäº <code>java.util.ServiceLoader</code> çš„ SPI æœºåˆ¶ã€‚</p>
<h2 id="spibaseduserrealmservice"><a class="zola-anchor" href="#spibaseduserrealmservice" aria-label="Anchor link for: spibaseduserrealmservice">ğŸ”—</a>
SpiBasedUserRealmService</h2>
<p>ä¸ºäº†æé«˜æ‰©å±•æ€§ï¼Œå¯ä»¥ä½¿ç”¨ Java ServiceLoader (<code>java.util.ServiceLoader</code>) æ¥è¿›è¡Œ UserRealm çš„ç®¡ç†ã€‚</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#569cd6;">class </span><span style="color:#dcdcdc;">SpiBasedUserRealmService {
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">private </span><span style="color:#dcdcdc;">Map&lt;String, RxUserRealm&gt; mappedRealms;
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">SpiBasedUserRealmService() {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">Map&lt;String, RxUserRealm&gt; map = </span><span style="color:#569cd6;">new </span><span style="color:#dcdcdc;">HashMap();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">ServiceLoader&lt;RxUserRealm&gt; realms = ServiceLoader.load(RxUserRealm.class);
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">for </span><span style="color:#dcdcdc;">(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">RxUserRealm r</span><span style="color:#569cd6;">:</span><span style="color:#dcdcdc;"> realms) {
</span><span style="color:#dcdcdc;">            </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">Set&lt;String&gt; types = r.supportedRealms();
</span><span style="color:#dcdcdc;">            </span><span style="color:#569cd6;">if </span><span style="color:#dcdcdc;">(types.isEmpty()) </span><span style="color:#569cd6;">continue</span><span style="color:#dcdcdc;">;
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">            </span><span style="color:#569cd6;">for </span><span style="color:#dcdcdc;">(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">String type</span><span style="color:#569cd6;">:</span><span style="color:#dcdcdc;"> types) {
</span><span style="color:#dcdcdc;">                </span><span style="color:#569cd6;">if </span><span style="color:#dcdcdc;">(map.containsKey(type)) </span><span style="color:#569cd6;">continue</span><span style="color:#dcdcdc;">;
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">                </span><span style="color:#dcdcdc;">map.put(type, r);
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#608b4e;">// Guava utils
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">mappedRealms = ImmutableMap.copyOf(map);
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public </span><span style="color:#dcdcdc;">Optional&lt;RxUserRealm&gt; findRealm(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">String realm) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">return </span><span style="color:#dcdcdc;">Optional.ofNullable(mappedRealms.get(type));
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">}
</span></pre><h2 id="jwt-auth-provider"><a class="zola-anchor" href="#jwt-auth-provider" aria-label="Anchor link for: jwt-auth-provider">ğŸ”—</a>
JWT Auth Provider</h2>
<p>ä¸»è¦çš„é€»è¾‘åœ¨ <code>CustomJwtAuthProvider</code> ä¸­ã€‚è¯¥ç±»å®ç° Vert.x å†…ç½®çš„ JWTAuth æ¥å£ï¼Œä»¥èƒ½å¤Ÿå’Œ vert.x-web æ¨¡å—æ— ç¼ç»“åˆã€‚</p>
<p>åœ¨ authenticate çš„å®ç°ä¸­ï¼Œé¦–å…ˆå¯¹ JWT çš„ token ä¸²è¿›è¡Œåªè§£ç ä¸éªŒè¯ï¼Œä»è§£ç å‡ºçš„ JSON ä¸­å¯ä»¥è·å¾—å¯¹åº”çš„ç”¨æˆ·æºç±»å‹ï¼Œè§£ç  JWT token å¯ä»¥ä½¿ç”¨<a href="https://github.com/auth0/java-jwt">è¿™ä¸ª</a>ï¼›å¯ä»¥é€šè¿‡ç”¨æˆ·æºç±»å‹æ‰¾åˆ°å¯ç”¨çš„ RxUserRealm å®ä¾‹ï¼ŒæŸ¥è¯¢å¯¹åº”çš„ JWT é…ç½®ï¼›ä¹‹åå†ä½¿ç”¨é…ç½®åˆ›å»ºåŸç”Ÿçš„ JWTAuth å®ä¾‹è¿›è¡Œ authenticateã€‚</p>
<p>åœ¨ generateToken çš„å®ç°ä¸­ï¼Œé¦–å…ˆæ ¹æ®ç”¨æˆ·æºç±»å‹æŸ¥è¯¢åˆ°å¯ç”¨çš„ RxUserRealm å®ä¾‹ï¼Œç„¶åä½¿ç”¨è¯¥å®ä¾‹çš„ JWT é…ç½®åˆ›å»ºåŸç”Ÿçš„ JWTAuth å®ä¾‹è¿›è¡Œ generateTokenã€‚</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#569cd6;">class </span><span style="color:#dcdcdc;">CustomJwtAuthProvider </span><span style="color:#569cd6;">implements </span><span style="color:#4ec9b0;">JWTAuth </span><span style="color:#dcdcdc;">{
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">private final </span><span style="color:#dcdcdc;">Scheduler workingScheduler;
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">private final </span><span style="color:#dcdcdc;">Vertx vertx;
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">private final </span><span style="color:#dcdcdc;">SpiBasedUserRealmService realmService;
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#608b4e;">// ...
</span><span style="color:#dcdcdc;">    </span><span style="color:#608b4e;">// init code omited
</span><span style="color:#dcdcdc;">    </span><span style="color:#608b4e;">// ...
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">@Override
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public void </span><span style="color:#dcdcdc;">authenticate(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">JsonObject authInfo, </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">Handler&lt;AsyncResult&lt;User&gt;&gt; resultHandler) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">final </span><span style="color:#b4cea8;">JWT</span><span style="color:#dcdcdc;"> decode;
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">try </span><span style="color:#dcdcdc;">{
</span><span style="color:#dcdcdc;">            </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">String jwtStr = authInfo.getString(</span><span style="color:#d69d85;">&quot;jwt&quot;</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">decode = </span><span style="color:#b4cea8;">JWT</span><span style="color:#dcdcdc;">.decode(jwtStr);
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">} </span><span style="color:#569cd6;">catch </span><span style="color:#dcdcdc;">(RuntimeException ex) {
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">resultHandler.handle(Future.failedFuture(ex));
</span><span style="color:#dcdcdc;">            </span><span style="color:#569cd6;">return</span><span style="color:#dcdcdc;">;
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">String realm = firstAudience(decode);
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">authProviderByRealm(Strings.nullToEmpty(realm))
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">.subscribeOn(workingScheduler)
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">.subscribe(
</span><span style="color:#dcdcdc;">                </span><span style="color:#dcdcdc;">jwt </span><span style="color:#569cd6;">-&gt;</span><span style="color:#dcdcdc;"> jwt.authenticate(authInfo, re </span><span style="color:#569cd6;">-&gt; </span><span style="color:#dcdcdc;">{
</span><span style="color:#dcdcdc;">                    </span><span style="color:#569cd6;">if </span><span style="color:#dcdcdc;">(re.failed()) {
</span><span style="color:#dcdcdc;">                        </span><span style="color:#b4cea8;">LOG</span><span style="color:#dcdcdc;">.warn(</span><span style="color:#d69d85;">&quot;JWT auth failed for realm </span><span style="color:#e3bbab;">\&quot;</span><span style="color:#d69d85;">{}</span><span style="color:#e3bbab;">\&quot;</span><span style="color:#d69d85;">&quot;</span><span style="color:#dcdcdc;">, realm, re.cause());
</span><span style="color:#dcdcdc;">                    </span><span style="color:#dcdcdc;">} </span><span style="color:#569cd6;">else </span><span style="color:#dcdcdc;">{
</span><span style="color:#dcdcdc;">                        </span><span style="color:#b4cea8;">LOG</span><span style="color:#dcdcdc;">.debug(</span><span style="color:#d69d85;">&quot;JWT auth succeed for realm </span><span style="color:#e3bbab;">\&quot;</span><span style="color:#d69d85;">{}</span><span style="color:#e3bbab;">\&quot;</span><span style="color:#d69d85;">&quot;</span><span style="color:#dcdcdc;">, realm);
</span><span style="color:#dcdcdc;">                    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">                    </span><span style="color:#dcdcdc;">resultHandler.handle(re);
</span><span style="color:#dcdcdc;">                </span><span style="color:#dcdcdc;">}),
</span><span style="color:#dcdcdc;">                </span><span style="color:#dcdcdc;">ex </span><span style="color:#569cd6;">-&gt; </span><span style="color:#dcdcdc;">{
</span><span style="color:#dcdcdc;">                    </span><span style="color:#b4cea8;">LOG</span><span style="color:#dcdcdc;">.warn(</span><span style="color:#d69d85;">&quot;JWT auth exception for realm </span><span style="color:#e3bbab;">\&quot;</span><span style="color:#d69d85;">{}</span><span style="color:#e3bbab;">\&quot;</span><span style="color:#d69d85;">&quot;</span><span style="color:#dcdcdc;">, realm, ex);
</span><span style="color:#dcdcdc;">                    </span><span style="color:#dcdcdc;">resultHandler.handle(Future.failedFuture(ex));
</span><span style="color:#dcdcdc;">                </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">private </span><span style="color:#dcdcdc;">String firstAudience(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">Payload payload) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">List&lt;String&gt; audience = payload.getAudience();
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">return </span><span style="color:#dcdcdc;">(</span><span style="color:#569cd6;">null </span><span style="color:#dcdcdc;">!= audience </span><span style="color:#569cd6;">&amp;&amp; !</span><span style="color:#dcdcdc;"> audience.isEmpty()) </span><span style="color:#569cd6;">?</span><span style="color:#dcdcdc;"> audience.get(</span><span style="color:#b5cea8;">0</span><span style="color:#dcdcdc;">) </span><span style="color:#569cd6;">: </span><span style="color:#d69d85;">&quot;&quot;</span><span style="color:#dcdcdc;">;
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">@Override
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public </span><span style="color:#dcdcdc;">String generateToken(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">JsonObject claims, </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">JWTOptions options) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">String realm = claims.getString(</span><span style="color:#d69d85;">&quot;aud&quot;</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">return </span><span style="color:#dcdcdc;">authProviderByRealm(Strings.nullToEmpty(realm))
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">.map(jwt </span><span style="color:#569cd6;">-&gt;</span><span style="color:#dcdcdc;"> jwt.generateToken(claims, options))
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">.blockingGet();
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">private </span><span style="color:#dcdcdc;">Single&lt;JWTAuth&gt; authProviderByRealm(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">String realm) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">Optional&lt;RxUserRealm&gt; opt = realmService.findRealm(realm);
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">if </span><span style="color:#dcdcdc;">(</span><span style="color:#569cd6;">!</span><span style="color:#dcdcdc;"> opt.isPresent())
</span><span style="color:#dcdcdc;">            </span><span style="color:#569cd6;">return </span><span style="color:#dcdcdc;">Single.error(</span><span style="color:#569cd6;">new </span><span style="color:#dcdcdc;">IllegalStateException(</span><span style="color:#d69d85;">&quot;Realm not supported: &quot; </span><span style="color:#dcdcdc;">+ realm));
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">return</span><span style="color:#dcdcdc;"> opt.get().findJwtSecret(realm).map(this::jwtAuth);
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">private </span><span style="color:#dcdcdc;">JWTAuth jwtAuth(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">String key) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">return </span><span style="color:#dcdcdc;">JWTAuth.create(vertx, </span><span style="color:#569cd6;">new </span><span style="color:#dcdcdc;">JWTAuthOptions()
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">.addPubSecKey(</span><span style="color:#569cd6;">new </span><span style="color:#dcdcdc;">PubSecKeyOptions()
</span><span style="color:#dcdcdc;">                </span><span style="color:#dcdcdc;">.setAlgorithm(</span><span style="color:#d69d85;">&quot;HS256&quot;</span><span style="color:#dcdcdc;">)
</span><span style="color:#dcdcdc;">                </span><span style="color:#dcdcdc;">.setPublicKey(key)
</span><span style="color:#dcdcdc;">                </span><span style="color:#dcdcdc;">.setSymmetric(</span><span style="color:#569cd6;">true</span><span style="color:#dcdcdc;">)
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">)
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">}
</span></pre><h2 id="auth-handler"><a class="zola-anchor" href="#auth-handler" aria-label="Anchor link for: auth-handler">ğŸ”—</a>
Auth Handler</h2>
<p>å¯¹äºéœ€è¦ç”¨æˆ·è®¤è¯å’ŒéªŒæƒä¿æŠ¤çš„æ¥å£ï¼Œæ­£å¸¸ä½¿ç”¨ vert.x-web æ¨¡å—æä¾›çš„ JWTAuthHandler æœºåˆ¶ã€‚</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#608b4e;">// ...
</span><span style="color:#608b4e;">// omited
</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">JWTAuth jwtAuth = </span><span style="color:#569cd6;">new </span><span style="color:#dcdcdc;">CustomJwtAuthProvider();
</span><span style="color:#dcdcdc;">router.route().handler(JWTAuthHandler.create(jwtAuth)</span><span style="color:#ff3333;">;
</span><span style="color:#608b4e;">// omited
</span><span style="color:#608b4e;">// ...
</span></pre><h2 id="login-controller"><a class="zola-anchor" href="#login-controller" aria-label="Anchor link for: login-controller">ğŸ”—</a>
Login Controller</h2>
<p>æœ€åä¸€æ­¥æ˜¯åœ¨ HTTP çš„ handler é‡Œé¢ä½¿ç”¨ CustomJwtAuthProvider ç”Ÿæˆ JWT token å¹¶è¿”å›ç»™è°ƒç”¨æ–¹ä½¿ç”¨ã€‚</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#608b4e;">// ...
</span><span style="color:#608b4e;">// omited
</span><span style="color:#dcdcdc;">router.post(</span><span style="color:#d69d85;">&quot;/login&quot;</span><span style="color:#dcdcdc;">).handler(this::login);
</span><span style="color:#608b4e;">// omited
</span><span style="color:#608b4e;">// ...
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">JWTAuth jwtAuth; </span><span style="color:#608b4e;">// formerly inited
</span><span style="color:#569cd6;">private</span><span style="color:#dcdcdc;"> void login(final RoutingContext ctx) {
</span><span style="color:#dcdcdc;">    </span><span style="color:#608b4e;">// Generate JWT token
</span><span style="color:#dcdcdc;">    </span><span style="color:#608b4e;">// final String token = jwtAuth.generateToken(...);
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">String token = </span><span style="color:#d69d85;">&quot;generated token&quot;</span><span style="color:#dcdcdc;">;
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">ctx.response().end(token);
</span><span style="color:#dcdcdc;">}
</span></pre><h1 id="zong-jie"><a class="zola-anchor" href="#zong-jie" aria-label="Anchor link for: zong-jie">ğŸ”—</a>
æ€»ç»“</h1>
<p>æ•´ä¸ªè®¾è®¡çš„åŸºæœ¬æ€è·¯å°±æ˜¯åŸºäºå†…ç½®çš„ JWTAuth å®ç°ç±»
(io.vertx.ext.auth.jwt.impl.JWTAuthProviderImpl)ï¼Œåœ¨ authenticate &amp; generateToken çš„å®ç°ä¸­ä»å‚æ•°ä¸­å–
å‡ºç”¨æˆ·æºç±»å‹ï¼Œå†æ ¹æ®ç”¨æˆ·æºç±»å‹æ‰§è¡Œå„è‡ªçš„é€»è¾‘ï¼Œä¹‹åå†è°ƒç”¨ JWTAuthProviderImpl çš„å®ç°ã€‚è¿™æ ·åœ¨ Vert.x
çš„æ¡†æ¶èŒƒå›´ä¹‹å†…åšæœ€å°çš„æ”¹åŠ¨å®ç°äº†æ‰€éœ€è¦çš„åŠŸèƒ½ã€‚ä¸åŒçš„ç”¨æˆ·æºçš„å®ç°å’Œç®¡ç†å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ–¹å¼å®ç°ï¼Œæˆ‘åœ¨é¡¹
ç›®ä¸­ä½¿ç”¨çš„æ˜¯ Java çš„ SPI æœåŠ¡å‘ç°æœºåˆ¶ï¼›å¦‚æœæœ‰å¿…è¦ï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­å¼•å…¥ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼ˆå¦‚ <a href="https://github.com/google/guice">Guice</a> <a href="https://spring.io/projects/spring-framework">Spring</a> ç­‰ï¼‰ç®¡ç†ç”¨æˆ·æºé€»è¾‘çš„å®ç°ã€‚</p>

        </div>
        
    
</div></div>
            
    <div class="pagination">
        <div class="pagination__buttons">
            </div>
    </div>
<footer class="footer">
                    <div class="footer__inner"><div class="copyright">
            <span>Â© 2019 <a href="https://github.com/ejmg/zerm">zerm</a> :: Powered by <a href="https://www.getzola.org/">Zola</a></span>
            <span>:: Theme made by <a href="https://github.com/ejmg">ejmg</a></span>
        </div>
    <script type="text/javascript" src="https:&#x2F;&#x2F;www.wangbo.im&#x2F;assets&#x2F;js&#x2F;main.js"></script>
</div>
                    

                </footer></div>
    </body>
</html>
