<!DOCTYPE html>
<html lang="en">
    <head>
    <title>Learning Java Concurrency - Thread &amp; Runnable - Elvis Wang</title>
    
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="wangboâ€™s home &amp; blog"/>

    <meta property="og:title" content="
    wangboâ€™s blog -&nbsp;Learning Java Concurrency - Thread &amp; Runnable" />
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;2016-04-11-learning-java-concurrency-thread-runnable&#x2F;"/>
    <meta property="og:description" content="&lt;p&gt;Javaå¹¶å‘å¤šçº¿ç¨‹çš„ç¬¬ä¸€è¯¾ï¼Œåº”è¯¥å°±æ˜¯&lt;code&gt;Thread&lt;&#x2F;code&gt;äº†ã€‚é¡¾åæ€ä¹‰ï¼Œ&lt;code&gt;Thread&lt;&#x2F;code&gt;å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ã€‚çº¿ç¨‹æ˜¯å¾ˆåº•å±‚çš„ä¸€ä¸ªæ¦‚å¿µï¼Œåœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šå®ç°çš„æ¨¡å‹å’Œç»†èŠ‚å¹¶ä¸ç›¸åŒï¼Œç”šè‡³äºå¯ä»¥è¯´å¤©å·®åœ°åˆ«ï¼›ä½†æ˜¯æ€»ä½“æ¥è¯´ï¼Œçº¿ç¨‹æ˜¯æ¯”è¿›ç¨‹æ›´ç»†ç²’åº¦çš„æ“ä½œç³»ç»Ÿè°ƒåº¦çš„å•ä½ï¼Œçº¿ç¨‹æœ‰è‡ªå·±çš„è¿è¡Œæ ˆï¼Œä½†æ˜¯åŒä¸€â€¦"/>
    <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;style.css">
    <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;color&#x2F;blue.css">
<link rel="shortcut icon" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;favicon.ico" type="image/x-icon" /></head>
    <body>
        <div class="container full">
<header class="header">
    <div class="header__inner">
        <div class="header__logo">
            <a href="&#x2F;">
    <div class="logo">
        WB Prime
    </div>
</a>
        </div>
        <div class="menu-trigger">menu</div>
    </div>
    
    <nav class="menu">
        <ul class="menu__inner menu__inner--desktop">
            
            
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">About</a>
                    </li>
                
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">Categories</a>
                    </li>
                
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">Tags</a>
                    </li>
                
            </ul>

        <ul class="menu__inner menu__inner--mobile">
            
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">About</a>
        </li>
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">Categories</a>
        </li>
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">Tags</a>
        </li>
        </ul>
    </nav>

    </header>
<div class="content"><div class="post">
        <h1 class="post-title">
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;2016-04-11-learning-java-concurrency-thread-runnable&#x2F;">Learning Java Concurrency - Thread &amp; Runnable</a>
        </h1>
        
    <div class="post-meta">
        <span class="post-date">2016.04.11
                </span>

        <span class="post-author"></span>

        

    
    :: {<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories&#x2F;learning-java-concurrency&#x2F;">Learning Java Concurrency</a>} 

            
    ::
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;java&#x2F;">java</a>
        
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;concurrency&#x2F;">concurrency</a>
        
    
            
        
    </div>



        

        <div class="post-content">
            <p>Javaå¹¶å‘å¤šçº¿ç¨‹çš„ç¬¬ä¸€è¯¾ï¼Œåº”è¯¥å°±æ˜¯<code>Thread</code>äº†ã€‚é¡¾åæ€ä¹‰ï¼Œ<code>Thread</code>å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ã€‚çº¿ç¨‹æ˜¯å¾ˆåº•å±‚çš„ä¸€ä¸ªæ¦‚å¿µï¼Œåœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šå®ç°çš„æ¨¡å‹å’Œç»†èŠ‚å¹¶ä¸ç›¸åŒï¼Œç”šè‡³äºå¯ä»¥è¯´å¤©å·®åœ°åˆ«ï¼›ä½†æ˜¯æ€»ä½“æ¥è¯´ï¼Œçº¿ç¨‹æ˜¯æ¯”è¿›ç¨‹æ›´ç»†ç²’åº¦çš„æ“ä½œç³»ç»Ÿè°ƒåº¦çš„å•ä½ï¼Œçº¿ç¨‹æœ‰è‡ªå·±çš„è¿è¡Œæ ˆï¼Œä½†æ˜¯åŒä¸€ä¸ªè¿›ç¨‹çš„çº¿ç¨‹å…±äº«æ–¹æ³•åŒºå’Œå †åŒºæ•°æ®ã€‚</p>
<p>å¯¹äºè¿›ç¨‹å’Œçº¿ç¨‹çš„å·®åˆ«ï¼Œæœ‰ä¸€ç§è¯´æ³•æ˜¯ï¼šçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œè€Œè¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…è¿è¡Œèµ„æºçš„åŸºæœ¬å•ä½ã€‚</p>
<p>Javaä¸­å¯¹çº¿ç¨‹ä½œäº†å¾ˆå¥½çš„å°è£…ï¼š<code>Thread</code>ç±»ã€‚<code>Thread</code>ç±»çš„ä½¿ç”¨éå¸¸ç®€å•ã€‚</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#569cd6;">public class </span><span style="color:#dcdcdc;">ThreadCase {
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">private static class </span><span style="color:#dcdcdc;">EchoThread </span><span style="color:#569cd6;">extends </span><span style="color:#4ec9b0;">Thread </span><span style="color:#dcdcdc;">{
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">private final </span><span style="color:#dcdcdc;">String word;
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">public </span><span style="color:#dcdcdc;">EchoThread(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">String word) {
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">this.word = word;
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">@Override
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">public void </span><span style="color:#dcdcdc;">run() {
</span><span style="color:#dcdcdc;">            </span><span style="color:#569cd6;">for </span><span style="color:#dcdcdc;">(</span><span style="color:#569cd6;">int</span><span style="color:#dcdcdc;"> i = </span><span style="color:#b5cea8;">0</span><span style="color:#dcdcdc;">; i &lt; </span><span style="color:#b5cea8;">1000</span><span style="color:#dcdcdc;">; i</span><span style="color:#569cd6;">++</span><span style="color:#dcdcdc;">) {
</span><span style="color:#dcdcdc;">                </span><span style="color:#dcdcdc;">System.out.println(this.getName() + </span><span style="color:#d69d85;">&quot; echos &quot; </span><span style="color:#dcdcdc;">+ word);
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public static void </span><span style="color:#dcdcdc;">main(String </span><span style="color:#569cd6;">[] </span><span style="color:#dcdcdc;">_args) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">Thread echo1 = </span><span style="color:#569cd6;">new </span><span style="color:#dcdcdc;">EchoThread(</span><span style="color:#d69d85;">&quot;First&quot;</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">Thread echo2 = </span><span style="color:#569cd6;">new </span><span style="color:#dcdcdc;">EchoThread(</span><span style="color:#d69d85;">&quot;Second&quot;</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">System.out.println(</span><span style="color:#d69d85;">&quot;Main thread started!&quot;</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">echo1.start();
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">echo2.start();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">joinThread(echo1);
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">joinThread(echo2);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">System.out.println(</span><span style="color:#d69d85;">&quot;Main thread finished!&quot;</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">private static void </span><span style="color:#dcdcdc;">joinThread(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">Thread th) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">try </span><span style="color:#dcdcdc;">{
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">th.join();
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">} </span><span style="color:#569cd6;">catch </span><span style="color:#dcdcdc;">(InterruptedException e) {
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">System.out.println(th.getName() + </span><span style="color:#d69d85;">&quot; interrupted!&quot;</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">}
</span></pre>
<p>å¯ä»¥å¾ˆæ˜æ˜¾åœ°å‘ç°ï¼š</p>
<ul>
<li>mainè´Ÿè´£å¯åŠ¨å…¶ä»–çº¿ç¨‹ï¼Œmainæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªçº¿ç¨‹</li>
<li>çº¿ç¨‹çš„è°ƒåº¦æ˜¯éš¾ä»¥é¢„æ–™çš„ï¼Œ<code>echo1</code>å’Œ<code>echo2</code>çš„è¾“å‡ºç»“æœç›¸äº’äº¤é”™å¯ä»¥çœ‹å‡ºè¿™ä¸€ç‚¹</li>
<li>çº¿ç¨‹ä¹‹é—´å¯ä»¥è¿›è¡ŒåŒæ­¥æ§åˆ¶ï¼Œä½¿ç”¨<code>Thread.join()</code>æ–¹æ³•å¯ä»¥å¼ºåˆ¶ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹ç»“æŸ</li>
<li>è‡ªå®šä¹‰çº¿ç¨‹è¡Œä¸ºåªéœ€è¦é‡æ–°å®ç°<code>Thread.run()</code>æ–¹æ³•å³å¯</li>
<li>çº¿ç¨‹çš„å¯åŠ¨å…¥å£æ˜¯<code>Thread.start()</code>æ–¹æ³•ï¼Œä¸è¦ç›´æ¥è¿è¡Œ<code>Thread.run()</code>æ–¹æ³•</li>
<li><code>Thread</code>ç±»æ˜¯ä¸€ä¸ª<code>class</code>ï¼ˆä¸<code>interface</code>ç›¸å¯¹åº”ï¼‰ï¼Œæ„å‘³ç€è‡ªå®šä¹‰çº¿ç¨‹ç±»ä¸èƒ½ç»§æ‰¿åˆ«çš„çˆ¶ç±»</li>
</ul>
<p><a name="continue-reading"></a></p>
<h1 id="thread"><a class="zola-anchor" href="#thread" aria-label="Anchor link for: thread">ğŸ”—</a>
Thread</h1>
<h2 id="api-lie-biao"><a class="zola-anchor" href="#api-lie-biao" aria-label="Anchor link for: api-lie-biao">ğŸ”—</a>
API åˆ—è¡¨</h2>
<ol>
<li>Thread()</li>
<li>Thread(Runnable target)</li>
<li>Thread(Runnable target, AccessControlContext acc)</li>
<li>Thread(ThreadGroup group, Runnable target)</li>
<li>Thread(String name)</li>
<li>Thread(ThreadGroup group, String name)</li>
<li>Thread(Runnable target, String name)</li>
<li>Thread(ThreadGroup group, Runnable target, String name)</li>
<li>Thread(ThreadGroup group, Runnable target, String name, long stackSize)</li>
<li>void start()</li>
<li>void interrupt()</li>
<li>boolean isInterrupted()</li>
<li>boolean isAlive()</li>
<li>State getState()</li>
<li>void run()</li>
<li>void join(long millis)</li>
<li>void join(long millis, int nanos)</li>
<li>void join() throws InterruptedException</li>
<li>static native void sleep(long millis) throws InterruptedException</li>
<li>static void sleep(long millis, int nanos)</li>
<li>void setDaemon(boolean on)</li>
<li>boolean isDaemon()</li>
<li>static UncaughtExceptionHandler getDefaultUncaughtExceptionHandler()</li>
<li>static void setDefaultUncaughtExceptionHandler(UncaughtExceptionHandler eh)</li>
<li>UncaughtExceptionHandler getUncaughtExceptionHandler()</li>
<li>void setUncaughtExceptionHandler(UncaughtExceptionHandler eh)</li>
<li>static native Thread currentThread()</li>
</ol>
<h2 id="chuang-jian-xian-cheng-lei-dui-xiang"><a class="zola-anchor" href="#chuang-jian-xian-cheng-lei-dui-xiang" aria-label="Anchor link for: chuang-jian-xian-cheng-lei-dui-xiang">ğŸ”—</a>
åˆ›å»ºçº¿ç¨‹ç±»å¯¹è±¡</h2>
<p><code>Thread</code>ç±»ä¸€å…±æœ‰9ä¸ªå…¬å¼€çš„æ„é€ å‡½æ•°ï¼Œå’‹ä¸€çœ‹å¾ˆæ‚ä¹±æ— ç« çš„ï¼Œä½†æ˜¯å…¶å®æ˜¯æœ‰è§„å¾‹çš„ã€‚</p>
<p>è€ƒè™‘ä»¥ä¸‹äº‹å®ï¼š</p>
<ul>
<li>æ¯ä¸ªçº¿ç¨‹åº”è¯¥æœ‰ä¸€ä¸ªåå­—ï¼Œç”¨æ¥æ ‡è¯†è‡ªå·±</li>
<li>æ¯ä¸ªçº¿ç¨‹å¯ä»¥æœ‰è‡ªå·±çš„è¡Œä¸ºï¼Œåº”è¯¥æœ‰ä¸€ä¸ªç”¨äºè‡ªå®šä¹‰è¡Œä¸ºçš„ç±»<code>Runnable</code></li>
<li>çº¿ç¨‹åº”è¯¥å¯ä»¥åˆ†ç»„ï¼Œå±äºæŸä¸ªç‰¹å®šçš„<code>ThreadGroup</code>å®ä¾‹</li>
<li>çº¿ç¨‹åº”è¯¥æœ‰æƒé™æ§åˆ¶ï¼Œç”¨<code>AccessControlContext</code>æ¥è®¾ç½®</li>
<li>æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„æ ˆï¼Œåº”è¯¥å¯ä»¥è‡ªå®šä¹‰æ ˆçš„å¤§å°</li>
</ul>
<p>è¿™äº›çº¿ç¨‹ç›¸å…³çš„å±æ€§ç›¸äº’ç»„åˆï¼Œå¹¶æ·»åŠ ä¸€äº›é»˜è®¤å€¼ï¼Œèƒ½å¤Ÿå¾—åˆ°çš„æ„é€ å‡½æ•°ç»å¯¹ä¸æ­¢9ä¸ªï¼Œå“ˆï¼</p>
<p>å®é™…ä¸Šï¼Œä»¥ä¸Šæ‰€æœ‰çš„æ„é€ å‡½æ•°éƒ½æ˜¯è°ƒç”¨äº†å†…éƒ¨ç§æœ‰çš„<code>init()</code>æ–¹æ³•ã€‚</p>
<p>æ³¨æ„ï¼š<code>Thread</code>ç±»æ˜¯ä¸€ä¸ªæ™®é€šçš„Javaç±»ï¼Œæ‰€ä»¥æ„é€ å™¨åˆ›å»ºçš„å¯¹è±¡å¼•ç”¨æ˜¯åˆ†é…åœ¨å½“å‰çš„çº¿ç¨‹ã€‚è¯¥å®ä¾‹å¯¹åº”çš„çº¿ç¨‹è¿˜æ²¡æœ‰è¢«åˆ›å»ºã€‚</p>
<h2 id="qi-dong-xian-cheng"><a class="zola-anchor" href="#qi-dong-xian-cheng" aria-label="Anchor link for: qi-dong-xian-cheng">ğŸ”—</a>
å¯åŠ¨çº¿ç¨‹</h2>
<p>æ„é€ äº†ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ä¹‹åï¼Œå°±å¯ä»¥å¯åŠ¨è¯¥çº¿ç¨‹å¯¹è±¡ä»£è¡¨çš„çº¿ç¨‹å¼€å§‹æ‰§è¡Œä»»åŠ¡ã€‚</p>
<p><code>run()</code>æ–¹æ³•é‡Œé¢æ˜¯éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚æƒ³è¦åœ¨è¯¥çº¿ç¨‹å¯¹è±¡ä»£è¡¨çš„çº¿ç¨‹ä¸­è¿è¡Œè¯¥ä»»åŠ¡ï¼Œéœ€è¦è°ƒç”¨<code>start()</code>æ–¹æ³•ã€‚</p>
<p>éœ€è¦å†æ¬¡æ¾„æ¸…ä¸€ä¸‹ï¼Œ<code>Thread</code>å¯¹è±¡æ˜¯å­˜åœ¨äºåˆ›å»ºå®ƒçš„çº¿ç¨‹ä¸­ï¼Œè°ƒç”¨<code>start()</code>æ–¹æ³•ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥è¿è¡Œ<code>run()</code>é‡Œé¢çš„ä»£ç ã€‚å¦‚æœç›´æ¥è°ƒç”¨<code>run()</code>æ–¹æ³•ï¼Œåªæ˜¯è®©å½“å‰çº¿ç¨‹å»æ‰§è¡Œè¯¥ä»»åŠ¡ï¼Œè¾¾ä¸åˆ°é¢„æœŸçš„æ•ˆæœã€‚</p>
<p>ç”±äºçº¿ç¨‹çš„è¿è¡Œéœ€è¦æ“ä½œç³»ç»Ÿè¿›è¡Œè°ƒåº¦ï¼Œæ‰€ä»¥æ‰§è¡Œ<code>start()</code>æ–¹æ³•ä¹‹åï¼Œä»€ä¹ˆæ—¶å€™æ‰§è¡Œçº¿ç¨‹æ˜¯ä¸å¯é¢„æœŸçš„ã€‚å¦‚æœå¯¹çº¿ç¨‹è¿è¡Œçš„å…ˆåé¡ºåºæœ‰è¦æ±‚ï¼Œè¯·ä¸»åŠ¨å¯¹çº¿ç¨‹è¿›è¡ŒåŒæ­¥æ§åˆ¶ã€‚</p>
<h2 id="xian-cheng-de-sheng-ming-zhou-qi"><a class="zola-anchor" href="#xian-cheng-de-sheng-ming-zhou-qi" aria-label="Anchor link for: xian-cheng-de-sheng-ming-zhou-qi">ğŸ”—</a>
çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h2>
<p>å½“å‰çº¿ç¨‹åˆ›å»ºäº†<code>Thread</code>å¯¹è±¡ï¼Œå®é™…çš„çº¿ç¨‹è¿˜æ²¡æœ‰è¢«åˆ›å»ºï¼Œçº¿ç¨‹å¯¹è±¡å¤„äº<code>NEW</code>çŠ¶æ€ã€‚</p>
<p>æ ¹æ®<code>Thread</code>çš„apiè¯´æ˜ï¼Œä¸€ä¸ª<code>Thread</code>å¯¹è±¡ä¼šæœ‰6ç§çŠ¶æ€ï¼ŒåŒä¸€æ—¶é—´è¯¥å¯¹è±¡åªå¯èƒ½å¤„äºä¸€ç§çŠ¶æ€ã€‚</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#569cd6;">public enum </span><span style="color:#dcdcdc;">State {
</span><span style="color:#dcdcdc;">    </span><span style="color:#b4cea8;">NEW</span><span style="color:#dcdcdc;">,			</span><span style="color:#608b4e;">// æ–°å»ºçŠ¶æ€
</span><span style="color:#dcdcdc;">    </span><span style="color:#b4cea8;">RUNNABLE</span><span style="color:#dcdcdc;">, 		</span><span style="color:#608b4e;">// è¿è¡ŒçŠ¶æ€
</span><span style="color:#dcdcdc;">    </span><span style="color:#b4cea8;">BLOCKED</span><span style="color:#dcdcdc;">,		</span><span style="color:#608b4e;">// é˜»å¡çŠ¶æ€
</span><span style="color:#dcdcdc;">    </span><span style="color:#b4cea8;">WAITING</span><span style="color:#dcdcdc;">,		</span><span style="color:#608b4e;">// æ— æ¡ä»¶çš„ç­‰å¾…çŠ¶æ€
</span><span style="color:#dcdcdc;">    </span><span style="color:#b4cea8;">TIMED_WAITING</span><span style="color:#dcdcdc;">, 	</span><span style="color:#608b4e;">// æœ‰æ¡ä»¶çš„ç­‰å¾…çŠ¶æ€
</span><span style="color:#dcdcdc;">    </span><span style="color:#b4cea8;">TERMINATED</span><span style="color:#dcdcdc;">; 	</span><span style="color:#608b4e;">// ç»ˆæ­¢çŠ¶æ€
</span><span style="color:#dcdcdc;">}
</span></pre>
<p>æ–°å»ºçŠ¶æ€è¡¨æ˜çº¿ç¨‹å¯¹è±¡è¿˜æœªè¿è¡Œï¼›è¿è¡ŒçŠ¶æ€è¡¨æ˜çº¿ç¨‹å¯¹è±¡æ­£åœ¨è¿è¡Œä¸€ä¸ªçº¿ç¨‹ï¼›é˜»å¡çŠ¶æ€è¡¨æ˜æœ¬çº¿ç¨‹å¯¹è±¡åœ¨ç­‰å¾…ä¸€ä¸ªé”æˆ–åŒæ­¥å™¨ï¼›æ— æ¡ä»¶ç­‰å¾…çŠ¶æ€è¡¨æ˜æœ¬çº¿ç¨‹å¯¹è±¡åœ¨æ— é™æœŸåœ°ç­‰å¾…ä¸€ä¸ªæ¡ä»¶ï¼Œæ¯”å¦‚è°ƒç”¨äº†æ— è¿‡æœŸæ—¶é—´çš„<code>Object.wait()</code>ã€<code>Thread.join()</code>ç­‰æ–¹æ³•ï¼›æœ‰æ¡ä»¶ç­‰å¾…çŠ¶æ€è¡¨æ˜æœ¬çº¿ç¨‹å¯¹è±¡åœ¨æœ‰æ¡ä»¶åœ°ç­‰å¾…ä¸€ä¸ªæ¡ä»¶ï¼Œæ˜¯æ— æ¡ä»¶ç­‰å¾…çŠ¶æ€çš„è¿‡æœŸæ—¶é—´ç‰ˆæœ¬ï¼ˆtimeoutï¼‰ï¼›ç»ˆæ­¢çŠ¶æ€è¡¨æ˜æœ¬çº¿ç¨‹å¯¹è±¡ä»£è¡¨çš„çº¿ç¨‹å·²ç»ç»“æŸè¿è¡Œã€‚</p>
<h2 id="zi-ding-yi-xian-cheng-xing-wei"><a class="zola-anchor" href="#zi-ding-yi-xian-cheng-xing-wei" aria-label="Anchor link for: zi-ding-yi-xian-cheng-xing-wei">ğŸ”—</a>
è‡ªå®šä¹‰çº¿ç¨‹è¡Œä¸º</h2>
<p>å‰é¢å·²ç»è¯´åˆ°ï¼Œçº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡åœ¨<code>run()</code>æ–¹æ³•é‡Œé¢ã€‚æ‰€ä»¥ï¼Œè‡ªå®šä¹‰çº¿ç¨‹å°±éœ€è¦è‡ªå®šä¹‰è¯¥æ–¹æ³•ã€‚</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#569cd6;">public</span><span style="color:#dcdcdc;"> void run() {
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">if </span><span style="color:#dcdcdc;">(target != </span><span style="color:#569cd6;">null</span><span style="color:#dcdcdc;">) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">target.run();
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">}
</span></pre>
<p><code>run()</code>æ–¹æ³•çš„é»˜è®¤å®ç°æ˜¯å»æ‰§è¡Œæ„é€ å™¨é‡Œé¢æä¾›çš„<code>Runnable</code>å¯¹è±¡çš„<code>run()</code>æ–¹æ³•ã€‚</p>
<p>æ‰€ä»¥ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è‡ªå®šä¹‰çº¿ç¨‹ã€‚</p>
<ul>
<li>ç»§æ‰¿<code>Thread</code>ç±»ï¼Œè¦†ç›–<code>run()</code>æ–¹æ³•</li>
<li>åˆ›å»ºä¸€ä¸ª<code>Runnable</code>å¯¹è±¡å¹¶ç”¨ä¹‹æ„é€ ä¸€ä¸ª<code>Thread</code>å¯¹è±¡</li>
</ul>
<p>è¿™ä¸¤ç§æ–¹å¼æ²¡æœ‰æœ¬è´¨ä¸Šçš„åŒºåˆ«ï¼Œé€‰æ‹©å“ªä¸€ç§éœ€è¦çœ‹å…·ä½“çš„åœºåˆã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œ<code>Thread</code>ç±»å®ç°äº†<code>Runnable</code>æ¥å£ã€‚</p>
<h2 id="xian-cheng-deng-dai"><a class="zola-anchor" href="#xian-cheng-deng-dai" aria-label="Anchor link for: xian-cheng-deng-dai">ğŸ”—</a>
çº¿ç¨‹ç­‰å¾…</h2>
<p>çº¿ç¨‹çš„æ“ä½œç³»ç»Ÿè°ƒåº¦æ˜¯ä¸å¯é¢„æœŸçš„ï¼Œæ‰€ä»¥åœ¨éœ€è¦æ˜¾å¼åœ°æ§åˆ¶çº¿ç¨‹è¿è¡Œçš„åœºåˆï¼Œéœ€è¦ä½¿ç”¨é¢å¤–çš„æ–¹æ³•æ¥è¾¾åˆ°ç›®çš„ã€‚</p>
<p>æ¯”è¾ƒé«˜çº§çš„å·¥å…·æœ‰<code>ReentrantLock</code>ã€<code>CountDownLatch</code>å’Œ<code>Semaphore</code>ç­‰ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯è°ƒç”¨<code>Thread.join()</code>æ–¹æ³•ã€‚</p>
<p>å‡å¦‚æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡Aï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„çº¿ç¨‹å¯¹è±¡Bï¼Œç„¶åè°ƒç”¨<code>B.start()</code>å¯åŠ¨Bçº¿ç¨‹ã€‚è¿™æ—¶å€™Açº¿ç¨‹å¯ä»¥ç´§æ¥ç€è°ƒç”¨<code>B.join()</code>è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ŒçŸ¥é“Bçº¿ç¨‹æ‰§è¡Œå®Œæ¯•æ‰å¼€å§‹æ‰§è¡ŒAçº¿ç¨‹ã€‚</p>
<p><code>join()</code>æ–¹æ³•æœ‰å¤šä¸ªå˜ä½“ï¼ŒåŒºåˆ«åœ¨äºæ˜¯å¦æä¾›è¶…æ—¶æ—¶é—´ã€‚å¦‚æœå¯¹çº¿ç¨‹å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸè¿˜æœ‰æ˜ åƒçš„è¯ï¼Œæä¾›äº†è¶…æ—¶æ—¶é—´çš„<code>join()</code>æ–¹æ³•ä¼šå¯¼è‡´å½“å‰çº¿ç¨‹è¿›å…¥æœ‰æ¡ä»¶ç­‰å¾…çŠ¶æ€ï¼Œåä¹‹è¿›å…¥æ— æ¡ä»¶ç­‰å¾…çŠ¶æ€ã€‚</p>
<h2 id="hou-tai-xian-cheng"><a class="zola-anchor" href="#hou-tai-xian-cheng" aria-label="Anchor link for: hou-tai-xian-cheng">ğŸ”—</a>
åå°çº¿ç¨‹</h2>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼ŒJVMä¼šç­‰å¾…æ‰€æœ‰çš„çº¿ç¨‹éƒ½è¿è¡Œç»“æŸä¹‹åæ‰ä¼šé€€å‡ºã€‚é€šè¿‡è®¾ç½®çº¿ç¨‹ä¸ºåå°çº¿ç¨‹å¯ä»¥ä½¿å¾—JVMä¸ç”¨ç­‰å¾…ã€‚</p>
<p>å½“æ‰€æœ‰è¿è¡Œçš„çº¿ç¨‹éƒ½æ˜¯åå°çº¿ç¨‹æ—¶ï¼ŒJVMä¼šç»“æŸè¿è¡Œã€‚</p>
<p><code>setDaemon()</code>æ–¹æ³•ç”¨æ¥è®¾ç½®çº¿ç¨‹ä¸ºåå°çº¿ç¨‹ï¼Œ<code>isDaemon()</code>æ–¹æ³•å¯ä»¥ç”¨æ¥æ£€æµ‹æ˜¯å¦ä¸ºåå°çº¿ç¨‹ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>setDaemon()</code>æ–¹æ³•éœ€è¦åœ¨<code>start()</code>æ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰è°ƒç”¨æ‰èƒ½ç”Ÿæ•ˆã€‚</p>
<h2 id="yi-chang-chu-li"><a class="zola-anchor" href="#yi-chang-chu-li" aria-label="Anchor link for: yi-chang-chu-li">ğŸ”—</a>
å¼‚å¸¸å¤„ç†</h2>
<p>çº¿ç¨‹æ‰§è¡Œ<code>run()</code>æ–¹æ³•çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰å¯èƒ½ä¼šé‡åˆ°æœªæ•è·çš„å¼‚å¸¸ã€‚Javaè§„èŒƒè§„å®šï¼ŒJVMåœ¨æ‰§è¡Œçº¿ç¨‹è¿‡ç¨‹ä¸­é‡åˆ°äº†æœªæ•è·çš„å¼‚å¸¸ï¼Œä¼šä¸»åŠ¨å»å¯»æ‰¾è¯¥çº¿ç¨‹å¯¹è±¡çš„æœªæ•è·å¼‚å¸¸å¤„ç†å™¨ï¼Œå¦‚æœæ²¡æ‰¾åˆ°å°±å»è¯¥çº¿ç¨‹å¯¹è±¡çš„<code>ThreadGroup</code>å¯¹è±¡é‡Œæ‰¾ï¼Œå¦‚æœè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°å°±å»æ‰¾<code>Thread</code>ç±»çš„é™æ€çš„æœªæ•è·å¼‚å¸¸å¤„ç†å™¨ã€‚</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#569cd6;">public interface </span><span style="color:#dcdcdc;">UncaughtExceptionHandler {
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">void </span><span style="color:#dcdcdc;">uncaughtException(Thread t, Throwable e);
</span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#569cd6;">private volatile </span><span style="color:#dcdcdc;">UncaughtExceptionHandler uncaughtExceptionHandler;
</span><span style="color:#dcdcdc;">
</span><span style="color:#569cd6;">private static volatile </span><span style="color:#dcdcdc;">UncaughtExceptionHandler defaultUncaughtExceptionHandler;
</span><span style="color:#dcdcdc;">
</span><span style="color:#569cd6;">public static</span><span style="color:#dcdcdc;"> void setDefaultUncaughtExceptionHandler(UncaughtExceptionHandler eh) ;
</span><span style="color:#dcdcdc;">
</span><span style="color:#569cd6;">public static </span><span style="color:#dcdcdc;">UncaughtExceptionHandler getDefaultUncaughtExceptionHandler()
</span><span style="color:#dcdcdc;">
</span><span style="color:#569cd6;">public </span><span style="color:#dcdcdc;">UncaughtExceptionHandler getUncaughtExceptionHandler();
</span></pre>
<p>å¯ä»¥é€šè¿‡ä¸Šé¢çš„æ–¹æ³•è‡ªå®šä¹‰æœªæ•è·å¼‚å¸¸çš„å¤„ç†è¡Œä¸ºã€‚</p>
<h1 id="threadgroup"><a class="zola-anchor" href="#threadgroup" aria-label="Anchor link for: threadgroup">ğŸ”—</a>
ThreadGroup</h1>
<p>é¡¾åæ€ä¹‰ï¼Œ<code>ThreadGroup</code>ç±»è¡¨å¾äº†ä¸€ä¸ªçº¿ç¨‹ç»„ã€‚</p>
<p>å¯ä»¥åœ¨åˆ›å»ºçº¿ç¨‹å¯¹è±¡çš„æ—¶å€™æŒ‡å®šæ‰€å±çš„çº¿ç¨‹ç»„ã€‚å¯ä»¥é€šè¿‡çº¿ç¨‹ç»„å¯¹è±¡æ§åˆ¶ç»„å†…çš„çº¿ç¨‹ã€‚</p>
<p><code>ThreadGroup</code>ç±»æ¯”è¾ƒæœ‰ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li>void setDaemon(boolean daemon)</li>
<li>boolean isDaemon()</li>
<li>void setMaxPriority(int pri)</li>
<li>int getMaxPriority()</li>
<li>void interrupt()</li>
<li>void uncaughtException(Thread t, Throwable e)</li>
</ul>
<p>å„ä¸ªæ–¹æ³•çš„å«ä¹‰ä¸è¨€è‡ªæ˜ï¼Œæ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯<code>uncaughtException(Thread, Throwable)</code>æ–¹æ³•ã€‚å¦‚æœè¿˜è®°å¾—çº¿ç¨‹å¯¹è±¡çš„å¼‚å¸¸å¤„ç†æµç¨‹çš„è¯ï¼Œå°±èƒ½æ˜ç™½ä¸ºä»€ä¹ˆçº¿ç¨‹å¯¹è±¡æœ¬èº«æ²¡æœ‰è®¾ç½®æœªæ•è·å¼‚å¸¸å¤„ç†å™¨æ—¶ï¼Œä¼šåˆ°æ‰€å±çš„çº¿ç¨‹ç»„å¯¹è±¡é‡Œæ‰¾ã€‚</p>
<p>å› ä¸º<code>ThreadGroup</code>ç±»å®ç°äº†<code>Thread.UncaughtExceptionHandler</code>æ¥å£ã€‚<code>ThreadGroup</code>ç±»çš„<code>uncaughtException(Thread, Throwable)</code>æ–¹æ³•å®ç°ä¸­ï¼Œé¦–å…ˆå§”æ‰˜çˆ¶çº¿ç¨‹ç»„å¯¹è±¡å¤„ç†æœªæ•è·å¼‚å¸¸ï¼Œå¦‚æœæ²¡æœ‰çˆ¶çº¿ç¨‹ç»„ï¼Œåˆ™è·³åˆ°<code>Thread</code>ç±»çš„é™æ€çš„é»˜è®¤æœªæ•è·å¼‚å¸¸å¤„ç†å™¨è¿›è¡Œå¤„ç†ã€‚</p>
<h1 id="runnable"><a class="zola-anchor" href="#runnable" aria-label="Anchor link for: runnable">ğŸ”—</a>
Runnable</h1>
<p><code>Runnable</code>æ¥å£å¾ˆç®€å•ã€‚</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#569cd6;">public interface </span><span style="color:#dcdcdc;">Runnable {
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public abstract void </span><span style="color:#dcdcdc;">run();
</span><span style="color:#dcdcdc;">}
</span></pre>
<p>å®é™…ä½¿ç”¨ä¸­ä½¿ç”¨<code>Runnable</code>çš„æ–¹å¼ç»å¸¸æ˜¯ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ã€‚</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#569cd6;">public final class </span><span style="color:#dcdcdc;">RunnableCase {
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public static void </span><span style="color:#dcdcdc;">main(String </span><span style="color:#569cd6;">[] </span><span style="color:#dcdcdc;">_args) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">Thread echo1 =  </span><span style="color:#569cd6;">new </span><span style="color:#dcdcdc;">Thread(
</span><span style="color:#dcdcdc;">            </span><span style="color:#569cd6;">new </span><span style="color:#dcdcdc;">Runnable() {
</span><span style="color:#dcdcdc;">                </span><span style="color:#569cd6;">public void </span><span style="color:#dcdcdc;">run() {
</span><span style="color:#dcdcdc;">                    </span><span style="color:#569cd6;">for </span><span style="color:#dcdcdc;">(</span><span style="color:#569cd6;">int</span><span style="color:#dcdcdc;"> i = </span><span style="color:#b5cea8;">0</span><span style="color:#dcdcdc;">; i &lt; </span><span style="color:#b5cea8;">1000</span><span style="color:#dcdcdc;">; i</span><span style="color:#569cd6;">++</span><span style="color:#dcdcdc;">) {
</span><span style="color:#dcdcdc;">                        </span><span style="color:#dcdcdc;">System.out.println(Thread.currentThread().getName() + </span><span style="color:#d69d85;">&quot; echos first&quot;</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">                    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">                </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">Thread echo2 =  </span><span style="color:#569cd6;">new </span><span style="color:#dcdcdc;">Thread(
</span><span style="color:#dcdcdc;">            </span><span style="color:#569cd6;">new </span><span style="color:#dcdcdc;">Runnable() {
</span><span style="color:#dcdcdc;">                </span><span style="color:#569cd6;">public void </span><span style="color:#dcdcdc;">run() {
</span><span style="color:#dcdcdc;">                    </span><span style="color:#569cd6;">for </span><span style="color:#dcdcdc;">(</span><span style="color:#569cd6;">int</span><span style="color:#dcdcdc;"> i = </span><span style="color:#b5cea8;">0</span><span style="color:#dcdcdc;">; i &lt; </span><span style="color:#b5cea8;">1000</span><span style="color:#dcdcdc;">; i</span><span style="color:#569cd6;">++</span><span style="color:#dcdcdc;">) {
</span><span style="color:#dcdcdc;">                        </span><span style="color:#dcdcdc;">System.out.println(Thread.currentThread().getName() + </span><span style="color:#d69d85;">&quot; echos second&quot;</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">                    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">                </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">System.out.println(</span><span style="color:#d69d85;">&quot;Main thread started!&quot;</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">echo1.start();
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">echo2.start();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">joinThread(echo1);
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">joinThread(echo2);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">System.out.println(</span><span style="color:#d69d85;">&quot;Main thread finished!&quot;</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">private static void </span><span style="color:#dcdcdc;">joinThread(</span><span style="color:#569cd6;">final </span><span style="color:#dcdcdc;">Thread th) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">try </span><span style="color:#dcdcdc;">{
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">th.join();
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">} </span><span style="color:#569cd6;">catch </span><span style="color:#dcdcdc;">(InterruptedException e) {
</span><span style="color:#dcdcdc;">            </span><span style="color:#dcdcdc;">System.out.println(th.getName() + </span><span style="color:#d69d85;">&quot; interrupted!&quot;</span><span style="color:#dcdcdc;">);
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">}
</span></pre><h1 id="dai-ma-xia-zai"><a class="zola-anchor" href="#dai-ma-xia-zai" aria-label="Anchor link for: dai-ma-xia-zai">ğŸ”—</a>
ä»£ç ä¸‹è½½</h1>
<p><a href="https://www.wangbo.im/posts/2016-04-11-learning-java-concurrency-thread-runnable/RunnableCase.java">RunnableCase.java</a>
<a href="https://www.wangbo.im/posts/2016-04-11-learning-java-concurrency-thread-runnable/ThreadCase.java">ThreadCase.java</a></p>

        </div>
        
    
</div></div>
            
    <div class="pagination">
        <div class="pagination__buttons">
            </div>
    </div>
<footer class="footer">
                    <div class="footer__inner"><div class="copyright copyright--user"><span>Â© 2019 <a href="https://www.wangbo.im">wangbo&apos; blog</a> :: <a href="https://github.wangbo.im">Github</a> :: Powered by <a href="https://www.getzola.org/">Zola</a></span></div>
    <script type="text/javascript" src="https:&#x2F;&#x2F;www.wangbo.im&#x2F;assets&#x2F;js&#x2F;main.js"></script>
</div>
                    

                </footer></div>
    </body>
</html>
