<!DOCTYPE html>
<html lang="en">
    <head>
    <title>Value Class Generated by Google AutoValue - Elvis Wang</title>
    
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="wangbo’s home &amp; blog"/>

    <meta property="og:title" content="
    wangbo’s blog -&nbsp;Value Class Generated by Google AutoValue" />
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;2019-09-28-google-autovalue-usecases&#x2F;"/>
    <meta property="og:description" content="Google AutoValue 利用 Java 的注解处理器扩展技术来自动生成代码，极大地提高了 POJO 类需求的使用体验。"/>
    <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;style.css">
    <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;color&#x2F;blue.css">
<link rel="shortcut icon" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;favicon.ico" type="image/x-icon" /></head>
    <body>
        <div class="container full">
<header class="header">
    <div class="header__inner">
        <div class="header__logo">
            <a href="&#x2F;">
    <div class="logo">
        WB Prime
    </div>
</a>
        </div>
        <div class="menu-trigger">menu</div>
    </div>
    
    <nav class="menu">
        <ul class="menu__inner menu__inner--desktop">
            
            
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">About</a>
                    </li>
                
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">Categories</a>
                    </li>
                
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">Tags</a>
                    </li>
                
            </ul>

        <ul class="menu__inner menu__inner--mobile">
            
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">About</a>
        </li>
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">Categories</a>
        </li>
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">Tags</a>
        </li>
        </ul>
    </nav>

    </header>
<div class="content"><div class="post">
        <h1 class="post-title">
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;2019-09-28-google-autovalue-usecases&#x2F;">Value Class Generated by Google AutoValue</a>
        </h1>
        
    <div class="post-meta">
        <span class="post-date">2019.09.28
                </span>

        <span class="post-author"></span>

        

    
    :: {<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories&#x2F;java&#x2F;">Java</a>} 

            
    ::
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;java&#x2F;">java</a>
        
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;apt&#x2F;">apt</a>
        
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;google&#x2F;">google</a>
        
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;auto-value&#x2F;">auto-value</a>
        
    
            
        
    </div>



        

        <div class="post-content">
            <p>Java 中组织数据对象的方式中，最简单也是最通用的是所谓的 POJO (Plain Ordinary Java Object) 即
Java 简单对象。POJO 大法好，好就好在简单实用：只需用遵循简单的命名约定和构造规则，就可以满足数据实体
的需求，而且大多数的序列化方案和持久化方案都能提供 POJO 的支持；如果追求代码精简的话，使用 POJO 可以
和反射方案一起极大地简化重复代码。</p>
<p>POJO 的好处吾等皆非常清楚，然而本文却在讲 <a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a>，因为：</p>
<ol>
<li>人是善变的。吾等吃够了鸡蛋牛奶，也会想要尝尝豆浆油条。</li>
<li><code>equals</code> <code>toString</code> <code>hash</code> 。此三种样板代码，即使是有 IDE 的协助，维护起来仍会非常痛苦。</li>
<li><a href="http://www.dalnefre.com/wp/2011/11/high-availability-for-mutable-shared-state/comment-page-1/">Mutable shared state is the root of all evil in concurrent
systems</a>
。可变性在并发系统中的共享是所有 BUG 的源头，不可变性是救赎之道；而 POJO 不能满足不可变性约束。</li>
<li>Google 大法好。<a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a> 是 Google Java 团队的作品。</li>
</ol>
<p><a href="https://www.wangbo.im/posts/2019-09-28-google-autovalue-usecases/autovalue">AutoValue</a> 是一个基于 Java <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/apt/" title="Annotation Processing Tool (apt)">注解处理器 APT
(Annotation Processing Tool)</a> 的代码生成库，网络上关于 <a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a> 的介绍不要太少，毋庸再讲；其理念和实际用法可见
<a href="https://github.com/google/auto/blob/master/value/userguide/index.md">官网文档</a>，十分钟入门，老少咸
宜。</p>
<p>本文对于 <a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a> 的用法做一个简单汇总，并引申介绍一下基于 <a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a> 的对
象 JSON 序列化方案。</p>
<h1 id="autovalue-usecases"><a class="zola-anchor" href="#autovalue-usecases" aria-label="Anchor link for: autovalue-usecases">🔗</a>
AutoValue Usecases</h1>
<h2 id="maven-settings"><a class="zola-anchor" href="#maven-settings" aria-label="Anchor link for: maven-settings">🔗</a>
Maven Settings</h2>
<pre style="background-color:#1e1e1e;">
<span style="color:#808080;">&lt;</span><span style="color:#569cd6;">dependency</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">com.google.auto.value</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">groupId</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">auto-value</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">artifactId</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">version</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">${auto-value.version}</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">version</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">scope</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">provided</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">scope</span><span style="color:#808080;">&gt;
</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">dependency</span><span style="color:#808080;">&gt;
</span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">dependency</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">com.google.auto.value</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">groupId</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">auto-value-annotations</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">artifactId</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">version</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">${auto-value.version}</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">version</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">scope</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">provided</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">scope</span><span style="color:#808080;">&gt;
</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">dependency</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">
</span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">dependency</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">com.squareup.auto.value</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">groupId</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">auto-value-redacted</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">artifactId</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">version</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">${squareup_autovalue_redacted_version}</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">version</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">scope</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">provided</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">scope</span><span style="color:#808080;">&gt;
</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">dependency</span><span style="color:#808080;">&gt;
</span></pre>
<p><code>auto-value-annotations</code> 包含定义数据实体类时需要的注解，<code>auto-value</code>
包含注解处理器实现。如果需要在 <code>toString</code> 的实现中对某些字段作特殊处理（比如
密码字段需要隐藏），可以额外使用 <a href="https://github.com/square/auto-value-redacted">AutoValue: Redacted
Extension</a>。</p>
<p>截至 2019-09-28 日，<a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a> 的最新版本是 <code>1.6.6</code>，<a href="https://github.com/square/auto-value-redacted">AutoValue:
Redacted Extension</a> 的最新版本是
<code>1.1.1</code>。</p>
<h2 id="abstract-class"><a class="zola-anchor" href="#abstract-class" aria-label="Anchor link for: abstract-class">🔗</a>
Abstract Class</h2>
<p>一个基本的数据类如下：</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">@AutoValue
</span><span style="color:#569cd6;">public abstract class </span><span style="color:#dcdcdc;">Task {
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public abstract </span><span style="color:#dcdcdc;">Long id();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public abstract </span><span style="color:#dcdcdc;">String type();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public abstract </span><span style="color:#dcdcdc;">String description();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public static </span><span style="color:#dcdcdc;">Task create(Long id, String type, String description) {
</span><span style="color:#dcdcdc;">        </span><span style="color:#569cd6;">return new </span><span style="color:#dcdcdc;">AutoValue_Task(id, type, description);
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">}
</span></pre>
<p>上述是所需要的全部代码。</p>
<p>定义一个数据实体类，只需以抽象方法的方式定义所需字段即可，<a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a> 会通过 <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/apt/" title="Annotation Processing Tool (apt)">APT</a> 生成一个名为 <code>AutoValue_Task</code> 的实现类。类名 <code>AutoValue_Task</code> 是根据数据实体类名 <code>Task</code> 按照固定规则推导得到的。</p>
<h2 id="builder"><a class="zola-anchor" href="#builder" aria-label="Anchor link for: builder">🔗</a>
Builder</h2>
<p>如果字段项很多的话，可以使用
<a href="https://github.com/google/auto/blob/master/value/userguide/builders.md">Builder</a> 模式。</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">@AutoValue
</span><span style="color:#dcdcdc;">abstract class StudentDto {
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">public abstract String getName();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">public abstract Level getLevel();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">public abstract OffsetDateTime getBirthday();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">public abstract String getAddr();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">public abstract List</span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">String</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;"> getEmails();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">public abstract Map</span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">String</span><span style="color:#ff3333;">,</span><span style="color:#808080;"> Integer&gt;</span><span style="color:#dcdcdc;"> getScores();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">public abstract Integer getAdditionalInt();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">public abstract List</span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">String</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;"> getAdditionalList();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">public abstract Map</span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">String</span><span style="color:#ff3333;">,</span><span style="color:#808080;"> Integer&gt;</span><span style="color:#dcdcdc;"> getAdditionalMap();
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">public static Builder builder() {
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">return new AutoValue_StudentDto.Builder();
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">@AutoValue.Builder
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">abstract static class Builder {
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">public abstract Builder setName(String name);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">public abstract Builder setLevel(Level level);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">public abstract Builder setBirthday(OffsetDateTime birthday);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">public abstract Builder setAddr(String addr);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">public abstract Builder setEmails(List</span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">String</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;"> emails);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">public abstract Builder setScores(Map</span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">String</span><span style="color:#ff3333;">,</span><span style="color:#808080;"> Integer&gt;</span><span style="color:#dcdcdc;"> scores);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">public abstract Builder setAdditionalInt(Integer additionalInt);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">public abstract Builder setAdditionalList(List</span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">String</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;"> additionalList);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">public abstract Builder setAdditionalMap(Map</span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">String</span><span style="color:#ff3333;">,</span><span style="color:#808080;"> Integer&gt;</span><span style="color:#dcdcdc;"> additionalMap);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">public abstract StudentDto build();
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">}
</span></pre>
<p><a href="https://github.com/google/auto/blob/master/value/userguide/builders.md">Builder 模式</a> 通过在数据类
中定义一个抽象的 Builder 类实现，Builder 类的实现由 <a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a> 自动生成。</p>
<p><a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a> 对 Java 的集合类型有很好的支持，配合 <a href="https://github.com/google/guava/wiki/ImmutableCollectionsExplained">Guava 不可变集合</a> 一起食用味道更加。</p>
<h2 id="json-support-json-b"><a class="zola-anchor" href="#json-support-json-b" aria-label="Anchor link for: json-support-json-b">🔗</a>
Json Support - JSON-B</h2>
<p><a href="http://json-b.net/">JSON-B</a> 是 Java EE (现 Jakarta) 标准的对象与 JSON 之间的序列化/反序列化的标准 API；参考实现是 <a href="https://eclipse-ee4j.github.io/yasson">Yasson</a>，不过我一直使用 <a href="http://johnzon.apache.org/">Apache Johnzon</a> 的实现。</p>
<ul>
<li>对于 <a href="http://johnzon.apache.org/">Apache Johnzon</a> 的实现来说，<a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a> 生成的对象可以直接通过 JSON-B 实现序列化，不需要作其他修改；反序列化则不支持。</li>
<li>对于 <a href="https://eclipse-ee4j.github.io/yasson">Yasson</a> 的实现来说，<a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a> 生成的对象无法直接通过 JSON-B 实现序列化；反序列化则可以通过在 Builder 中手动添加 <code>JsonbCreator</code> 的静态构造方法的方式，通过 JSON-B 先构造 Builder 实例再调用 <code>build()</code> 方法的方式间接实现。</li>
</ul>
<p>结论：可以直接手写序列化的代码而不是依赖 JSON-B 来实现序列化和反序列化；或者，可以定义一个专门用来序
列化的 POJO 类做一个中间层，AutoValue 的实体类和 POJO 实体类之间的转化可以通过
<a href="https://mapstruct.org/"></a> 之类的框架实现。</p>
<h2 id="json-support-moshi"><a class="zola-anchor" href="#json-support-moshi" aria-label="Anchor link for: json-support-moshi">🔗</a>
Json Support - Moshi</h2>
<p>使用 <a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a> 的数据实体类如果有很强的 JSON 的序列化/反序列化需求的话，可以使用基于 <a href="https://github.com/square/moshi">Moshi: a
modern JSON library for Android and Java</a> 的 AutoValue 扩展
<a href="https://github.com/rharter/auto-value-moshi">AutoValue: Moshi Extension</a> 来实现。</p>
<h2 id="json-support-gson"><a class="zola-anchor" href="#json-support-gson" aria-label="Anchor link for: json-support-gson">🔗</a>
Json Support - Gson</h2>
<p>或者，也可以使用基于 <a href="https://github.com/google/gson">Gson</a> 的 AutoValue 扩展 <a href="https://github.com/rharter/auto-value-gson">AutoValue: Gson Extension</a> 来实现。</p>
<h1 id="lei-si-xiang-mu"><a class="zola-anchor" href="#lei-si-xiang-mu" aria-label="Anchor link for: lei-si-xiang-mu">🔗</a>
类似项目</h1>
<h2 id="freebuilder"><a class="zola-anchor" href="#freebuilder" aria-label="Anchor link for: freebuilder">🔗</a>
FreeBuilder</h2>
<p><a href="https://freebuilder.inferred.org/">FreeBuilder</a> 是另一个基于注解处理器 <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/apt/" title="Annotation Processing Tool (apt)">APT</a> 的实体类框架，主要是实现
了 Builder 模式。</p>
<p>其与 <a href="https://github.com/google/auto/tree/master/value" title="AutoValue - Immutable value-type code generation for Java 1.6+.">AutoValue</a> 的区别在于，AutoValue 由用户定义接口委托给注解处理器去实现，而
FreeBuilder 则是预定义了一整套的基于属性(Property)的 Builder 接口，用户使用时需要去继承之。也就是说
，前者可以选择暴露出的 Builder API，后者则提供了丰富的（如果不是极简主义者的话）的 Builder API。</p>
<p>如果想要对比的话，可以参考 <a href="https://github.com/inferred/FreeBuilder#alternatives">FreeBuilder
Alternatives</a> 。</p>
<h2 id="immutables"><a class="zola-anchor" href="#immutables" aria-label="Anchor link for: immutables">🔗</a>
Immutables</h2>
<p><a href="https://immutables.github.io/">Immutables</a> 是另一个拥有 Immutable &amp; Builder 标签的类库。</p>
<p>如果想要对比的话，可以参考 <a href="https://github.com/inferred/FreeBuilder#alternatives">FreeBuilder
Alternatives</a> 。</p>
<h2 id="lombok"><a class="zola-anchor" href="#lombok" aria-label="Anchor link for: lombok">🔗</a>
Lombok</h2>
<p><a href="https://projectlombok.org/">Lombok</a> 是一个极富争议的代码生成库，争议点在于其为了提高生产力（想想那
么多的样板重复代码 Getter Setter 之类的）而改变了 Java 的语法。</p>
<p>其他的类库基于注解处理器的标准 API 进行代码生成，不会改变已有的类（通常是生成一个抽象类或接口的实现
或生成一个标准的样本类）；而 Lombok 则会在 <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/apt/" title="Annotation Processing Tool (apt)">APT</a> 标准 API 之外依赖 Orcle JDK 的一些特定 API 侵入代码，
修改源代码的结构。</p>
<p>这样的一个好处是，能有效地解决 Java 开发的一些痛点；坏处则是自己定义了一门新的语言。</p>
<h2 id="autofactory"><a class="zola-anchor" href="#autofactory" aria-label="Anchor link for: autofactory">🔗</a>
AutoFactory</h2>
<p><a href="https://github.com/google/auto/tree/master/factory" title="AutoFactory - JSR-330-compatible factories">AutoFactory</a> 是另一个 Google 的代码生成类库，用来生成工厂类的。</p>
<hr />
<p>具体的代码可以参见 <a href="https://github.com/wbprime/java-mods/tree/master/autovalue-usecases">AutoValue Usecases</a> 。</p>
<hr />
<p>以上。</p>

        </div>
        
    
</div></div>
            
    <div class="pagination">
        <div class="pagination__buttons">
            </div>
    </div>
<footer class="footer">
                    <div class="footer__inner"><div class="copyright copyright--user"><span>© 2019 <a href="https://www.wangbo.im">wangbo&apos; blog</a> :: <a href="https://github.wangbo.im">Github</a> :: Powered by <a href="https://www.getzola.org/">Zola</a></span></div>
    <script type="text/javascript" src="https:&#x2F;&#x2F;www.wangbo.im&#x2F;assets&#x2F;js&#x2F;main.js"></script>
</div>
                    

                </footer></div>
    </body>
</html>
