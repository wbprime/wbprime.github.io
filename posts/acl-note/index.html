<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>Blog by WangBo - Access Control List</title>

      

      
          <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
          
      

      
          <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;site.css">
          
      

      
      
    </head>

    <body>
        <div class="container">

            <div id="mobile-navbar" class="mobile-navbar">
              <div class="mobile-header-logo">
                <a href="/" class="logo">WB Prime</a>
              </div>
              <div class="mobile-navbar-icon icon-out">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>

            <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
              <ul class="mobile-menu-list">
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">
                            Categories
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">
                            Tags
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;github.wangbo.im">
                            Github
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">
                            About
                        </a>
                    </li>
                
              </ul>
            </nav>

            <header id="header">
                <div class="logo"><a href="https:&#x2F;&#x2F;www.wangbo.im">WB Prime</a></div>
                <nav class="menu">
                    <ul>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">
                                    Categories
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">
                                    Tags
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;github.wangbo.im">
                                    Github
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">
                                    About
                                </a>
                            </li>
                        
                    </ul>
                </nav>
            </header>

            <main>
                <div class="content" id="mobile-panel">
                    



<article class="post">
    
    <header class="post__header">
        <h1 class="post__title">
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;acl-note&#x2F;">Access Control List</a>
        </h1>
        <div class="post__meta">
            <span class="post__time">2018-02-05</span>
            
        </div>
    </header>

    <div class="post-content">
      <h1 id="linux-acl-access-control-list"><a class="zola-anchor" href="#linux-acl-access-control-list" aria-label="Anchor link for: linux-acl-access-control-list">ðŸ”—</a>Linux ACL - Access Control List</h1>
<h2 id="commands"><a class="zola-anchor" href="#commands" aria-label="Anchor link for: commands">ðŸ”—</a>Commands</h2>
<ul>
<li><code>setfacl</code></li>
<li><code>getfacl</code></li>
</ul>
<h2 id="acl"><a class="zola-anchor" href="#acl" aria-label="Anchor link for: acl">ðŸ”—</a>ACL</h2>
<h3 id="permission"><a class="zola-anchor" href="#permission" aria-label="Anchor link for: permission">ðŸ”—</a>Permission</h3>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">- Comma separated entry.
</span><span style="color:#fdf4c1aa;">- Each entry consists of type, value and permissions, separated by colon.
</span><span style="color:#fdf4c1aa;">    - type is one of `u` (user), `g` (group), `o` (other), `m` (mask)
</span><span style="color:#fdf4c1aa;">    - value is the user name or uid for `u`, group name or gid for `g`, nothing for `o`
</span><span style="color:#fdf4c1aa;">    - permissions is the combination of `r` (read), `w` (write) and `e` (execute)
</span><span style="color:#fdf4c1aa;">    - if value is empty, then means all users/groups
</span><span style="color:#fdf4c1aa;">    - if no read permission is to granted, the replace `r` with `-` for read char
</span><span style="color:#fdf4c1aa;">    - if no write permission is to granted, the replace `w` with `-` for read char
</span><span style="color:#fdf4c1aa;">    - if no execute permission is to granted, the replace `x` with `-` for read char
</span><span style="color:#fdf4c1aa;">    - `-` in value can be ommited, if at least one of `r`, `w` and `x` is
</span><span style="color:#fdf4c1aa;">      present: `r-x` =&gt; `rx`
</span><span style="color:#fdf4c1aa;">    - at least one `-` in value must be present if none of `r`, `w` and `x`
</span><span style="color:#fdf4c1aa;">      is present: `---` =&gt; `-`
</span><span style="color:#fdf4c1aa;">- e.g., `u:wb:rwx`, `u::rwx`
</span></pre><h3 id="file-directory-acl"><a class="zola-anchor" href="#file-directory-acl" aria-label="Anchor link for: file-directory-acl">ðŸ”—</a>File &amp; Directory ACL</h3>
<h4 id="user-acl"><a class="zola-anchor" href="#user-acl" aria-label="Anchor link for: user-acl">ðŸ”—</a>User ACL</h4>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">- For all users: `u::rwx`
</span><span style="color:#fdf4c1aa;">- For user with username &#39;aaa&#39;: `u:aaa:rwx`
</span><span style="color:#fdf4c1aa;">- For user with uid &#39;2000&#39;: `u:2000:rwx`
</span></pre><h4 id="group-acl"><a class="zola-anchor" href="#group-acl" aria-label="Anchor link for: group-acl">ðŸ”—</a>Group ACL</h4>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">- For all groups: `g::rwx`
</span><span style="color:#fdf4c1aa;">- For group with group name &#39;aaa&#39;: `g:aaa:rwx`
</span><span style="color:#fdf4c1aa;">- For group with group id &#39;2000&#39;: `g:2000:rwx`
</span></pre><h4 id="other-acl"><a class="zola-anchor" href="#other-acl" aria-label="Anchor link for: other-acl">ðŸ”—</a>Other ACL</h4>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">- For other users: `o::rwx`
</span></pre><h4 id="mask-acl"><a class="zola-anchor" href="#mask-acl" aria-label="Anchor link for: mask-acl">ðŸ”—</a>Mask acl</h4>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">- The effective acl is the intersection of given acl and mask acl
</span><span style="color:#fdf4c1aa;">- e.g., if `m::r-x` and `u:wb:rwx`, the the effective acl for wb is `u:wb:r-x`
</span></pre><h3 id="default-acl"><a class="zola-anchor" href="#default-acl" aria-label="Anchor link for: default-acl">ðŸ”—</a>Default acl</h3>
<p>For directory, newly create files can inherited from the parent directory if
default acl set for the parent directory.</p>
<h2 id="set-acl-setfacl"><a class="zola-anchor" href="#set-acl-setfacl" aria-label="Anchor link for: set-acl-setfacl">ðŸ”—</a>Set ACL - setfacl</h2>
<h3 id="add-acl-entry"><a class="zola-anchor" href="#add-acl-entry" aria-label="Anchor link for: add-acl-entry">ðŸ”—</a>Add ACL Entry</h3>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">setfacl -m &#39;u:wb:rwx,g:wb:r-x&#39; a.file
</span></pre><h3 id="remove-acl-entry"><a class="zola-anchor" href="#remove-acl-entry" aria-label="Anchor link for: remove-acl-entry">ðŸ”—</a>Remove ACL Entry</h3>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">setfacl -x &#39;u:wb:rwx,g:wb:r-x&#39; a.file
</span></pre><h3 id="override-existing-acl-entries"><a class="zola-anchor" href="#override-existing-acl-entries" aria-label="Anchor link for: override-existing-acl-entries">ðŸ”—</a>Override Existing ACL Entries</h3>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">setfacl --set &#39;u:wb:rwx,g:wb:r-x:o::r--&#39; a.file
</span></pre><h3 id="clear-acl-entries"><a class="zola-anchor" href="#clear-acl-entries" aria-label="Anchor link for: clear-acl-entries">ðŸ”—</a>Clear ACL Entries</h3>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">setfacl -b a.file
</span></pre><h3 id="apply-acl-recursively"><a class="zola-anchor" href="#apply-acl-recursively" aria-label="Anchor link for: apply-acl-recursively">ðŸ”—</a>Apply ACL Recursively</h3>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">setfacl -R -m &#39;u:wb:rwx,g:wb:r-x&#39; a.file
</span></pre><h3 id="change-default-acl"><a class="zola-anchor" href="#change-default-acl" aria-label="Anchor link for: change-default-acl">ðŸ”—</a>Change Default ACL</h3>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">setfacl -d -m &#39;u:wb:rwx,g:wb:r-x&#39; a.file
</span></pre><h2 id="get-acl-getfacl"><a class="zola-anchor" href="#get-acl-getfacl" aria-label="Anchor link for: get-acl-getfacl">ðŸ”—</a>Get ACL - getfacl</h2>
<pre style="background-color:#282828;">
<span style="color:#fdf4c1aa;">getfacl a.file
</span></pre>
    </div>

    
    

    <div class="post-footer">
        
            
                <div class="post-tags">
                    
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;linux&#x2F;">#linux</a>
                    
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;acl&#x2F;">#acl</a>
                    
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;setacl&#x2F;">#setacl</a>
                    
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;getacl&#x2F;">#getacl</a>
                    
                </div>
            
            
                <div class="post-nav">
                    
                        <a class="previous" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;libevent-notes&#x2F;">â€¹ Libevent Note</a>
                    
                    
                        <a class="next" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;posix-make-note&#x2F;">Posix &amp; GNU Make Note â€º</a>
                    
                    
                    
                </div>
            

        

    </div>

    
    
</article>


                </div>
            </main>

            
            
        </div>

      
          <script type="text/javascript" src="https:&#x2F;&#x2F;www.wangbo.im&#x2F;even.js" ></script>
      
    </body>

</html>
