<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="477px" preserveAspectRatio="none" style="width:570px;height:477px;" version="1.1" viewBox="0 0 570 477" width="570px" zoomAndPan="magnify"><defs><filter height="300%" id="fqaykukfd0by" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><polygon fill="#FBFB77" filter="url(#fqaykukfd0by)" points="20,10,20,36.8808,286,36.8808,286,20,276,10,20,10" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="276" x2="276" y1="10" y2="20"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="286" x2="276" y1="20" y2="20"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="26" y="28.3099">try to update email to EMAIL for uid = UID</text><ellipse cx="316" cy="23.4404" fill="#000000" filter="url(#fqaykukfd0by)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fqaykukfd0by)" height="35.5914" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="258.5" y="56.8808"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="268.5" y="79.174">Verfify arguments</text><rect fill="#FEFECE" filter="url(#fqaykukfd0by)" height="35.5914" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="253" y="112.4722"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="106" x="263" y="134.7655">Find user by EMAIL</text><polygon fill="#FEFECE" filter="url(#fqaykukfd0by)" points="259,217.2048,373,217.2048,385,229.2048,373,241.2048,259,241.2048,247,229.2048,259,217.2048" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="114" x="259" y="233.3246">user.uid not equals UID</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="16" x="231" y="226.1835">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="12" x="385" y="226.1835">no</text><rect fill="#FEFECE" filter="url(#fqaykukfd0by)" height="35.5914" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="97.25" y="251.2048"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="194" x="107.25" y="273.498">Throw email not available exception</text><ellipse cx="204.25" cy="316.7962" fill="none" filter="url(#fqaykukfd0by)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="204.75" cy="317.2962" fill="#000000" filter="url(#fqaykukfd0by)" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fqaykukfd0by)" height="35.5914" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="331.25" y="251.2048"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="173" x="341.25" y="273.498">Remove EMAIL entry in request</text><polygon fill="#FEFECE" filter="url(#fqaykukfd0by)" points="290,168.0637,342,168.0637,354,180.0637,342,192.0637,290,192.0637,278,180.0637,290,168.0637" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="16" x="320" y="203.3246">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="290" y="184.1835">found user</text><polygon fill="#FEFECE" filter="url(#fqaykukfd0by)" points="316,346.7962,328,358.7962,316,370.7962,304,358.7962,316,346.7962" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#fqaykukfd0by)" height="35.5914" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="208" y="390.7962"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="196" x="218" y="413.0894">Update email to EMAIL for UID in db</text><ellipse cx="316" cy="456.3876" fill="none" filter="url(#fqaykukfd0by)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="316.5" cy="456.8876" fill="#000000" filter="url(#fqaykukfd0by)" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="316" x2="316" y1="33.4404" y2="56.8808"/><polygon fill="#A80036" points="312,46.8808,316,56.8808,320,46.8808,316,50.8808" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="316" x2="316" y1="92.4722" y2="112.4722"/><polygon fill="#A80036" points="312,102.4722,316,112.4722,320,102.4722,316,106.4722" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="204.25" x2="204.25" y1="286.7962" y2="306.7962"/><polygon fill="#A80036" points="200.25,296.7962,204.25,306.7962,208.25,296.7962,204.25,300.7962" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="247" x2="204.25" y1="229.2048" y2="229.2048"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="204.25" x2="204.25" y1="229.2048" y2="251.2048"/><polygon fill="#A80036" points="200.25,241.2048,204.25,251.2048,208.25,241.2048,204.25,245.2048" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="385" x2="427.75" y1="229.2048" y2="229.2048"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="427.75" x2="427.75" y1="229.2048" y2="251.2048"/><polygon fill="#A80036" points="423.75,241.2048,427.75,251.2048,431.75,241.2048,427.75,245.2048" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="427.75" x2="427.75" y1="286.7962" y2="331.7962"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="427.75" x2="316" y1="331.7962" y2="331.7962"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="316" x2="316" y1="331.7962" y2="346.7962"/><polygon fill="#A80036" points="312,336.7962,316,346.7962,320,336.7962,316,340.7962" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="316" x2="316" y1="192.0637" y2="217.2048"/><polygon fill="#A80036" points="312,207.2048,316,217.2048,320,207.2048,316,211.2048" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="354" x2="544.25" y1="180.0637" y2="180.0637"/><polygon fill="#A80036" points="540.25,272.5005,544.25,282.5005,548.25,272.5005,544.25,276.5005" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="544.25" x2="544.25" y1="180.0637" y2="358.7962"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="544.25" x2="328" y1="358.7962" y2="358.7962"/><polygon fill="#A80036" points="338,354.7962,328,358.7962,338,362.7962,334,358.7962" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="316" x2="316" y1="148.0637" y2="168.0637"/><polygon fill="#A80036" points="312,158.0637,316,168.0637,320,158.0637,316,162.0637" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="316" x2="316" y1="370.7962" y2="390.7962"/><polygon fill="#A80036" points="312,380.7962,316,390.7962,320,380.7962,316,384.7962" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="316" x2="316" y1="426.3876" y2="446.3876"/><polygon fill="#A80036" points="312,436.3876,316,446.3876,320,436.3876,316,440.3876" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
start
floating note left: try to update email to EMAIL for uid = UID
:Verfify arguments;
:Find user by EMAIL;
if (found user) then (yes)
    if (user.uid not equals UID) then (yes)
        :Throw email not available exception;
        stop
    else (no)
        :Remove EMAIL entry in request;
    endif
endif
:Update email to EMAIL for UID in db;
stop
@enduml

PlantUML version 1.2018.00(Fri Jan 05 03:42:56 CST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit GraalVM EE 19.2.0
Java Version: 1.8.0_221-b11
Operating System: Linux
OS Version: 5.2.11-arch1-1-ARCH
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>