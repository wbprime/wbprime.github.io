<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="288px" preserveAspectRatio="none" style="width:552px;height:288px;" version="1.1" viewBox="0 0 552 288" width="552px" zoomAndPan="magnify"><defs><filter height="300%" id="f4lpsrte3r1d3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><polygon fill="#FBFB77" filter="url(#f4lpsrte3r1d3)" points="20,10,20,36.8808,286,36.8808,286,20,276,10,20,10" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="276" x2="276" y1="10" y2="20"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="286" x2="276" y1="20" y2="20"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="26" y="28.3099">try to update email to EMAIL for uid = UID</text><ellipse cx="316" cy="23.4404" fill="#000000" filter="url(#f4lpsrte3r1d3)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f4lpsrte3r1d3)" height="35.5914" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="258.5" y="56.8808"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="268.5" y="79.174">Verfify arguments</text><rect fill="#FEFECE" filter="url(#f4lpsrte3r1d3)" height="35.5914" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="253" y="112.4722"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="106" x="263" y="134.7655">Find user by EMAIL</text><polygon fill="#FEFECE" filter="url(#f4lpsrte3r1d3)" points="222,168.0637,410,168.0637,422,180.0637,410,192.0637,222,192.0637,210,180.0637,222,168.0637" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="188" x="222" y="184.1835">found user &amp;&amp; user.uid not equals UID</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="16" x="194" y="177.0424">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="12" x="422" y="177.0424">no</text><rect fill="#FEFECE" filter="url(#f4lpsrte3r1d3)" height="35.5914" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="91.5" y="202.0637"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="194" x="101.5" y="224.3569">Throw email not available exception</text><ellipse cx="198.5" cy="267.6551" fill="none" filter="url(#f4lpsrte3r1d3)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="199" cy="268.1551" fill="#000000" filter="url(#f4lpsrte3r1d3)" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f4lpsrte3r1d3)" height="35.5914" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="325.5" y="202.0637"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="196" x="335.5" y="224.3569">Update email to EMAIL for UID in db</text><ellipse cx="433.5" cy="267.6551" fill="none" filter="url(#f4lpsrte3r1d3)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="434" cy="268.1551" fill="#000000" filter="url(#f4lpsrte3r1d3)" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="316" x2="316" y1="33.4404" y2="56.8808"/><polygon fill="#A80036" points="312,46.8808,316,56.8808,320,46.8808,316,50.8808" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="316" x2="316" y1="92.4722" y2="112.4722"/><polygon fill="#A80036" points="312,102.4722,316,112.4722,320,102.4722,316,106.4722" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="198.5" x2="198.5" y1="237.6551" y2="257.6551"/><polygon fill="#A80036" points="194.5,247.6551,198.5,257.6551,202.5,247.6551,198.5,251.6551" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="433.5" x2="433.5" y1="237.6551" y2="257.6551"/><polygon fill="#A80036" points="429.5,247.6551,433.5,257.6551,437.5,247.6551,433.5,251.6551" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="210" x2="198.5" y1="180.0637" y2="180.0637"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="198.5" x2="198.5" y1="180.0637" y2="202.0637"/><polygon fill="#A80036" points="194.5,192.0637,198.5,202.0637,202.5,192.0637,198.5,196.0637" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="422" x2="433.5" y1="180.0637" y2="180.0637"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="433.5" x2="433.5" y1="180.0637" y2="202.0637"/><polygon fill="#A80036" points="429.5,192.0637,433.5,202.0637,437.5,192.0637,433.5,196.0637" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="316" x2="316" y1="148.0637" y2="168.0637"/><polygon fill="#A80036" points="312,158.0637,316,168.0637,320,158.0637,316,162.0637" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
start
floating note left: try to update email to EMAIL for uid = UID
:Verfify arguments;
:Find user by EMAIL;
if (found user && user.uid not equals UID) then (yes)
    :Throw email not available exception;
    stop
else (no)
    :Update email to EMAIL for UID in db;
    stop
endif
@enduml

PlantUML version 1.2018.00(Fri Jan 05 03:42:56 CST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit GraalVM EE 19.2.0
Java Version: 1.8.0_221-b11
Operating System: Linux
OS Version: 5.2.11-arch1-1-ARCH
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>