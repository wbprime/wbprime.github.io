

<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>wangboâ€™s home &amp; blog - Spring MVC Unit Testing - Normal Controllers</title>

      

      
          <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
          
      

      
          <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;site.css">
          
      

      
      
    </head>

    <body>
        <div class="container">

            <div id="mobile-navbar" class="mobile-navbar">
              <div class="mobile-header-logo">
                <a href="/" class="logo">WB Prime</a>
              </div>
              <div class="mobile-navbar-icon icon-out">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>

            <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
              <ul class="mobile-menu-list">
                
                    <li class="mobile-menu-item">
                        <a href="https://www.wangbo.im">
                            Home
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https://www.wangbo.im&#x2F;categories">
                            Categories
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https://www.wangbo.im&#x2F;tags">
                            Tags
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https://www.wangbo.im&#x2F;about">
                            About
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;github.wangbo.im">
                            Github
                        </a>
                    </li>
                
              </ul>
            </nav>

            <header id="header">
                <div class="logo"><a href="https:&#x2F;&#x2F;www.wangbo.im">WB Prime</a></div>
                <nav class="menu">
                    <ul>
                        
                            <li>
                                <a href="https://www.wangbo.im">
                                    Home
                                </a>
                            </li>
                        
                            <li>
                                <a href="https://www.wangbo.im&#x2F;categories">
                                    Categories
                                </a>
                            </li>
                        
                            <li>
                                <a href="https://www.wangbo.im&#x2F;tags">
                                    Tags
                                </a>
                            </li>
                        
                            <li>
                                <a href="https://www.wangbo.im&#x2F;about">
                                    About
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;github.wangbo.im">
                                    Github
                                </a>
                            </li>
                        
                    </ul>
                </nav>
            </header>

            <main>
                <div class="content" id="mobile-panel">
                    



<article class="post">
    
    <header class="post__header">
        <h1 class="post__title">
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;spring-mvc-testing-unit-testing-normal-controllers&#x2F;">Spring MVC Unit Testing - Normal Controllers</a>
        </h1>
        <div class="post__meta">
            <span class="post__time">2016-04-09</span>
            
        </div>
    </header>

    <div class="post-content">
      <p>æœ¬æ–‡æ˜¯ <a href="https://www.wangbo.im/posts/spring-mvc-testing-content/">Spring MVC Testing</a> å•å…ƒæµ‹è¯•ç³»åˆ—çš„ç¬¬2ç¯‡ï¼ŒåŸæ–‡é“¾æ¥ï¼š<a href="http://www.petrikainulainen.net/programming/spring-framework/unit-testing-of-spring-mvc-controllers-normal-controllers/">Unit Testing of Spring MVC Controllers: &quot;Normal&quot; Controllers</a>ã€‚</p>
<p>æœ¬ç³»åˆ—çš„ç¬¬1éƒ¨åˆ†è®²è¿°äº†ä½¿ç”¨Spring MVC Teståº”å¦‚ä½•è¿›è¡Œå•å…ƒæµ‹è¯•çš„<a href="https://www.wangbo.im/posts/spring-mvc-testing-unit-testing-configuration/">é…ç½®</a>ï¼Œç°åœ¨å¯ä»¥å¼€å§‹å®æˆ˜ä¸€ä¸‹å¦‚ä½•å¯¹æ ‡å‡†controllerç¼–å†™å•å…ƒæµ‹è¯•ã€‚</p>
<p>é¦–å…ˆéœ€è¦æ˜ç¡®ä¸€ä¸‹ã€‚</p>
<blockquote>
<p>ä½•ä¸ºæ ‡å‡†controllerï¼Ÿ</p>
</blockquote>
<p>æ³¨æ„ï¼šåŸæ–‡æ ‡å‡†æ˜¯åŠ äº†åŒå¼•å·çš„ï¼ˆ&quot;normal&quot;ï¼‰</p>
<p>æˆ‘ä»¬ç§°ä¹‹ä¸ºæ ‡å‡†controllerçš„Controllerï¼Œæ˜¯æ¸²æŸ“viewæˆ–è€…å¤„ç†formæäº¤è¯·æ±‚çš„Controllerã€‚ï¼ˆä¸ä¹‹ç›¸å¯¹çš„æ˜¯Rest Controllerï¼‰ã€‚</p>
<p>OKï¼Œç°åœ¨æˆ‘ä»¬è¿›å…¥æ­£æ–‡ã€‚</p>
<p><a name="continue-reading"></a></p>
<h1 id="tong-guo-mavenhuo-qu-yi-lai"><a class="zola-anchor" href="#tong-guo-mavenhuo-qu-yi-lai" aria-label="Anchor link for: tong-guo-mavenhuo-qu-yi-lai">ğŸ”—</a>
é€šè¿‡Mavenè·å–ä¾èµ–</h1>
<p>æœ¬ç³»åˆ—ç”¨åˆ°çš„ä¾èµ–å¦‚ä¸‹ï¼š</p>
<ul>
<li>Jackson 2.2.1 (core and databind modules)</li>
<li>Hamcrest 1.3</li>
<li>JUnit 4.11</li>
<li>Mockito 1.9.5</li>
<li>Spring Test 3.2.3.RELEASE</li>
</ul>
<p>ç”Ÿæˆçš„pom.xmlæ–‡ä»¶çš„ç‰‡æ®µå¦‚ä¸‹ï¼š</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">dependency</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">groupId</span><span style="color:#c0c5ce;">&gt;com.fasterxml.jackson.core&lt;/</span><span style="color:#bf616a;">groupId</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">artifactId</span><span style="color:#c0c5ce;">&gt;jackson-core&lt;/</span><span style="color:#bf616a;">artifactId</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">version</span><span style="color:#c0c5ce;">&gt;2.2.1&lt;/</span><span style="color:#bf616a;">version</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">scope</span><span style="color:#c0c5ce;">&gt;test&lt;/</span><span style="color:#bf616a;">scope</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">&lt;/</span><span style="color:#bf616a;">dependency</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">dependency</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">groupId</span><span style="color:#c0c5ce;">&gt;com.fasterxml.jackson.core&lt;/</span><span style="color:#bf616a;">groupId</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">artifactId</span><span style="color:#c0c5ce;">&gt;jackson-databind&lt;/</span><span style="color:#bf616a;">artifactId</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">version</span><span style="color:#c0c5ce;">&gt;2.2.1&lt;/</span><span style="color:#bf616a;">version</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">scope</span><span style="color:#c0c5ce;">&gt;test&lt;/</span><span style="color:#bf616a;">scope</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">&lt;/</span><span style="color:#bf616a;">dependency</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">dependency</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">groupId</span><span style="color:#c0c5ce;">&gt;org.hamcrest&lt;/</span><span style="color:#bf616a;">groupId</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">artifactId</span><span style="color:#c0c5ce;">&gt;hamcrest-all&lt;/</span><span style="color:#bf616a;">artifactId</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">version</span><span style="color:#c0c5ce;">&gt;1.3&lt;/</span><span style="color:#bf616a;">version</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">scope</span><span style="color:#c0c5ce;">&gt;test&lt;/</span><span style="color:#bf616a;">scope</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">&lt;/</span><span style="color:#bf616a;">dependency</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">dependency</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">groupId</span><span style="color:#c0c5ce;">&gt;junit&lt;/</span><span style="color:#bf616a;">groupId</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">artifactId</span><span style="color:#c0c5ce;">&gt;junit&lt;/</span><span style="color:#bf616a;">artifactId</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">version</span><span style="color:#c0c5ce;">&gt;4.11&lt;/</span><span style="color:#bf616a;">version</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">scope</span><span style="color:#c0c5ce;">&gt;test&lt;/</span><span style="color:#bf616a;">scope</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">exclusions</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">        </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">exclusion</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">            </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">artifactId</span><span style="color:#c0c5ce;">&gt;hamcrest-core&lt;/</span><span style="color:#bf616a;">artifactId</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">            </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">groupId</span><span style="color:#c0c5ce;">&gt;org.hamcrest&lt;/</span><span style="color:#bf616a;">groupId</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">        </span><span style="color:#c0c5ce;">&lt;/</span><span style="color:#bf616a;">exclusion</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;/</span><span style="color:#bf616a;">exclusions</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">&lt;/</span><span style="color:#bf616a;">dependency</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">dependency</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">groupId</span><span style="color:#c0c5ce;">&gt;org.mockito&lt;/</span><span style="color:#bf616a;">groupId</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">artifactId</span><span style="color:#c0c5ce;">&gt;mockito-core&lt;/</span><span style="color:#bf616a;">artifactId</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">version</span><span style="color:#c0c5ce;">&gt;1.9.5&lt;/</span><span style="color:#bf616a;">version</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">scope</span><span style="color:#c0c5ce;">&gt;test&lt;/</span><span style="color:#bf616a;">scope</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">&lt;/</span><span style="color:#bf616a;">dependency</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">dependency</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">groupId</span><span style="color:#c0c5ce;">&gt;org.springframework&lt;/</span><span style="color:#bf616a;">groupId</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">artifactId</span><span style="color:#c0c5ce;">&gt;spring-test&lt;/</span><span style="color:#bf616a;">artifactId</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">version</span><span style="color:#c0c5ce;">&gt;3.2.3.RELEASE&lt;/</span><span style="color:#bf616a;">version</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">scope</span><span style="color:#c0c5ce;">&gt;test&lt;/</span><span style="color:#bf616a;">scope</span><span style="color:#c0c5ce;">&gt;
</span><span style="color:#c0c5ce;">&lt;/</span><span style="color:#bf616a;">dependency</span><span style="color:#c0c5ce;">&gt;
</span></pre>
<p>ç„¶åå¯ä»¥å¼€å§‹ç¼–å†™æµ‹è¯•ç”¨ä¾‹äº†ã€‚</p>
<h1 id="ce-shi-yong-li-lei"><a class="zola-anchor" href="#ce-shi-yong-li-lei" aria-label="Anchor link for: ce-shi-yong-li-lei">ğŸ”—</a>
æµ‹è¯•ç”¨ä¾‹ç±»</h1>
<p>å¯¹controlleræ–¹æ³•è¿›è¡Œå•å…ƒæµ‹è¯•ï¼ŒåŸåˆ™ä¸Šæœ‰ä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>é¦–å…ˆå‘ç›®æ ‡controllerå‘é€ä¸€ä¸ªè¯·æ±‚</li>
<li>ç„¶åæ£€éªŒæ”¶åˆ°çš„å“åº”æ˜¯å¦ç¬¦åˆé¢„æœŸ</li>
</ol>
<p>Spring MVC Testæ¨¡å—æä¾›äº†ä¸€äº›å·¥å…·ç®€åŒ–æˆ‘ä»¬çš„å·¥ä½œï¼Œè¿™äº›ç±»ä¸»è¦æ˜¯ï¼š</p>
<ul>
<li><a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/test/web/servlet/request/MockMvcRequestBuilders.html"><code>MockMvcRequestBuilders</code></a> ç±»å¯ä»¥ç”¨æ¥ç®€åŒ–åˆ›å»ºè¯·æ±‚çš„å·¥ä½œ</li>
<li><a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/test/web/servlet/MockMvc.html"><code>MockMvc</code></a> ç±»å¯ä»¥ç”¨æ¥æ‰§è¡Œè¯·æ±‚å¹¶è·å–å“åº”</li>
<li><a href="http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/test/web/servlet/result/MockMvcResultMatchers.html"><code>MockMvcResultMatchers</code></a> ç±»å¯ä»¥ç”¨æ¥è¾…åŠ©å¯¹å“åº”ä½œæ ¡éªŒ</li>
</ul>
<p>ä¸ºäº†æ¼”ç¤ºå®Œæ•´çš„æµç¨‹ï¼Œæˆ‘ä»¬å°†ç¼–å†™å•å…ƒæµ‹è¯•æµ‹è¯•3ä¸ªcontrolleræ–¹æ³•ï¼š</p>
<ol>
<li>ç¬¬ä¸€ä¸ªä¸»è¦æ˜¯æ¸²æŸ“æ˜¾ç¤º<code>Todo</code>é¡¹åˆ—è¡¨é¡µé¢çš„æ¥å£</li>
<li>ç¬¬äºŒä¸ªä¸»è¦æ˜¯æ¸²æŸ“æ˜¾ç¤ºå•ä¸ª<code>Todo</code>é¡¹è¯¦æƒ…çš„æ¥å£</li>
<li>ç¬¬ä¸‰ä¸ªä¸»è¦æ˜¯å¤„ç†æ·»åŠ <code>Todo</code>é¡¹çš„è¡¨å•è¯·æ±‚çš„æ¥å£</li>
</ol>
<h2 id="todoxiang-lie-biao-ye-jie-kou"><a class="zola-anchor" href="#todoxiang-lie-biao-ye-jie-kou" aria-label="Anchor link for: todoxiang-lie-biao-ye-jie-kou">ğŸ”—</a>
<code>Todo</code>é¡¹åˆ—è¡¨é¡µæ¥å£</h2>
<p>é¦–å…ˆçœ‹ä¸€ä¸‹è¯¥æ¥å£çš„å®ç°ä»£ç ã€‚</p>
<h3 id="yu-qi-de-shi-xian"><a class="zola-anchor" href="#yu-qi-de-shi-xian" aria-label="Anchor link for: yu-qi-de-shi-xian">ğŸ”—</a>
é¢„æœŸçš„å®ç°</h3>
<p>é¢„æœŸçš„æ¥å£åº”è¯¥åšä»¥ä¸‹å‡ ä»¶äº‹ï¼š</p>
<ol>
<li>æ¥æ”¶åˆ°&quot;/&quot;ä¸Šçš„GETè¯·æ±‚ï¼Œå¼€å§‹å¤„ç†æµç¨‹</li>
<li>è°ƒç”¨<code>TodoService</code>çš„<code>findAll()</code>æ–¹æ³•è·å–åˆ°æ‰€æœ‰çš„<code>Todo</code>å¯¹è±¡çš„åˆ—è¡¨</li>
<li>å°†è·å–åˆ°çš„åˆ—è¡¨åŠ å…¥åˆ°modelä¸­</li>
<li>è¿”å›å¯¹åº”çš„viewåç§°</li>
</ol>
<p><code>TodoController</code>ç±»å†…çš„ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.stereotype.</span><span style="color:#ebcb8b;">Controller</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.ui.</span><span style="color:#ebcb8b;">Model</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.web.bind.annotation.*;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">java.util.</span><span style="color:#ebcb8b;">List</span><span style="color:#c0c5ce;">;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">Controller
</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">TodoController </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private final </span><span style="color:#ebcb8b;">TodoService </span><span style="color:#eff1f5;">service;
</span><span style="color:#eff1f5;">     </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">RequestMapping</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">value </span><span style="color:#c0c5ce;">= &quot;</span><span style="color:#a3be8c;">/</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">method </span><span style="color:#c0c5ce;">= </span><span style="color:#ebcb8b;">RequestMethod</span><span style="color:#eff1f5;">.</span><span style="color:#d08770;">GET</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public </span><span style="color:#ebcb8b;">String </span><span style="color:#8fa1b3;">findAll</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">Model </span><span style="color:#bf616a;">model</span><span style="color:#eff1f5;">) {
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">List</span><span style="color:#eff1f5;">&lt;</span><span style="color:#ebcb8b;">Todo</span><span style="color:#eff1f5;">&gt; models </span><span style="color:#c0c5ce;">=</span><span style="color:#eff1f5;"> service.</span><span style="color:#bf616a;">findAll</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">        </span><span style="color:#eff1f5;">model.</span><span style="color:#bf616a;">addAttribute</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todos</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, models);
</span><span style="color:#eff1f5;">        </span><span style="color:#b48ead;">return </span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo/list</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">}
</span><span style="color:#eff1f5;">}
</span></pre>
<p>æ¥ä¸‹æ¥å¯ä»¥å¼€å§‹ç¼–å†™æµ‹è¯•ç”¨ä¾‹äº†ã€‚</p>
<h3 id="ce-shi-yong-li-todolie-biao-ye-jie-kou"><a class="zola-anchor" href="#ce-shi-yong-li-todolie-biao-ye-jie-kou" aria-label="Anchor link for: ce-shi-yong-li-todolie-biao-ye-jie-kou">ğŸ”—</a>
æµ‹è¯•ç”¨ä¾‹ï¼š<code>Todo</code>åˆ—è¡¨é¡µæ¥å£</h3>
<p>è¯¥æµ‹è¯•ç”¨ä¾‹ä¸»è¦å·¥ä½œå¦‚ä¸‹ï¼š</p>
<ol>
<li>å‡†å¤‡æµ‹è¯•æ•°æ®</li>
<li>é…ç½®mockçš„<code>TodoService</code>å®ä¾‹åœ¨<code>findAll()</code>æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™è¿”å›å‡†å¤‡çš„æ•°æ®</li>
<li>æ‰§è¡Œä¸€ä¸ª'/'çš„GETè¯·æ±‚</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šHTTPè¿”å›ç æ˜¯200</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šviewçš„åç§°æ˜¯&quot;todo/list&quot;</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šè¯·æ±‚æ‹¿åˆ°çš„æ˜¯'/WEB-INF/jsp/todo/list.jsp'é¡µé¢</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šmodelé‡Œé¢çš„å…ƒç´ ä¸ªæ•°æ˜¯2</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šmodelé‡Œé¢çš„å…ƒç´ æ˜¯æ­£ç¡®çš„</li>
<li>æ£€æŸ¥è¯·æ±‚æ‰§è¡Œè¿‡ç¨‹ä¸­mockçš„<code>TodoService</code>å®ä¾‹æ‰§è¡Œäº†<code>findAll()</code>æ–¹æ³•æœ‰ä¸”ä»…1æ¬¡</li>
<li>æ£€æŸ¥è¯·æ±‚æ‰§è¡Œè¿‡ç¨‹ä¸­mockçš„<code>TodoService</code>å®ä¾‹æœªæ‰§è¡Œå…¶ä»–æ–¹æ³•</li>
</ol>
<p>ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.junit.</span><span style="color:#ebcb8b;">Before</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.junit.</span><span style="color:#ebcb8b;">Test</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.junit.runner.</span><span style="color:#ebcb8b;">RunWith</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.mockito.</span><span style="color:#ebcb8b;">Mockito</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.beans.factory.annotation.</span><span style="color:#ebcb8b;">Autowired</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.context.</span><span style="color:#ebcb8b;">ContextConfiguration</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.context.junit4.</span><span style="color:#ebcb8b;">SpringJUnit4ClassRunner</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.context.web.</span><span style="color:#ebcb8b;">WebAppConfiguration</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.</span><span style="color:#ebcb8b;">MockMvc</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.setup.</span><span style="color:#ebcb8b;">MockMvcBuilders</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.web.context.</span><span style="color:#ebcb8b;">WebApplicationContext</span><span style="color:#c0c5ce;">;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">java.util.</span><span style="color:#ebcb8b;">Arrays</span><span style="color:#c0c5ce;">;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.hamcrest.</span><span style="color:#ebcb8b;">Matchers</span><span style="color:#c0c5ce;">.*;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.hamcrest.</span><span style="color:#ebcb8b;">Matchers</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">is</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.mockito.</span><span style="color:#ebcb8b;">Mockito</span><span style="color:#c0c5ce;">.*;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.request.</span><span style="color:#ebcb8b;">MockMvcRequestBuilders</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">get</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.result.</span><span style="color:#ebcb8b;">MockMvcResultMatchers</span><span style="color:#c0c5ce;">.*;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.result.</span><span style="color:#ebcb8b;">MockMvcResultMatchers</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">model</span><span style="color:#c0c5ce;">;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">RunWith</span><span style="color:#c0c5ce;">(</span><span style="color:#ebcb8b;">SpringJUnit4ClassRunner</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">)
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">ContextConfiguration</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">classes </span><span style="color:#c0c5ce;">= {</span><span style="color:#ebcb8b;">TestContext</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">, </span><span style="color:#ebcb8b;">WebAppContext</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">})
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">WebAppConfiguration
</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">TodoControllerTest </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">MockMvc </span><span style="color:#eff1f5;">mockMvc;
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">Autowired
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">TodoService </span><span style="color:#eff1f5;">todoServiceMock;
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">//Add WebApplicationContext field here
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">//The setUp() method is omitted.
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">Test
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public void 
</span><span style="color:#eff1f5;">    </span><span style="color:#8fa1b3;">findAll_ShouldAddTodoEntriesToModelAndRenderTodoListView</span><span style="color:#eff1f5;">() </span><span style="color:#b48ead;">throws </span><span style="color:#ebcb8b;">Exception </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">Todo</span><span style="color:#eff1f5;"> first </span><span style="color:#c0c5ce;">= </span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">TodoBuilder</span><span style="color:#eff1f5;">()
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">id</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1</span><span style="color:#b48ead;">L</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">description</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">Lorem ipsum</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">title</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">Foo</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">build</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">Todo</span><span style="color:#eff1f5;"> second </span><span style="color:#c0c5ce;">= </span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">TodoBuilder</span><span style="color:#eff1f5;">()
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">id</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">2</span><span style="color:#b48ead;">L</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">description</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">Lorem ipsum</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">title</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">Bar</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">build</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">when</span><span style="color:#eff1f5;">(todoServiceMock.</span><span style="color:#bf616a;">findAll</span><span style="color:#eff1f5;">()).</span><span style="color:#bf616a;">thenReturn</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">Arrays</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">asList</span><span style="color:#eff1f5;">(first, second));
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#eff1f5;">mockMvc.</span><span style="color:#bf616a;">perform</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">get</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">/</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">status</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">isOk</span><span style="color:#eff1f5;">())
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">view</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">name</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo/list</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">forwardedUrl</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">/WEB-INF/jsp/todo/list.jsp</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">model</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">attribute</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todos</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">hasSize</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">2</span><span style="color:#eff1f5;">)))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">model</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">attribute</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todos</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">hasItem</span><span style="color:#eff1f5;">(
</span><span style="color:#eff1f5;">                        </span><span style="color:#bf616a;">allOf</span><span style="color:#eff1f5;">(
</span><span style="color:#eff1f5;">                                </span><span style="color:#bf616a;">hasProperty</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">id</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">is</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1</span><span style="color:#b48ead;">L</span><span style="color:#eff1f5;">)),
</span><span style="color:#eff1f5;">                                </span><span style="color:#bf616a;">hasProperty</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">description</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">is</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">Lorem ipsum</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)),
</span><span style="color:#eff1f5;">                                </span><span style="color:#bf616a;">hasProperty</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">title</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">is</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">Foo</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                        </span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">)))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">model</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">attribute</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todos</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">hasItem</span><span style="color:#eff1f5;">(
</span><span style="color:#eff1f5;">                        </span><span style="color:#bf616a;">allOf</span><span style="color:#eff1f5;">(
</span><span style="color:#eff1f5;">                                </span><span style="color:#bf616a;">hasProperty</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">id</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">is</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">2</span><span style="color:#b48ead;">L</span><span style="color:#eff1f5;">)),
</span><span style="color:#eff1f5;">                                </span><span style="color:#bf616a;">hasProperty</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">description</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">is</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">Lorem ipsum</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)),
</span><span style="color:#eff1f5;">                                </span><span style="color:#bf616a;">hasProperty</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">title</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">is</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">Bar</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                        </span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">)));
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">verify</span><span style="color:#eff1f5;">(todoServiceMock, </span><span style="color:#bf616a;">times</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1</span><span style="color:#eff1f5;">)).</span><span style="color:#bf616a;">findAll</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">verifyNoMoreInteractions</span><span style="color:#eff1f5;">(todoServiceMock);
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">}
</span><span style="color:#eff1f5;">}
</span></pre><h2 id="todoxiang-xiang-qing-ye-jie-kou"><a class="zola-anchor" href="#todoxiang-xiang-qing-ye-jie-kou" aria-label="Anchor link for: todoxiang-xiang-qing-ye-jie-kou">ğŸ”—</a>
<code>Todo</code>é¡¹è¯¦æƒ…é¡µæ¥å£</h2>
<p>é¦–å…ˆçœ‹ä¸€ä¸‹è¯¥æ¥å£çš„å®ç°ä»£ç ã€‚</p>
<h3 id="yu-qi-de-shi-xian-1"><a class="zola-anchor" href="#yu-qi-de-shi-xian-1" aria-label="Anchor link for: yu-qi-de-shi-xian-1">ğŸ”—</a>
é¢„æœŸçš„å®ç°</h3>
<p>é¢„æœŸçš„æ¥å£åº”è¯¥åšä»¥ä¸‹å‡ ä»¶äº‹ï¼š</p>
<ol>
<li>æ¥æ”¶åˆ°&quot;/todo/{id}&quot;ä¸Šçš„GETè¯·æ±‚ï¼Œ{id}æ˜¯<code>Todo</code>çš„idå€¼ï¼Œå¼€å§‹å¤„ç†æµç¨‹</li>
<li>è°ƒç”¨<code>TodoService</code>çš„<code>findById()</code>æ–¹æ³•è·å–åˆ°ç›®æ ‡<code>Todo</code>å¯¹è±¡</li>
<li>å°†è·å–åˆ°çš„<code>Todo</code>é¡¹åŠ å…¥åˆ°modelä¸­</li>
<li>è¿”å›å¯¹åº”çš„viewåç§°</li>
</ol>
<p><code>TodoController</code>ç±»å†…çš„ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">RequestMapping</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">value </span><span style="color:#c0c5ce;">= &quot;</span><span style="color:#a3be8c;">/todo/{id}</span><span style="color:#c0c5ce;">&quot;, </span><span style="color:#bf616a;">method </span><span style="color:#c0c5ce;">= </span><span style="color:#ebcb8b;">RequestMethod</span><span style="color:#c0c5ce;">.</span><span style="color:#d08770;">GET</span><span style="color:#c0c5ce;">)
</span><span style="color:#b48ead;">public </span><span style="color:#ebcb8b;">String </span><span style="color:#bf616a;">findById</span><span style="color:#c0c5ce;">(@</span><span style="color:#bf616a;">PathVariable</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">id</span><span style="color:#c0c5ce;">&quot;) </span><span style="color:#ebcb8b;">Long</span><span style="color:#c0c5ce;"> id, </span><span style="color:#ebcb8b;">Model</span><span style="color:#c0c5ce;"> model) throws </span><span style="color:#ebcb8b;">TodoNotFoundException </span><span style="color:#c0c5ce;">{
</span><span style="color:#c0c5ce;">    </span><span style="color:#ebcb8b;">Todo</span><span style="color:#c0c5ce;"> found = service.</span><span style="color:#bf616a;">findById</span><span style="color:#c0c5ce;">(id);
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">model.</span><span style="color:#bf616a;">addAttribute</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">todo</span><span style="color:#c0c5ce;">&quot;, found);
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">return </span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo/view</span><span style="color:#c0c5ce;">&quot;;
</span><span style="color:#c0c5ce;">}
</span></pre>
<blockquote>
<p>å¦‚æœæŠ›å‡ºäº†<code>TodoNotFoundException</code>ï¼ŒSpring Mvcæ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢ï¼Ÿ</p>
</blockquote>
<p>åœ¨æœ¬ç³»åˆ—çš„å‰ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬åœ¨webappçš„é…ç½®ä¸­æ³¨å†Œäº†ä¸€ä¸ª<code>exceptionResolver()</code>ï¼š</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">Bean
</span><span style="color:#b48ead;">public </span><span style="color:#ebcb8b;">SimpleMappingExceptionResolver </span><span style="color:#bf616a;">exceptionResolver</span><span style="color:#c0c5ce;">() {
</span><span style="color:#c0c5ce;">    </span><span style="color:#ebcb8b;">SimpleMappingExceptionResolver</span><span style="color:#c0c5ce;"> exceptionResolver = </span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">SimpleMappingExceptionResolver</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#ebcb8b;">Properties</span><span style="color:#c0c5ce;"> exceptionMappings = </span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">Properties</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">exceptionMappings.</span><span style="color:#bf616a;">put</span><span style="color:#c0c5ce;">(
</span><span style="color:#c0c5ce;">        </span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">net.petrikainulainen.spring.testmvc.todo.exception.TodoNotFoundException</span><span style="color:#c0c5ce;">&quot;,
</span><span style="color:#c0c5ce;">        </span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">error/404</span><span style="color:#c0c5ce;">&quot;
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">);
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">exceptionMappings.</span><span style="color:#bf616a;">put</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">java.lang.Exception</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">error/error</span><span style="color:#c0c5ce;">&quot;);
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">exceptionMappings.</span><span style="color:#bf616a;">put</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">java.lang.RuntimeException</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">error/error</span><span style="color:#c0c5ce;">&quot;);
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">exceptionResolver.</span><span style="color:#bf616a;">setExceptionMappings</span><span style="color:#c0c5ce;">(exceptionMappings);
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#ebcb8b;">Properties</span><span style="color:#c0c5ce;"> statusCodes = </span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">Properties</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">statusCodes.</span><span style="color:#bf616a;">put</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">error/404</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">404</span><span style="color:#c0c5ce;">&quot;);
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">statusCodes.</span><span style="color:#bf616a;">put</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">error/error</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">500</span><span style="color:#c0c5ce;">&quot;);
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">exceptionResolver.</span><span style="color:#bf616a;">setStatusCodes</span><span style="color:#c0c5ce;">(statusCodes);
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">return</span><span style="color:#c0c5ce;"> exceptionResolver;
</span><span style="color:#c0c5ce;">}
</span></pre>
<p>æ‰€ä»¥ï¼Œå½“æŠ›å‡º<code>TodoNotFoundException</code>å¼‚å¸¸æ—¶ï¼Œä¼šè¿”å›'error/404'çš„é¡µé¢ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬çš„æµ‹è¯•ç”¨ä¾‹è¦æµ‹è¯•ä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li>æ¥å£æ‰¾åˆ°äº†æŒ‡å®šçš„<code>Todo</code>é¡¹</li>
<li>æ¥å£æ²¡æœ‰æ‰¾åˆ°æŒ‡å®šçš„<code>Todo</code>é¡¹</li>
</ul>
<p>æ¥ä¸‹æ¥å¯ä»¥å¼€å§‹ç¼–å†™æµ‹è¯•ç”¨ä¾‹äº†ã€‚</p>
<h3 id="ce-shi-yong-li-todoxiang-wei-zhao-dao"><a class="zola-anchor" href="#ce-shi-yong-li-todoxiang-wei-zhao-dao" aria-label="Anchor link for: ce-shi-yong-li-todoxiang-wei-zhao-dao">ğŸ”—</a>
æµ‹è¯•ç”¨ä¾‹ï¼š<code>Todo</code>é¡¹æœªæ‰¾åˆ°</h3>
<p>è¯¥æµ‹è¯•ç”¨ä¾‹ä¸»è¦å·¥ä½œå¦‚ä¸‹ï¼š</p>
<ol>
<li>é…ç½®mockçš„<code>TodoService</code>å®ä¾‹åœ¨<code>findById()</code>æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™æŠ›å‡º<code>TodoNotFoundException</code></li>
<li>æ‰§è¡Œä¸€ä¸ª'/todo/1'çš„GETè¯·æ±‚</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šHTTPè¿”å›ç æ˜¯404</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šviewçš„åç§°æ˜¯&quot;error/404&quot;</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šè¯·æ±‚æ‹¿åˆ°çš„æ˜¯'/WEB-INF/jsp/error/404.jsp'é¡µé¢</li>
<li>æ£€æŸ¥è¯·æ±‚æ‰§è¡Œè¿‡ç¨‹ä¸­mockçš„<code>TodoService</code>å®ä¾‹æ‰§è¡Œäº†<code>findById()</code>æ–¹æ³•æœ‰ä¸”ä»…1æ¬¡</li>
<li>æ£€æŸ¥è¯·æ±‚æ‰§è¡Œè¿‡ç¨‹ä¸­mockçš„<code>TodoService</code>å®ä¾‹æœªæ‰§è¡Œå…¶ä»–æ–¹æ³•</li>
</ol>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.junit.</span><span style="color:#ebcb8b;">Before</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.junit.</span><span style="color:#ebcb8b;">Test</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.junit.runner.</span><span style="color:#ebcb8b;">RunWith</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.mockito.</span><span style="color:#ebcb8b;">Mockito</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.beans.factory.annotation.</span><span style="color:#ebcb8b;">Autowired</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.context.</span><span style="color:#ebcb8b;">ContextConfiguration</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.context.junit4.</span><span style="color:#ebcb8b;">SpringJUnit4ClassRunner</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.context.web.</span><span style="color:#ebcb8b;">WebAppConfiguration</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.</span><span style="color:#ebcb8b;">MockMvc</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.setup.</span><span style="color:#ebcb8b;">MockMvcBuilders</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.web.context.</span><span style="color:#ebcb8b;">WebApplicationContext</span><span style="color:#c0c5ce;">;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.mockito.</span><span style="color:#ebcb8b;">Mockito</span><span style="color:#c0c5ce;">.*;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.request.</span><span style="color:#ebcb8b;">MockMvcRequestBuilders</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">get</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.result.</span><span style="color:#ebcb8b;">MockMvcResultMatchers</span><span style="color:#c0c5ce;">.*;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">RunWith</span><span style="color:#c0c5ce;">(</span><span style="color:#ebcb8b;">SpringJUnit4ClassRunner</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">)
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">ContextConfiguration</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">classes </span><span style="color:#c0c5ce;">= {</span><span style="color:#ebcb8b;">TestContext</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">, </span><span style="color:#ebcb8b;">WebAppContext</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">})
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">WebAppConfiguration
</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">TodoControllerTest </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">MockMvc </span><span style="color:#eff1f5;">mockMvc;
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">Autowired
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">TodoService </span><span style="color:#eff1f5;">todoServiceMock;
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">//Add WebApplicationContext field here
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">//The setUp() method is omitted.
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">Test
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public void </span><span style="color:#8fa1b3;">findById_TodoEntryNotFound_ShouldRender404View</span><span style="color:#eff1f5;">() </span><span style="color:#b48ead;">throws </span><span style="color:#ebcb8b;">Exception </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">when</span><span style="color:#eff1f5;">(todoServiceMock.</span><span style="color:#bf616a;">findById</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1</span><span style="color:#b48ead;">L</span><span style="color:#eff1f5;">)).</span><span style="color:#bf616a;">thenThrow</span><span style="color:#eff1f5;">(</span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">TodoNotFoundException</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;&quot;</span><span style="color:#eff1f5;">));
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#eff1f5;">mockMvc.</span><span style="color:#bf616a;">perform</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">get</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">/todo/{id}</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#d08770;">1</span><span style="color:#b48ead;">L</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">status</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">isNotFound</span><span style="color:#eff1f5;">())
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">view</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">name</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">error/404</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">forwardedUrl</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">/WEB-INF/jsp/error/404.jsp</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">));
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">verify</span><span style="color:#eff1f5;">(todoServiceMock, </span><span style="color:#bf616a;">times</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1</span><span style="color:#eff1f5;">)).</span><span style="color:#bf616a;">findById</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1</span><span style="color:#b48ead;">L</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">verifyZeroInteractions</span><span style="color:#eff1f5;">(todoServiceMock);
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">}
</span><span style="color:#eff1f5;">}
</span></pre><h3 id="ce-shi-yong-li-todoxiang-bei-zhao-dao"><a class="zola-anchor" href="#ce-shi-yong-li-todoxiang-bei-zhao-dao" aria-label="Anchor link for: ce-shi-yong-li-todoxiang-bei-zhao-dao">ğŸ”—</a>
æµ‹è¯•ç”¨ä¾‹ï¼š<code>Todo</code>é¡¹è¢«æ‰¾åˆ°</h3>
<p>è¯¥æµ‹è¯•ç”¨ä¾‹ä¸»è¦å·¥ä½œå¦‚ä¸‹ï¼š</p>
<ol>
<li>å‡†å¤‡æµ‹è¯•æ•°æ®</li>
<li>é…ç½®mockçš„<code>TodoService</code>å®ä¾‹åœ¨<code>findById()</code>æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™è¿”å›å‡†å¤‡çš„æ•°æ®</li>
<li>æ‰§è¡Œä¸€ä¸ª'/todo/1'çš„GETè¯·æ±‚</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šHTTPè¿”å›ç æ˜¯200</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šviewçš„åç§°æ˜¯&quot;todo/view&quot;</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šè¯·æ±‚æ‹¿åˆ°çš„æ˜¯'/WEB-INF/jsp/todo/view.jsp'é¡µé¢</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šmodelé‡Œé¢çš„å…ƒç´ æ˜¯æ­£ç¡®çš„</li>
<li>æ£€æŸ¥è¯·æ±‚æ‰§è¡Œè¿‡ç¨‹ä¸­mockçš„<code>TodoService</code>å®ä¾‹æ‰§è¡Œäº†<code>findById()</code>æ–¹æ³•æœ‰ä¸”ä»…1æ¬¡</li>
<li>æ£€æŸ¥è¯·æ±‚æ‰§è¡Œè¿‡ç¨‹ä¸­mockçš„<code>TodoService</code>å®ä¾‹æœªæ‰§è¡Œå…¶ä»–æ–¹æ³•</li>
</ol>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.junit.</span><span style="color:#ebcb8b;">Before</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.junit.</span><span style="color:#ebcb8b;">Test</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.junit.runner.</span><span style="color:#ebcb8b;">RunWith</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.mockito.</span><span style="color:#ebcb8b;">Mockito</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.beans.factory.annotation.</span><span style="color:#ebcb8b;">Autowired</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.context.</span><span style="color:#ebcb8b;">ContextConfiguration</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.context.junit4.</span><span style="color:#ebcb8b;">SpringJUnit4ClassRunner</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.context.web.</span><span style="color:#ebcb8b;">WebAppConfiguration</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.</span><span style="color:#ebcb8b;">MockMvc</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.setup.</span><span style="color:#ebcb8b;">MockMvcBuilders</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.web.context.</span><span style="color:#ebcb8b;">WebApplicationContext</span><span style="color:#c0c5ce;">;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.hamcrest.</span><span style="color:#ebcb8b;">Matchers</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">hasProperty</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.hamcrest.</span><span style="color:#ebcb8b;">Matchers</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">is</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.mockito.</span><span style="color:#ebcb8b;">Mockito</span><span style="color:#c0c5ce;">.*;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.request.</span><span style="color:#ebcb8b;">MockMvcRequestBuilders</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">get</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.result.</span><span style="color:#ebcb8b;">MockMvcResultMatchers</span><span style="color:#c0c5ce;">.*;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">RunWith</span><span style="color:#c0c5ce;">(</span><span style="color:#ebcb8b;">SpringJUnit4ClassRunner</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">)
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">ContextConfiguration</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">classes </span><span style="color:#c0c5ce;">= {</span><span style="color:#ebcb8b;">TestContext</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">, </span><span style="color:#ebcb8b;">WebAppContext</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">})
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">WebAppConfiguration
</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">TodoControllerTest </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">MockMvc </span><span style="color:#eff1f5;">mockMvc;
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">Autowired
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">TodoService </span><span style="color:#eff1f5;">todoServiceMock;
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">//Add WebApplicationContext field here
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">//The setUp() method is omitted.
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">Test
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public void 
</span><span style="color:#eff1f5;">    </span><span style="color:#8fa1b3;">findById_TodoEntryFound_ShouldAddTodoEntryToModelAndRenderViewTodoEntryView</span><span style="color:#eff1f5;">() </span><span style="color:#b48ead;">throws </span><span style="color:#ebcb8b;">Exception </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">Todo</span><span style="color:#eff1f5;"> found </span><span style="color:#c0c5ce;">= </span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">TodoBuilder</span><span style="color:#eff1f5;">()
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">id</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1</span><span style="color:#b48ead;">L</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">description</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">Lorem ipsum</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">title</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">Foo</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">build</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">when</span><span style="color:#eff1f5;">(todoServiceMock.</span><span style="color:#bf616a;">findById</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1</span><span style="color:#b48ead;">L</span><span style="color:#eff1f5;">)).</span><span style="color:#bf616a;">thenReturn</span><span style="color:#eff1f5;">(found);
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#eff1f5;">mockMvc.</span><span style="color:#bf616a;">perform</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">get</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">/todo/{id}</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#d08770;">1</span><span style="color:#b48ead;">L</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">status</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">isOk</span><span style="color:#eff1f5;">())
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">view</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">name</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo/view</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">forwardedUrl</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">/WEB-INF/jsp/todo/view.jsp</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">model</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">attribute</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">hasProperty</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">id</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">is</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1</span><span style="color:#b48ead;">L</span><span style="color:#eff1f5;">))))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">model</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">attribute</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">hasProperty</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">description</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">is</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">Lorem ipsum</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">model</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">attribute</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">hasProperty</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">title</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">is</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">Foo</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))));
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">verify</span><span style="color:#eff1f5;">(todoServiceMock, </span><span style="color:#bf616a;">times</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1</span><span style="color:#eff1f5;">)).</span><span style="color:#bf616a;">findById</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1</span><span style="color:#b48ead;">L</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">verifyNoMoreInteractions</span><span style="color:#eff1f5;">(todoServiceMock);
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">}
</span><span style="color:#eff1f5;">}
</span></pre><h2 id="todoxiang-chuang-jian-biao-dan-qing-qiu-jie-kou"><a class="zola-anchor" href="#todoxiang-chuang-jian-biao-dan-qing-qiu-jie-kou" aria-label="Anchor link for: todoxiang-chuang-jian-biao-dan-qing-qiu-jie-kou">ğŸ”—</a>
<code>Todo</code>é¡¹åˆ›å»ºè¡¨å•è¯·æ±‚æ¥å£</h2>
<p>é¦–å…ˆçœ‹ä¸€ä¸‹è¯¥æ¥å£çš„å®ç°ä»£ç ã€‚</p>
<h3 id="yu-qi-de-shi-xian-2"><a class="zola-anchor" href="#yu-qi-de-shi-xian-2" aria-label="Anchor link for: yu-qi-de-shi-xian-2">ğŸ”—</a>
é¢„æœŸçš„å®ç°</h3>
<p>é¢„æœŸçš„æ¥å£åº”è¯¥åšä»¥ä¸‹å‡ ä»¶äº‹ï¼š</p>
<ol>
<li>æ¥æ”¶åˆ°&quot;/todo/add&quot;ä¸Šçš„POSTè¯·æ±‚ï¼Œå¼€å§‹å¤„ç†æµç¨‹</li>
<li>æ£€æµ‹è¡¨å•æ˜¯å¦æœ‰é”™è¯¯</li>
<li>è°ƒç”¨<code>TodoService</code>çš„<code>add()</code>æ–¹æ³•æ·»åŠ æŒ‡å®šçš„<code>Todo</code>é¡¹</li>
<li>å°†éœ€è¦çš„ä¿¡æ¯åŠ å…¥åˆ°modelä¸­</li>
<li>è¿”å›é‡å®šå‘çš„viewåç§°</li>
</ol>
<p><code>TodoController</code>ç±»å†…çš„ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.context.</span><span style="color:#ebcb8b;">MessageSource</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.context.i18n.</span><span style="color:#ebcb8b;">LocaleContextHolder</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.stereotype.</span><span style="color:#ebcb8b;">Controller</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.validation.</span><span style="color:#ebcb8b;">BindingResult</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.web.bind.annotation.*;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.web.servlet.mvc.support.</span><span style="color:#ebcb8b;">RedirectAttributes</span><span style="color:#c0c5ce;">;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">javax.validation.</span><span style="color:#ebcb8b;">Valid</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">java.util.</span><span style="color:#ebcb8b;">Locale</span><span style="color:#c0c5ce;">;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">Controller
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">SessionAttributes</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">todo</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">TodoController </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private final </span><span style="color:#ebcb8b;">TodoService </span><span style="color:#eff1f5;">service;
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private final </span><span style="color:#ebcb8b;">MessageSource </span><span style="color:#eff1f5;">messageSource;
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">RequestMapping</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">value </span><span style="color:#c0c5ce;">= &quot;</span><span style="color:#a3be8c;">/todo/add</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">method </span><span style="color:#c0c5ce;">= </span><span style="color:#ebcb8b;">RequestMethod</span><span style="color:#eff1f5;">.</span><span style="color:#d08770;">POST</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public </span><span style="color:#ebcb8b;">String </span><span style="color:#8fa1b3;">add</span><span style="color:#eff1f5;">(
</span><span style="color:#eff1f5;">        </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">Valid </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">ModelAttribute</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">) </span><span style="color:#ebcb8b;">TodoDTO </span><span style="color:#bf616a;">dto</span><span style="color:#eff1f5;">,
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">BindingResult </span><span style="color:#bf616a;">result</span><span style="color:#eff1f5;">,
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">RedirectAttributes </span><span style="color:#bf616a;">attributes
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">) {
</span><span style="color:#eff1f5;">        </span><span style="color:#b48ead;">if </span><span style="color:#eff1f5;">(result.</span><span style="color:#bf616a;">hasErrors</span><span style="color:#eff1f5;">()) {
</span><span style="color:#eff1f5;">            </span><span style="color:#b48ead;">return </span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo/add</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">        </span><span style="color:#eff1f5;">}
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">Todo</span><span style="color:#eff1f5;"> added </span><span style="color:#c0c5ce;">=</span><span style="color:#eff1f5;"> service.</span><span style="color:#bf616a;">add</span><span style="color:#eff1f5;">(dto);
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">addFeedbackMessage</span><span style="color:#eff1f5;">(attributes, </span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">feedback.message.todo.added</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, added.</span><span style="color:#bf616a;">getTitle</span><span style="color:#eff1f5;">());
</span><span style="color:#eff1f5;">        </span><span style="color:#eff1f5;">attributes.</span><span style="color:#bf616a;">addAttribute</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">id</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, added.</span><span style="color:#bf616a;">getId</span><span style="color:#eff1f5;">());
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">createRedirectViewPath</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo/view</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">}
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private void </span><span style="color:#8fa1b3;">addFeedbackMessage</span><span style="color:#eff1f5;">(
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">RedirectAttributes </span><span style="color:#bf616a;">attributes</span><span style="color:#eff1f5;">,
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">String </span><span style="color:#bf616a;">messageCode</span><span style="color:#eff1f5;">,
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">Object</span><span style="color:#c0c5ce;">... </span><span style="color:#bf616a;">messageParameters
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">) {
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">String</span><span style="color:#eff1f5;"> localizedFeedbackMessage </span><span style="color:#c0c5ce;">= </span><span style="color:#bf616a;">getMessage</span><span style="color:#eff1f5;">(messageCode, messageParameters);
</span><span style="color:#eff1f5;">        </span><span style="color:#eff1f5;">attributes.</span><span style="color:#bf616a;">addFlashAttribute</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">feedbackMessage</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, localizedFeedbackMessage);
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">}
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">String </span><span style="color:#8fa1b3;">getMessage</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">String </span><span style="color:#bf616a;">messageCode</span><span style="color:#eff1f5;">, </span><span style="color:#ebcb8b;">Object</span><span style="color:#c0c5ce;">... </span><span style="color:#bf616a;">messageParameters</span><span style="color:#eff1f5;">) {
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">Locale</span><span style="color:#eff1f5;"> current </span><span style="color:#c0c5ce;">= </span><span style="color:#ebcb8b;">LocaleContextHolder</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">getLocale</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">        </span><span style="color:#b48ead;">return</span><span style="color:#eff1f5;"> messageSource.</span><span style="color:#bf616a;">getMessage</span><span style="color:#eff1f5;">(messageCode, messageParameters, current);
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">}
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">String </span><span style="color:#8fa1b3;">createRedirectViewPath</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">String </span><span style="color:#bf616a;">requestMapping</span><span style="color:#eff1f5;">) {
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">StringBuilder</span><span style="color:#eff1f5;"> redirectViewPath </span><span style="color:#c0c5ce;">= </span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">StringBuilder</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">        </span><span style="color:#eff1f5;">redirectViewPath.</span><span style="color:#bf616a;">append</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">redirect:</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;">        </span><span style="color:#eff1f5;">redirectViewPath.</span><span style="color:#bf616a;">append</span><span style="color:#eff1f5;">(requestMapping);
</span><span style="color:#eff1f5;">        </span><span style="color:#b48ead;">return</span><span style="color:#eff1f5;"> redirectViewPath.</span><span style="color:#bf616a;">toString</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">}
</span><span style="color:#eff1f5;">}
</span></pre>
<p>æˆ‘ä»¬ä½¿ç”¨äº†<code>TodoDTO</code>ç±»æ¥å°è£…<code>Todo</code>é¡¹çš„åˆ›å»ºä¿¡æ¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.hibernate.validator.constraints.</span><span style="color:#ebcb8b;">Length</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.hibernate.validator.constraints.</span><span style="color:#ebcb8b;">NotEmpty</span><span style="color:#c0c5ce;">;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">TodoDTO </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">Long </span><span style="color:#eff1f5;">id;
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">Length</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">max </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">500</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">String </span><span style="color:#eff1f5;">description;
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">NotEmpty
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">Length</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">max </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">100</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">String </span><span style="color:#eff1f5;">title;
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">//Constructor and other methods are omitted.
</span><span style="color:#eff1f5;">}
</span></pre>
<p><code>TodoDTO</code>ç±»é‡Œé¢æœ‰ä¸€äº›æ ¡éªŒè§„åˆ™ï¼Œå¦‚æœä¸æ»¡è¶³è§„åˆ™ï¼ŒSpringåœ¨æ¥å£çš„<code>BindingResult</code>å‚æ•°é‡Œé¢ä¼šæ˜¾ç¤ºé”™è¯¯ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„æµ‹è¯•ç”¨ä¾‹éœ€è¦è€ƒè™‘ä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li>å‚æ•°æ ¡éªŒé€šè¿‡</li>
<li>å‚æ•°æ ¡éªŒæ²¡æœ‰é€šè¿‡</li>
</ul>
<p>æ¥ä¸‹æ¥å¯ä»¥å¼€å§‹ç¼–å†™æµ‹è¯•ç”¨ä¾‹äº†ã€‚</p>
<h3 id="ce-shi-yong-li-tododtocan-shu-xiao-yan-wei-tong-guo"><a class="zola-anchor" href="#ce-shi-yong-li-tododtocan-shu-xiao-yan-wei-tong-guo" aria-label="Anchor link for: ce-shi-yong-li-tododtocan-shu-xiao-yan-wei-tong-guo">ğŸ”—</a>
æµ‹è¯•ç”¨ä¾‹ï¼š<code>TodoDTO</code>å‚æ•°æ ¡éªŒæœªé€šè¿‡</h3>
<p>è¯¥æµ‹è¯•ç”¨ä¾‹ä¸»è¦å·¥ä½œå¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªä¸ç¬¦åˆéªŒè¯è§„åˆ™çš„title</li>
<li>åˆ›å»ºä¸€ä¸ªä¸ç¬¦åˆéªŒè¯è§„åˆ™çš„description</li>
<li>æ‰§è¡Œä¸€ä¸ª'/todo/add'çš„POSTè¯·æ±‚</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šHTTPè¿”å›ç æ˜¯200</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šviewçš„åç§°æ˜¯&quot;todo/add&quot;</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šè¯·æ±‚æ‹¿åˆ°çš„æ˜¯'/WEB-INF/jsp/todo/add.jsp'é¡µé¢</li>
</ol>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.junit.</span><span style="color:#ebcb8b;">Before</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.junit.</span><span style="color:#ebcb8b;">Test</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.junit.runner.</span><span style="color:#ebcb8b;">RunWith</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.mockito.</span><span style="color:#ebcb8b;">Mockito</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.beans.factory.annotation.</span><span style="color:#ebcb8b;">Autowired</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.http.</span><span style="color:#ebcb8b;">MediaType</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.context.</span><span style="color:#ebcb8b;">ContextConfiguration</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.context.junit4.</span><span style="color:#ebcb8b;">SpringJUnit4ClassRunner</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.context.web.</span><span style="color:#ebcb8b;">WebAppConfiguration</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.</span><span style="color:#ebcb8b;">MockMvc</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.setup.</span><span style="color:#ebcb8b;">MockMvcBuilders</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.web.context.</span><span style="color:#ebcb8b;">WebApplicationContext</span><span style="color:#c0c5ce;">;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.hamcrest.</span><span style="color:#ebcb8b;">Matchers</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">hasProperty</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.hamcrest.</span><span style="color:#ebcb8b;">Matchers</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">is</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.hamcrest.</span><span style="color:#ebcb8b;">Matchers</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">nullValue</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.mockito.</span><span style="color:#ebcb8b;">Mockito</span><span style="color:#c0c5ce;">.*;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.request.</span><span style="color:#ebcb8b;">MockMvcRequestBuilders</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">post</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.result.</span><span style="color:#ebcb8b;">MockMvcResultMatchers</span><span style="color:#c0c5ce;">.*;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">RunWith</span><span style="color:#c0c5ce;">(</span><span style="color:#ebcb8b;">SpringJUnit4ClassRunner</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">)
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">ContextConfiguration</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">classes </span><span style="color:#c0c5ce;">= {</span><span style="color:#ebcb8b;">TestContext</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">, </span><span style="color:#ebcb8b;">WebAppContext</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">})
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">WebAppConfiguration
</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">TodoControllerTest </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">MockMvc </span><span style="color:#eff1f5;">mockMvc;
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">Autowired
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">TodoService </span><span style="color:#eff1f5;">todoServiceMock;
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">//Add WebApplicationContext field here
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">//The setUp() method is omitted.
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">Test
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public void 
</span><span style="color:#eff1f5;">    </span><span style="color:#8fa1b3;">add_DescriptionAndTitleAreTooLong_ShouldRenderFormViewAndReturnValidationErrorsForTitleAndDescription</span><span style="color:#eff1f5;">()
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">throws </span><span style="color:#ebcb8b;">Exception </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">String</span><span style="color:#eff1f5;"> title </span><span style="color:#c0c5ce;">= </span><span style="color:#ebcb8b;">TestUtil</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">createStringWithLength</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">101</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">String</span><span style="color:#eff1f5;"> description </span><span style="color:#c0c5ce;">= </span><span style="color:#ebcb8b;">TestUtil</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">createStringWithLength</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">501</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#eff1f5;">mockMvc.</span><span style="color:#bf616a;">perform</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">post</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">/todo/add</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">contentType</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">MediaType</span><span style="color:#eff1f5;">.</span><span style="color:#d08770;">APPLICATION_FORM_URLENCODED</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">param</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">description</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, description)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">param</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">title</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, title)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">sessionAttr</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">TodoDTO</span><span style="color:#eff1f5;">())
</span><span style="color:#eff1f5;">        </span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">status</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">isOk</span><span style="color:#eff1f5;">())
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">view</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">name</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo/add</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">forwardedUrl</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">/WEB-INF/jsp/todo/add.jsp</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">model</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">attributeHasFieldErrors</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">title</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">model</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">attributeHasFieldErrors</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">description</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">model</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">attribute</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">hasProperty</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">id</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">nullValue</span><span style="color:#eff1f5;">())))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">model</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">attribute</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">hasProperty</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">description</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">is</span><span style="color:#eff1f5;">(description))))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">model</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">attribute</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">hasProperty</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">title</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">is</span><span style="color:#eff1f5;">(title))));
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">verifyZeroInteractions</span><span style="color:#eff1f5;">(todoServiceMock);
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">}
</span><span style="color:#eff1f5;">}
</span></pre>
<p>ä¸ºäº†ç®€åŒ–ä»£ç ï¼Œæˆ‘ä»¬æ–°å»ºäº†ä¸€ä¸ªæ–°çš„ç±»<code>TestUtil</code>ï¼Œç”¨æ¥ç”Ÿæˆå›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ã€‚<code>TestUtil</code>ç±»ä»£ç å¦‚ä¸‹ï¼š</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">com.fasterxml.jackson.annotation.</span><span style="color:#ebcb8b;">JsonInclude</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">com.fasterxml.jackson.databind.</span><span style="color:#ebcb8b;">ObjectMapper</span><span style="color:#c0c5ce;">;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">java.util.</span><span style="color:#ebcb8b;">Iterator</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">java.util.</span><span style="color:#ebcb8b;">Map</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">java.util.</span><span style="color:#ebcb8b;">Set</span><span style="color:#c0c5ce;">;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">TestUtil </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public static </span><span style="color:#ebcb8b;">String </span><span style="color:#8fa1b3;">createStringWithLength</span><span style="color:#eff1f5;">(</span><span style="color:#b48ead;">int </span><span style="color:#bf616a;">length</span><span style="color:#eff1f5;">) {
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">StringBuilder</span><span style="color:#eff1f5;"> builder </span><span style="color:#c0c5ce;">= </span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">StringBuilder</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#b48ead;">for </span><span style="color:#eff1f5;">(</span><span style="color:#b48ead;">int</span><span style="color:#eff1f5;"> index </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">0</span><span style="color:#eff1f5;">; index </span><span style="color:#c0c5ce;">&lt;</span><span style="color:#eff1f5;"> length; index</span><span style="color:#c0c5ce;">++</span><span style="color:#eff1f5;">) {
</span><span style="color:#eff1f5;">            </span><span style="color:#eff1f5;">builder.</span><span style="color:#bf616a;">append</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">a</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;">        </span><span style="color:#eff1f5;">}
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#b48ead;">return</span><span style="color:#eff1f5;"> builder.</span><span style="color:#bf616a;">toString</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">}
</span><span style="color:#eff1f5;">}
</span></pre><h3 id="ce-shi-yong-li-tododtocan-shu-xiao-yan-tong-guo"><a class="zola-anchor" href="#ce-shi-yong-li-tododtocan-shu-xiao-yan-tong-guo" aria-label="Anchor link for: ce-shi-yong-li-tododtocan-shu-xiao-yan-tong-guo">ğŸ”—</a>
æµ‹è¯•ç”¨ä¾‹ï¼š<code>TodoDTO</code>å‚æ•°æ ¡éªŒé€šè¿‡</h3>
<p>è¯¥æµ‹è¯•ç”¨ä¾‹ä¸»è¦å·¥ä½œå¦‚ä¸‹ï¼š</p>
<ol>
<li>å‡†å¤‡æµ‹è¯•æ•°æ®</li>
<li>é…ç½®mockçš„<code>TodoService</code>å®ä¾‹åœ¨<code>add()</code>æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™è¿”å›ä¸€ä¸ª<code>Todo</code>é¡¹</li>
<li>æ‰§è¡Œä¸€ä¸ª'/todo/add'çš„POSTè¯·æ±‚</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šHTTPè¿”å›ç æ˜¯302</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šviewçš„åç§°æ˜¯&quot;redirect:todo/{id}&quot;</li>
<li>å¯¹å“åº”ä½œæ–­è¨€ï¼šè¯·æ±‚è¢«é‡å®šå‘åˆ°&quot;todo/1&quot;</li>
<li>æ£€æŸ¥è¯·æ±‚æ‰§è¡Œè¿‡ç¨‹ä¸­mockçš„<code>TodoService</code>å®ä¾‹æ‰§è¡Œäº†<code>add()</code>æ–¹æ³•æœ‰ä¸”ä»…1æ¬¡</li>
<li>æ£€æŸ¥è¯·æ±‚æ‰§è¡Œè¿‡ç¨‹ä¸­mockçš„<code>TodoService</code>å®ä¾‹æœªæ‰§è¡Œå…¶ä»–æ–¹æ³•</li>
</ol>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.junit.</span><span style="color:#ebcb8b;">Before</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.junit.</span><span style="color:#ebcb8b;">Test</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.junit.runner.</span><span style="color:#ebcb8b;">RunWith</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.mockito.</span><span style="color:#ebcb8b;">ArgumentCaptor</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.mockito.</span><span style="color:#ebcb8b;">Mockito</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.beans.factory.annotation.</span><span style="color:#ebcb8b;">Autowired</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.http.</span><span style="color:#ebcb8b;">MediaType</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.context.</span><span style="color:#ebcb8b;">ContextConfiguration</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.context.junit4.</span><span style="color:#ebcb8b;">SpringJUnit4ClassRunner</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.context.web.</span><span style="color:#ebcb8b;">WebAppConfiguration</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.</span><span style="color:#ebcb8b;">MockMvc</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.setup.</span><span style="color:#ebcb8b;">MockMvcBuilders</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import </span><span style="color:#c0c5ce;">org.springframework.web.context.</span><span style="color:#ebcb8b;">WebApplicationContext</span><span style="color:#c0c5ce;">;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.hamcrest.</span><span style="color:#ebcb8b;">Matchers</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">is</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.junit.</span><span style="color:#ebcb8b;">Assert</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">assertNull</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.junit.</span><span style="color:#ebcb8b;">Assert</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">assertThat</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.mockito.</span><span style="color:#ebcb8b;">Matchers</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">isA</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.mockito.</span><span style="color:#ebcb8b;">Mockito</span><span style="color:#c0c5ce;">.*;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.request.</span><span style="color:#ebcb8b;">MockMvcRequestBuilders</span><span style="color:#c0c5ce;">.</span><span style="color:#96b5b4;">post</span><span style="color:#c0c5ce;">;
</span><span style="color:#b48ead;">import static </span><span style="color:#c0c5ce;">org.springframework.test.web.servlet.result.</span><span style="color:#ebcb8b;">MockMvcResultMatchers</span><span style="color:#c0c5ce;">.*;
</span><span style="color:#c0c5ce;"> </span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">RunWith</span><span style="color:#c0c5ce;">(</span><span style="color:#ebcb8b;">SpringJUnit4ClassRunner</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">)
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">ContextConfiguration</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">classes </span><span style="color:#c0c5ce;">= {</span><span style="color:#ebcb8b;">TestContext</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">, </span><span style="color:#ebcb8b;">WebAppContext</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">class</span><span style="color:#c0c5ce;">})
</span><span style="color:#c0c5ce;">@</span><span style="color:#bf616a;">WebAppConfiguration
</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">TodoControllerTest </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">MockMvc </span><span style="color:#eff1f5;">mockMvc;
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">Autowired
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private </span><span style="color:#ebcb8b;">TodoService </span><span style="color:#eff1f5;">todoServiceMock;
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">//Add WebApplicationContext field here
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">//The setUp() method is omitted.
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">@</span><span style="color:#bf616a;">Test
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public void </span><span style="color:#8fa1b3;">add_NewTodoEntry_ShouldAddTodoEntryAndRenderViewTodoEntryView</span><span style="color:#eff1f5;">() </span><span style="color:#b48ead;">throws </span><span style="color:#ebcb8b;">Exception </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">Todo</span><span style="color:#eff1f5;"> added </span><span style="color:#c0c5ce;">= </span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">TodoBuilder</span><span style="color:#eff1f5;">()
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">id</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1</span><span style="color:#b48ead;">L</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">description</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">description</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">title</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">title</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">build</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">when</span><span style="color:#eff1f5;">(todoServiceMock.</span><span style="color:#bf616a;">add</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">isA</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">TodoDTO</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">class</span><span style="color:#eff1f5;">))).</span><span style="color:#bf616a;">thenReturn</span><span style="color:#eff1f5;">(added);
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#eff1f5;">mockMvc.</span><span style="color:#bf616a;">perform</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">post</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">/todo/add</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">contentType</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">MediaType</span><span style="color:#eff1f5;">.</span><span style="color:#d08770;">APPLICATION_FORM_URLENCODED</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">param</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">description</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">description</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">param</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">title</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">title</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">sessionAttr</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">todo</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">TodoDTO</span><span style="color:#eff1f5;">())
</span><span style="color:#eff1f5;">        </span><span style="color:#eff1f5;">)
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">status</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">isMovedTemporarily</span><span style="color:#eff1f5;">())
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">view</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">name</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">redirect:todo/{id}</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">redirectedUrl</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">/todo/1</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">model</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">attribute</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">id</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">is</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">1</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)))
</span><span style="color:#eff1f5;">                </span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">andExpect</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">flash</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">attribute</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">feedbackMessage</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">is</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">Todo entry: title was added.</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">)));
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">ArgumentCaptor</span><span style="color:#eff1f5;">&lt;</span><span style="color:#ebcb8b;">TodoDTO</span><span style="color:#eff1f5;">&gt; formObjectArgument </span><span style="color:#c0c5ce;">= </span><span style="color:#ebcb8b;">ArgumentCaptor</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">forClass</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">TodoDTO</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">class</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">verify</span><span style="color:#eff1f5;">(todoServiceMock, </span><span style="color:#bf616a;">times</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1</span><span style="color:#eff1f5;">)).</span><span style="color:#bf616a;">add</span><span style="color:#eff1f5;">(formObjectArgument.</span><span style="color:#bf616a;">capture</span><span style="color:#eff1f5;">());
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">verifyNoMoreInteractions</span><span style="color:#eff1f5;">(todoServiceMock);
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">TodoDTO</span><span style="color:#eff1f5;"> formObject </span><span style="color:#c0c5ce;">=</span><span style="color:#eff1f5;"> formObjectArgument.</span><span style="color:#bf616a;">getValue</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;"> </span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">assertThat</span><span style="color:#eff1f5;">(formObject.</span><span style="color:#bf616a;">getDescription</span><span style="color:#eff1f5;">(), </span><span style="color:#bf616a;">is</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">description</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">));
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">assertNull</span><span style="color:#eff1f5;">(formObject.</span><span style="color:#bf616a;">getId</span><span style="color:#eff1f5;">());
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">assertThat</span><span style="color:#eff1f5;">(formObject.</span><span style="color:#bf616a;">getTitle</span><span style="color:#eff1f5;">(), </span><span style="color:#bf616a;">is</span><span style="color:#eff1f5;">(</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#a3be8c;">title</span><span style="color:#c0c5ce;">&quot;</span><span style="color:#eff1f5;">));
</span><span style="color:#eff1f5;">    </span><span style="color:#eff1f5;">}
</span><span style="color:#eff1f5;">}
</span></pre><h1 id="zong-jie"><a class="zola-anchor" href="#zong-jie" aria-label="Anchor link for: zong-jie">ğŸ”—</a>
æ€»ç»“</h1>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨Spring MVC Testæ¥å¯¹æ ‡å‡†controllerè¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>å¦‚ä½•åˆ›å»ºä¸€ä¸ªè¯·æ±‚</li>
<li>å¦‚ä½•å¯¹è¯·æ±‚çš„å“åº”ä½œæ–­è¨€</li>
<li>å¦‚ä½•å•å…ƒæµ‹è¯•ä¸€ä¸ªæ¸²æŸ“viewçš„æ¥å£</li>
<li>å¦‚ä½•å•å…ƒæµ‹è¯•ä¸€ä¸ªå¤„ç†è¡¨å•è¯·æ±‚çš„æ¥å£</li>
</ul>
<p>ä¸‹ä¸€ç¯‡æ˜¯ä»‹ç»<a href="https://www.wangbo.im/posts/spring-mvc-testing-unit-testing-rest-api/">Spring MVC Unit Testing - REST API</a>ã€‚</p>
<p>æœ¬æ–‡ä½¿ç”¨çš„ä»£ç å·²ç»æ”¾åœ¨äº† <a href="https://github.com/pkainulainen/spring-mvc-test-examples/tree/master/controllers-unittest">Github</a> ä¸Šï¼Œè¯·è‡ªè¡ŒæŸ¥é˜…ã€‚</p>

    </div>

    
    

    <div class="post-footer">
        
            
                <div class="post-tags">
                    
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;spring-mvc&#x2F;">#Spring MVC</a>
                    
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;testing&#x2F;">#testing</a>
                    
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;java&#x2F;">#java</a>
                    
                </div>
            
            
                <div class="post-nav">
                    
                        <a class="previous" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;spring-mvc-testing-unit-testing-configuration&#x2F;">â€¹ Spring MVC Unit Testing - Configuration</a>
                    
                    
                        <a class="next" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;spring-mvc-testing-unit-testing-rest-api&#x2F;">Spring MVC Unit Testing - REST API â€º</a>
                    
                    
                    
                </div>
            

        

    </div>

    
    
</article>


                </div>
            </main>

            
            
        </div>

      
          <script type="text/javascript" src="https:&#x2F;&#x2F;www.wangbo.im&#x2F;even.js" ></script>
      
    </body>

</html>
