<!DOCTYPE html>
<html lang="en">
    <head>
    <title>Learning Java Concurrency - Semaphore - Elvis Wang</title>
    
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="wangboâ€™s home &amp; blog"/>

    <meta property="og:title" content="
    wangboâ€™s blog -&nbsp;Learning Java Concurrency - Semaphore" />
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;2016-03-30-learning-java-concurrent-semaphore&#x2F;"/>
    <meta property="og:description" content="&lt;p&gt;Semaphoreï¼Œä¿¡å·é‡ã€‚ä¿¡å·é‡å¯ä»¥ç†è§£ä¸ºä»¤ç‰ŒæŒç‰Œä½¿ï¼Œè´Ÿè´£ä»¤ç‰Œçš„å‘æ”¾ï¼›å½“çº¿ç¨‹éœ€è¦æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œå…ˆåˆ°ä¿¡å·é‡å¤„é¢†å–ä»¤ç‰Œï¼Œé¢†å–åˆ°äº†ä»¤ç‰Œå†å»æ‰§è¡Œä»»åŠ¡ï¼›å¦‚æœä»¤ç‰Œè¢«é¢†å…‰äº†ï¼Œå°±éœ€è¦ä¸€ç›´ç­‰å¾…ï¼›å¦‚æœä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œéœ€è¦åˆ°ä¿¡å·é‡å¤„äº¤è¿˜ä»¤ç‰Œã€‚å¾ˆç®€å•çš„é€»è¾‘ï¼&lt;&#x2F;p&gt;
&lt;p&gt;è¿˜æ˜¯åƒä¸ªæ —å­ï¼Œåœ°é“é‡Œé¢å…¬å•ï¼Œä¸€èˆ¬ä¹Ÿå°±3ã€4ä¸ªå‘ä½ã€‚äººæœ‰ä¸‰æ€¥ï¼Œå½“ä½ æœ‰éœ€è¦çš„æ—¶å€™ï¼Œè¿˜å¿…é¡»å¾—é è¿™ä¸ªè§£å†³ã€‚è¿™â€¦"/>
    <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;style.css">
    <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;color&#x2F;red.css">
<link rel="shortcut icon" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;favicon.ico" type="image/x-icon" /></head>
    <body>
        <div class="container full">
<header class="header">
    <div class="header__inner">
        <div class="header__logo">
            <a href="&#x2F;">
    <div class="logo">
        WB Prime
    </div>
</a>
        </div>
        <div class="menu-trigger">menu</div>
    </div>
    
    <nav class="menu">
        <ul class="menu__inner menu__inner--desktop">
            
            
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">About</a>
                    </li>
                
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">Categories</a>
                    </li>
                
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">Tags</a>
                    </li>
                
            </ul>

        <ul class="menu__inner menu__inner--mobile">
            
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">About</a>
        </li>
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">Categories</a>
        </li>
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">Tags</a>
        </li>
        </ul>
    </nav>

    </header>
<div class="content"><div class="post">
        <h1 class="post-title">
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;2016-03-30-learning-java-concurrent-semaphore&#x2F;">Learning Java Concurrency - Semaphore</a>
        </h1>
        
    <div class="post-meta">
        <span class="post-date">2016.03.30
                </span>

        <span class="post-author"></span>

        

    
    :: {<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories&#x2F;learning-java-concurrency&#x2F;">Learning Java Concurrency</a>} 

            
    ::
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;java&#x2F;">java</a>
        
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;concurrency&#x2F;">concurrency</a>
        
    
            
        
    </div>



        

        <div class="post-content">
            <p>Semaphoreï¼Œä¿¡å·é‡ã€‚ä¿¡å·é‡å¯ä»¥ç†è§£ä¸ºä»¤ç‰ŒæŒç‰Œä½¿ï¼Œè´Ÿè´£ä»¤ç‰Œçš„å‘æ”¾ï¼›å½“çº¿ç¨‹éœ€è¦æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œå…ˆåˆ°ä¿¡å·é‡å¤„é¢†å–ä»¤ç‰Œï¼Œé¢†å–åˆ°äº†ä»¤ç‰Œå†å»æ‰§è¡Œä»»åŠ¡ï¼›å¦‚æœä»¤ç‰Œè¢«é¢†å…‰äº†ï¼Œå°±éœ€è¦ä¸€ç›´ç­‰å¾…ï¼›å¦‚æœä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œéœ€è¦åˆ°ä¿¡å·é‡å¤„äº¤è¿˜ä»¤ç‰Œã€‚å¾ˆç®€å•çš„é€»è¾‘ï¼</p>
<p>è¿˜æ˜¯åƒä¸ªæ —å­ï¼Œåœ°é“é‡Œé¢å…¬å•ï¼Œä¸€èˆ¬ä¹Ÿå°±3ã€4ä¸ªå‘ä½ã€‚äººæœ‰ä¸‰æ€¥ï¼Œå½“ä½ æœ‰éœ€è¦çš„æ—¶å€™ï¼Œè¿˜å¿…é¡»å¾—é è¿™ä¸ªè§£å†³ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœå…¬å•é‡Œæ²¡æœ‰äººï¼Œæˆ–è€…è¿˜å‰©æœ€åä¸€ä¸ªå‘ä½ï¼Œé‚£å°±å•¥ä¹Ÿåˆ«è¯´äº†ï¼Œè¿›å»å§ã€‚ä½†æ˜¯ï¼Œå¦‚æœï¼Œæ»¡äº†ã€‚å°±ï¼Œåªæœ‰ï¼Œç­‰ï¼Œäº†ã€‚ä¸ç€æ€¥å¯ä»¥ç­‰ä¸€ç­‰ï¼›å®åœ¨æ†‹ä¸ä½çš„ï¼Œå¯ä»¥å‚¬ä¸€å‚¬ã€‚ä½†æ˜¯ä¸ç®¡æ€¥ä¸æ€¥ï¼Œéƒ½è¦ç­‰é‡Œé¢éšä¾¿ä¸€ä¸ªé‡Œé¢å‡ºæ¥äººäº†æ‰èƒ½è¿›å»ã€‚è¿™ä¸ªå°±æ˜¯å…¸å‹çš„ä¿¡å·é‡ã€‚</p>
<p>è¿˜æœ‰å°±æ˜¯éå¸¸å…¸å‹çš„ç”Ÿäº§è€…/æ¶ˆè´¹è€…é—®é¢˜äº†ã€‚æœ‰ä¸€ä¸ªä»“åº“ï¼Œé‡Œé¢çš„ä»“ä½æ˜¯æœ‰é™çš„ã€‚ç”Ÿäº§è€…åªæœ‰å½“ä»“åº“é‡Œé¢æœ‰ç©ºä»“ä½æ—¶æ‰èƒ½è¿›è¡Œç”Ÿäº§ï¼›å¦‚æœæ²¡æœ‰ç©ºä»“ä½ï¼Œåˆ™éœ€è¦ç­‰å¾…ï¼›å¦‚æœç”Ÿäº§äº†ä¸€æ¬¡ï¼Œåˆ™ä»“åº“å°‘äº†ä¸€ä¸ªç©ºä»“ä½ã€‚æ¶ˆè´¹è€…åªæœ‰å½“ä»“åº“é‡Œæœ‰éç©ºä»“ä½æ—¶æ‰èƒ½æ¶ˆè´¹ï¼›å¦‚æœæ²¡æœ‰éç©ºä»“ä½ï¼Œå°±éœ€è¦ç­‰å¾…ï¼›å¦‚æœæ¶ˆè´¹äº†ä¸€æ¬¡ï¼Œä»“åº“é‡Œå¤šäº†ä¸€ä¸ªç©ºä»“ä½ã€‚</p>
<p><a name="continue-reading"></a></p>
<h1 id="semaphorede-jian-dan-shi-yong"><a class="zola-anchor" href="#semaphorede-jian-dan-shi-yong" aria-label="Anchor link for: semaphorede-jian-dan-shi-yong">ğŸ”—</a>
Semaphoreçš„ç®€å•å®ç”¨</h1>
<p>é¦–å…ˆï¼Œåˆå§‹åŒ–ä¿¡å·é‡æ§åˆ¶çš„ä»¤ç‰Œçš„ä¸ªæ•°ã€‚</p>
<p>ç„¶åï¼Œæ¶ˆè´¹è€…å»ç”³è¯·ä»¤ç‰Œï¼Œå¯èƒ½ç”³è¯·åˆ°ï¼Œä¹Ÿå¯èƒ½è¢«é˜»å¡ã€‚</p>
<p>ç„¶åï¼Œç”Ÿäº§è€…å»é‡Šæ”¾ä»¤ç‰Œã€‚</p>
<p>ç„¶åï¼Œäº¤äº’å°±å¯ä»¥å¼€å§‹äº†ã€‚</p>
<p>æ³¨æ„ï¼Œä¿¡å·é‡åªæ˜¯ä¿è¯èµ„æºçš„å¯ç”¨æ€§ï¼Œå½“èµ„æºä¸å¯ç”¨æ—¶ï¼Œé˜»å¡çº¿ç¨‹ï¼›ç„¶è€Œçº¿ç¨‹ä½¿ç”¨èµ„æºçš„è¿‡ç¨‹ä¸ä¿è¯æ˜¯åŸå­çš„ï¼Œéœ€è¦å¦å¤–åŠ é”æ§åˆ¶ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œä½ æˆåŠŸç”³è¯·åˆ°äº†ä»¤ç‰Œå¼€å§‹æ‰§è¡Œä»»åŠ¡ï¼Œä½†æ˜¯è¿™ä¸ªä»»åŠ¡å¯èƒ½å¤±è´¥ï¼Œå¯èƒ½æˆåŠŸï¼Œè¿˜æœ‰å¯èƒ½éƒ¨åˆ†æˆåŠŸéƒ¨åˆ†å¤±è´¥ã€‚</p>
<h1 id="semaphorede-api"><a class="zola-anchor" href="#semaphorede-api" aria-label="Anchor link for: semaphorede-api">ğŸ”—</a>
Semaphoreçš„API</h1>
<ol>
<li>Semaphore(int permits) &amp; Semaphore(int permits, boolean fair)
æ„é€ ä¸€ä¸ªä¿¡å·é‡å®ä¾‹ï¼ˆå¯ä»¥æ˜¯å…¬å¹³çš„æˆ–è€…éå…¬å¹³çš„ï¼‰ï¼Œé»˜è®¤æ˜¯éå…¬å¹³çš„ã€‚</li>
<li>void acquire() throws InterruptedException
ç”³è¯·ä¸€æšä»¤ç‰Œï¼›å¦‚æœæ²¡æœ‰å¯ç”¨ä»¤ç‰Œï¼Œåˆ™é˜»å¡ã€‚</li>
<li>void acquireUninterruptibly()
åŒä¸Šï¼›å½“è°ƒç”¨çº¿ç¨‹è¢«ä¸­æ–­æ—¶ï¼Œä¸æŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>void acquire(int permits) throws InterruptedException
ç”³è¯·å¤šæšä»¤ç‰Œï¼›å¦‚æœæ²¡æœ‰å¯ç”¨ä»¤ç‰Œï¼Œåˆ™é˜»å¡ã€‚</li>
<li>void acquireUninterruptibly(int permits)
åŒä¸Šï¼›å½“è°ƒç”¨çº¿ç¨‹è¢«ä¸­æ–­æ—¶ï¼Œä¸æŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>boolean tryAcquire()
ç”³è¯·ä¸€æšä»¤ç‰Œï¼›ç«‹å³è¿”å›ï¼Œç”³è¯·æˆåŠŸè¿”å›trueï¼Œåä¹‹falseã€‚</li>
<li>boolean tryAcquire(int permits)
ç”³è¯·å¤šæšä»¤ç‰Œï¼›ç«‹å³è¿”å›ï¼Œç”³è¯·æˆåŠŸè¿”å›trueï¼Œåä¹‹falseã€‚</li>
<li>boolean tryAcquire(long timeout, TimeUnit unit) throws TimeoutException
ç”³è¯·ä¸€æšä»¤ç‰Œï¼Œä¸å…è®¸è¶…æ—¶ï¼›ç«‹å³è¿”å›ï¼Œç”³è¯·æˆåŠŸè¿”å›trueï¼Œåä¹‹falseã€‚</li>
<li>boolean tryAcquire(int permits, long timeout, TimeUnit unit) throws TimeoutException
ç”³è¯·å¤šæšä»¤ç‰Œï¼Œä¸å…è®¸è¶…æ—¶ï¼›ç«‹å³è¿”å›ï¼Œç”³è¯·æˆåŠŸè¿”å›trueï¼Œåä¹‹falseã€‚</li>
<li>void release()
å½’è¿˜ä¸€æšä»¤ç‰Œã€‚</li>
<li>void release(int permits)
å½’è¿˜å¤šæšä»¤ç‰Œã€‚</li>
<li>int availablePermits()
å½“å‰å¯ç”¨çš„ä»¤ç‰Œæ•°ã€‚</li>
<li>int drainPermits()
ç”³è¯·è·å–æ‰€æœ‰å¯ç”¨ä»¤ç‰Œï¼Œè¿”å›ç”³è¯·åˆ°çš„ä»¤ç‰Œæ•°ã€‚</li>
<li>boolean isFair()
æ˜¯å¦å…¬å¹³ã€‚</li>
</ol>
<p>Semaphoreå†…éƒ¨æœ‰ä¸€ä¸ªé™æ€ç±»Syncæ¥å®ç°å…¬å¹³ç­–ç•¥ï¼ŒNonFairSyncæ¥å®ç°éå…¬å¹³ç­–ç•¥ã€‚</p>
<pre style="background-color:#282828;">
<span style="color:#fa5c4b;">static class </span><span style="color:#8ec07c;">Sync </span><span style="color:#fa5c4b;">extends </span><span style="color:#8ec07c;">AbstractQueuedSynchronizer
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">...
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fa5c4b;">static final class </span><span style="color:#8ec07c;">NonfairSync </span><span style="color:#fa5c4b;">extends </span><span style="color:#8ec07c;">Sync
</span></pre>
<p>å…¬å¹³ä¸éå…¬å¹³çš„åŒºåˆ«åœ¨äºç”³è¯·ä»¤ç‰Œçš„è°ƒç”¨ä¸­æ˜¯å¦å¯ä»¥æ’é˜Ÿã€‚å…¬å¹³çš„ç­–ç•¥æ˜¯å°†æ‰€æœ‰çº¿ç¨‹æ”¾å…¥ä¸€ä¸ªFIFOé˜Ÿåˆ—ï¼ŒæŒ‰ç…§å‡ºé˜Ÿé¡ºåºåˆ†é…ä»¤ç‰Œï¼›éå…¬å¹³ç­–ç•¥æ˜¯å¦‚æœç”³è¯·çš„æ—¶å€™æœ‰æ–°çš„é‡Šæ”¾å‡ºæ¥çš„ä»¤ç‰Œï¼Œç›´æ¥è·å–ï¼Œä¸éœ€è¦æ’é˜Ÿã€‚ç”±äºçº¿ç¨‹é˜»å¡ç„¶åè¢«å”¤é†’çš„å¼€é”€å¯èƒ½ä¼šæ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥éå…¬å¹³å¯èƒ½ä¼šæ¯”å…¬å¹³ç­–ç•¥æœ‰æ½œåœ¨çš„æ›´é«˜çš„æ€§èƒ½ã€‚</p>
<p>å…¬å¹³ä¸éå…¬å¹³ç­–ç•¥åªå½±å“ç”³è¯·ä»¤ç‰Œæ—¶çš„æ“ä½œï¼›å¦‚æœå·²ç»è¢«æ”¾å…¥äº†ç­‰å¾…é˜Ÿåˆ—ï¼Œåˆ™å…¬å¹³ä¸éå…¬å¹³æ²¡æœ‰åŒºåˆ«ã€‚</p>
<h1 id="shi-li-dai-ma"><a class="zola-anchor" href="#shi-li-dai-ma" aria-label="Anchor link for: shi-li-dai-ma">ğŸ”—</a>
ç¤ºä¾‹ä»£ç </h1>
<pre style="background-color:#282828;">
<span style="color:#fa5c4b;">package </span><span style="color:#8ec07c;">me.wbprime.showcase.concurrent</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fa5c4b;">import </span><span style="color:#fabd2f;">com</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fabd2f;">google</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fabd2f;">common</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fabd2f;">collect</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">Lists</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fa5c4b;">import </span><span style="color:#fabd2f;">java</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fabd2f;">util</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">List</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fa5c4b;">import </span><span style="color:#fabd2f;">java</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fabd2f;">util</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fabd2f;">concurrent</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">ExecutorService</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fa5c4b;">import </span><span style="color:#fabd2f;">java</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fabd2f;">util</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fabd2f;">concurrent</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">Executors</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fa5c4b;">import </span><span style="color:#fabd2f;">java</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fabd2f;">util</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fabd2f;">concurrent</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">Semaphore</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fa5c4b;">import </span><span style="color:#fabd2f;">java</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fabd2f;">util</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fabd2f;">concurrent</span><span style="color:#fdf4c1aa;">.</span><span style="color:#8ec07c;">TimeUnit</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="font-style:italic;color:#928374;">/**
</span><span style="font-style:italic;color:#928374;"> </span><span style="font-style:italic;color:#928374;">* Class: SemaphoreCase
</span><span style="font-style:italic;color:#928374;"> </span><span style="font-style:italic;color:#928374;">* Date: 2016/03/30 18:15
</span><span style="font-style:italic;color:#928374;"> </span><span style="font-style:italic;color:#928374;">*/
</span><span style="color:#fa5c4b;">public final class </span><span style="color:#8ec07c;">SemaphoreCase </span><span style="color:#fdf4c1aa;">{
</span><span style="color:#fdf4c1aa;">    </span><span style="color:#fa5c4b;">private static class </span><span style="color:#8ec07c;">Item </span><span style="color:#fdf4c1aa;">{
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">String </span><span style="color:#fdf4c1aa;">name;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">Item</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">int </span><span style="color:#fdf4c1;">idx</span><span style="color:#fdf4c1aa;">) {
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">name </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">String</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">format(</span><span style="color:#b8bb26;">&quot;%s %d&quot;</span><span style="color:#fdf4c1;">, </span><span style="color:#8ec07c;">Thread</span><span style="color:#fdf4c1;">.currentThread().getName(), idx)</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">public final </span><span style="color:#8ec07c;">String getName</span><span style="color:#fdf4c1aa;">() {
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> name;
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fdf4c1aa;">@</span><span style="color:#fdf4c1;">Override
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">String toString</span><span style="color:#fdf4c1aa;">() {
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fa5c4b;">return </span><span style="color:#fdf4c1;">getName()</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">    </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">    </span><span style="color:#fa5c4b;">private static class </span><span style="color:#8ec07c;">WareHouse </span><span style="color:#fdf4c1aa;">{
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">private final </span><span style="color:#8ec07c;">List</span><span style="color:#fdf4c1aa;">&lt;</span><span style="color:#8ec07c;">Item</span><span style="color:#fdf4c1aa;">&gt; items;
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">private final </span><span style="color:#8ec07c;">Semaphore </span><span style="color:#fdf4c1aa;">notFull;
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">private final </span><span style="color:#8ec07c;">Semaphore </span><span style="color:#fdf4c1aa;">notEmpty;
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">private final </span><span style="color:#8ec07c;">Semaphore </span><span style="color:#fdf4c1aa;">mutex;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">WareHouse</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final int </span><span style="color:#fdf4c1;">cnt</span><span style="color:#fdf4c1aa;">) {
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">items </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">Lists</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">newArrayListWithExpectedSize(cnt)</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1;">this</span><span style="color:#fdf4c1aa;">.notFull </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">Semaphore</span><span style="color:#fdf4c1aa;">(cnt);
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1;">this</span><span style="color:#fdf4c1aa;">.notEmpty </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">Semaphore</span><span style="color:#fdf4c1aa;">(</span><span style="color:#d3869b;">0</span><span style="color:#fdf4c1aa;">);
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1;">this</span><span style="color:#fdf4c1aa;">.mutex </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">Semaphore</span><span style="color:#fdf4c1aa;">(</span><span style="color:#d3869b;">1</span><span style="color:#fdf4c1aa;">);
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">String itemsString</span><span style="color:#fdf4c1aa;">() {
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> items.</span><span style="color:#fdf4c1;">toString()</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">public void </span><span style="color:#8ec07c;">put</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">Item </span><span style="color:#fdf4c1;">obj</span><span style="color:#fdf4c1aa;">) </span><span style="color:#fa5c4b;">throws </span><span style="color:#8ec07c;">InterruptedException </span><span style="color:#fdf4c1aa;">{
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fa5c4b;">if </span><span style="color:#fdf4c1aa;">(</span><span style="color:#d3869b;">null </span><span style="color:#fe8019;">!=</span><span style="color:#fdf4c1aa;"> obj) {
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">                </span><span style="font-style:italic;color:#928374;">/*
</span><span style="font-style:italic;color:#928374;">                 </span><span style="font-style:italic;color:#928374;">* è·å–éæ»¡çš„ä¿è¯
</span><span style="font-style:italic;color:#928374;">                 </span><span style="font-style:italic;color:#928374;">*
</span><span style="font-style:italic;color:#928374;">                 </span><span style="font-style:italic;color:#928374;">* å¦‚æœæ˜¯æ»¡çš„ï¼Œåˆ™æŒ‚èµ·
</span><span style="font-style:italic;color:#928374;">                 </span><span style="font-style:italic;color:#928374;">*/
</span><span style="color:#fdf4c1aa;">                </span><span style="color:#fdf4c1aa;">notFull.</span><span style="color:#fdf4c1;">acquire()</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">                </span><span style="font-style:italic;color:#928374;">/*
</span><span style="font-style:italic;color:#928374;">                 </span><span style="font-style:italic;color:#928374;">* è·å–å®¹å™¨æ“ä½œçš„ç‹¬å ä¿è¯
</span><span style="font-style:italic;color:#928374;">                 </span><span style="font-style:italic;color:#928374;">*/
</span><span style="color:#fdf4c1aa;">                </span><span style="color:#fdf4c1aa;">mutex.</span><span style="color:#fdf4c1;">acquire()</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">                </span><span style="color:#fdf4c1aa;">items.</span><span style="color:#fdf4c1;">add(obj)</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">                </span><span style="color:#8ec07c;">System</span><span style="color:#fdf4c1aa;">.out.</span><span style="color:#fdf4c1;">println(</span><span style="color:#b8bb26;">&quot;Put &quot; </span><span style="color:#fe8019;">+</span><span style="color:#fdf4c1;"> obj.getName())</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">                </span><span style="color:#8ec07c;">System</span><span style="color:#fdf4c1aa;">.out.</span><span style="color:#fdf4c1;">println(items.toString())</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">                </span><span style="font-style:italic;color:#928374;">/*
</span><span style="font-style:italic;color:#928374;">                 </span><span style="font-style:italic;color:#928374;">* ç»“æŸå®¹å™¨æ“ä½œ
</span><span style="font-style:italic;color:#928374;">                 </span><span style="font-style:italic;color:#928374;">*/
</span><span style="color:#fdf4c1aa;">                </span><span style="color:#fdf4c1aa;">mutex.</span><span style="color:#fdf4c1;">release()</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">                </span><span style="font-style:italic;color:#928374;">/*
</span><span style="font-style:italic;color:#928374;">                 </span><span style="font-style:italic;color:#928374;">* ä¿è¯éç©ºï¼Œå…è®¸takeæ“ä½œï¼ˆå”¤é†’æŒ‚èµ·çº¿ç¨‹ï¼‰
</span><span style="font-style:italic;color:#928374;">                 </span><span style="font-style:italic;color:#928374;">*/
</span><span style="color:#fdf4c1aa;">                </span><span style="color:#fdf4c1aa;">notEmpty.</span><span style="color:#fdf4c1;">release()</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">Item take</span><span style="color:#fdf4c1aa;">() </span><span style="color:#fa5c4b;">throws </span><span style="color:#8ec07c;">InterruptedException </span><span style="color:#fdf4c1aa;">{
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">            </span><span style="font-style:italic;color:#928374;">/*
</span><span style="font-style:italic;color:#928374;">             </span><span style="font-style:italic;color:#928374;">* è·å–éç©ºçš„ä¿è¯
</span><span style="font-style:italic;color:#928374;">             </span><span style="font-style:italic;color:#928374;">*
</span><span style="font-style:italic;color:#928374;">             </span><span style="font-style:italic;color:#928374;">* å¦‚æœæ˜¯ç©ºçš„ï¼Œåˆ™æŒ‚èµ·
</span><span style="font-style:italic;color:#928374;">             </span><span style="font-style:italic;color:#928374;">*/
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">notEmpty.</span><span style="color:#fdf4c1;">acquire()</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">            </span><span style="font-style:italic;color:#928374;">/*
</span><span style="font-style:italic;color:#928374;">             </span><span style="font-style:italic;color:#928374;">* è·å–å®¹å™¨æ“ä½œçš„ç‹¬å ä¿è¯
</span><span style="font-style:italic;color:#928374;">             </span><span style="font-style:italic;color:#928374;">*/
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">mutex.</span><span style="color:#fdf4c1;">acquire()</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fa5c4b;">final int</span><span style="color:#fdf4c1aa;"> lastIdx </span><span style="color:#fe8019;">=</span><span style="color:#fdf4c1aa;"> items.</span><span style="color:#fdf4c1;">size() </span><span style="color:#fe8019;">- </span><span style="color:#d3869b;">1</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">Item</span><span style="color:#fdf4c1aa;"> item </span><span style="color:#fe8019;">=</span><span style="color:#fdf4c1aa;"> items.</span><span style="color:#fdf4c1;">get(lastIdx)</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">items.</span><span style="color:#fdf4c1;">remove(lastIdx)</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#8ec07c;">System</span><span style="color:#fdf4c1aa;">.out.</span><span style="color:#fdf4c1;">println(</span><span style="color:#b8bb26;">&quot;Take &quot; </span><span style="color:#fe8019;">+</span><span style="color:#fdf4c1;"> item.getName())</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#8ec07c;">System</span><span style="color:#fdf4c1aa;">.out.</span><span style="color:#fdf4c1;">println(items.toString())</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">            </span><span style="font-style:italic;color:#928374;">/*
</span><span style="font-style:italic;color:#928374;">             </span><span style="font-style:italic;color:#928374;">* ç»“æŸå®¹å™¨æ“ä½œ
</span><span style="font-style:italic;color:#928374;">             </span><span style="font-style:italic;color:#928374;">*/
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">mutex.</span><span style="color:#fdf4c1;">release()</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">            </span><span style="font-style:italic;color:#928374;">/*
</span><span style="font-style:italic;color:#928374;">             </span><span style="font-style:italic;color:#928374;">* ä¿è¯éæ»¡ï¼Œå…è®¸putæ“ä½œï¼ˆå”¤é†’æŒ‚èµ·è¿›ç¨‹ï¼‰
</span><span style="font-style:italic;color:#928374;">             </span><span style="font-style:italic;color:#928374;">*/
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">notFull.</span><span style="color:#fdf4c1;">release()</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fa5c4b;">return</span><span style="color:#fdf4c1aa;"> item;
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">    </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">    </span><span style="color:#fa5c4b;">private static class </span><span style="color:#8ec07c;">Producer </span><span style="color:#fa5c4b;">implements </span><span style="color:#8ec07c;">Runnable </span><span style="color:#fdf4c1aa;">{
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">WareHouse </span><span style="color:#fdf4c1aa;">wareHouse;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">private int </span><span style="color:#fdf4c1aa;">i </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">0</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">Producer</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">WareHouse </span><span style="color:#fdf4c1;">s</span><span style="color:#fdf4c1aa;">) {
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">wareHouse </span><span style="color:#fe8019;">=</span><span style="color:#fdf4c1aa;"> s;
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">public void </span><span style="color:#8ec07c;">run</span><span style="color:#fdf4c1aa;">() {
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fa5c4b;">try </span><span style="color:#fdf4c1aa;">{
</span><span style="color:#fdf4c1aa;">                </span><span style="color:#fa5c4b;">while </span><span style="color:#fdf4c1aa;">(</span><span style="color:#d3869b;">true</span><span style="color:#fdf4c1aa;">) {
</span><span style="color:#fdf4c1aa;">                    </span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">Item</span><span style="color:#fdf4c1aa;"> itm </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">Item</span><span style="color:#fdf4c1aa;">(i</span><span style="color:#fe8019;">++</span><span style="color:#fdf4c1aa;">);
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">                    </span><span style="color:#fdf4c1aa;">wareHouse.</span><span style="color:#fdf4c1;">put(itm)</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">                    </span><span style="color:#8ec07c;">Thread</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">sleep(</span><span style="color:#d3869b;">1000</span><span style="color:#fdf4c1;">)</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">                </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">} </span><span style="color:#fa5c4b;">catch </span><span style="color:#fdf4c1aa;">(</span><span style="color:#8ec07c;">InterruptedException </span><span style="color:#fdf4c1;">e</span><span style="color:#fdf4c1aa;">) {
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">    </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">    </span><span style="color:#fa5c4b;">private static class </span><span style="color:#8ec07c;">Consumer </span><span style="color:#fa5c4b;">implements </span><span style="color:#8ec07c;">Runnable </span><span style="color:#fdf4c1aa;">{
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">private </span><span style="color:#8ec07c;">WareHouse </span><span style="color:#fdf4c1aa;">wareHouse;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">public </span><span style="color:#8ec07c;">Consumer</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">WareHouse </span><span style="color:#fdf4c1;">s</span><span style="color:#fdf4c1aa;">) {
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">wareHouse </span><span style="color:#fe8019;">=</span><span style="color:#fdf4c1aa;"> s;
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">public void </span><span style="color:#8ec07c;">run</span><span style="color:#fdf4c1aa;">() {
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fa5c4b;">try </span><span style="color:#fdf4c1aa;">{
</span><span style="color:#fdf4c1aa;">                </span><span style="color:#fa5c4b;">while </span><span style="color:#fdf4c1aa;">(</span><span style="color:#d3869b;">true</span><span style="color:#fdf4c1aa;">) {
</span><span style="color:#fdf4c1aa;">                    </span><span style="color:#fdf4c1aa;">wareHouse.</span><span style="color:#fdf4c1;">take()</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">                    </span><span style="color:#8ec07c;">Thread</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">sleep(</span><span style="color:#d3869b;">1500</span><span style="color:#fdf4c1;">)</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">                </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">} </span><span style="color:#fa5c4b;">catch </span><span style="color:#fdf4c1aa;">(</span><span style="color:#8ec07c;">InterruptedException </span><span style="color:#fdf4c1;">e</span><span style="color:#fdf4c1aa;">) {
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">    </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">    </span><span style="color:#fa5c4b;">public static void </span><span style="color:#8ec07c;">main</span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">String</span><span style="color:#fa5c4b;">[] </span><span style="color:#fdf4c1;">args</span><span style="color:#fdf4c1aa;">) {
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">WareHouse</span><span style="color:#fdf4c1aa;"> wareHouse </span><span style="color:#fe8019;">= </span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">WareHouse</span><span style="color:#fdf4c1aa;">(</span><span style="color:#d3869b;">5</span><span style="color:#fdf4c1aa;">);
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">final </span><span style="color:#8ec07c;">ExecutorService</span><span style="color:#fdf4c1aa;"> executor </span><span style="color:#fe8019;">= </span><span style="color:#8ec07c;">Executors</span><span style="color:#fdf4c1aa;">.</span><span style="color:#fdf4c1;">newCachedThreadPool()</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">final int</span><span style="color:#fdf4c1aa;"> countOfConsumers </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">3</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">final int</span><span style="color:#fdf4c1aa;"> countOfProducers </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">5</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">for </span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">int</span><span style="color:#fdf4c1aa;"> i </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">0</span><span style="color:#fdf4c1aa;">; i </span><span style="color:#fe8019;">&lt;</span><span style="color:#fdf4c1aa;"> countOfProducers; i</span><span style="color:#fe8019;">++</span><span style="color:#fdf4c1aa;">) {
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">executor.</span><span style="color:#fdf4c1;">execute(</span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">Producer</span><span style="color:#fdf4c1;">(wareHouse))</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fa5c4b;">for </span><span style="color:#fdf4c1aa;">(</span><span style="color:#fa5c4b;">int</span><span style="color:#fdf4c1aa;"> i </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">0</span><span style="color:#fdf4c1aa;">; i </span><span style="color:#fe8019;">&lt;</span><span style="color:#fdf4c1aa;"> countOfConsumers; i</span><span style="color:#fe8019;">++</span><span style="color:#fdf4c1aa;">) {
</span><span style="color:#fdf4c1aa;">            </span><span style="color:#fdf4c1aa;">executor.</span><span style="color:#fdf4c1;">execute(</span><span style="color:#fa5c4b;">new </span><span style="color:#8ec07c;">Consumer</span><span style="color:#fdf4c1;">(wareHouse))</span><span style="color:#fdf4c1aa;">;
</span><span style="color:#fdf4c1aa;">        </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">
</span><span style="font-style:italic;color:#928374;">//        try {
</span><span style="font-style:italic;color:#928374;">//            executor.awaitTermination(1, TimeUnit.MINUTES);
</span><span style="font-style:italic;color:#928374;">//        } catch (InterruptedException e) {
</span><span style="font-style:italic;color:#928374;">//            executor.shutdown();
</span><span style="font-style:italic;color:#928374;">//        }
</span><span style="color:#fdf4c1aa;">    </span><span style="color:#fdf4c1aa;">}
</span><span style="color:#fdf4c1aa;">}
</span></pre><h1 id="shi-li-dai-ma-shuo-ming"><a class="zola-anchor" href="#shi-li-dai-ma-shuo-ming" aria-label="Anchor link for: shi-li-dai-ma-shuo-ming">ğŸ”—</a>
ç¤ºä¾‹ä»£ç è¯´æ˜</h1>
<ol>
<li>
<p>å…¸å‹çš„ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å‹ï¼ŒWareHouseç±»è¡¨å¾ä»“åº“ï¼ŒConsumerç±»è¡¨å¾æ¶ˆè´¹è€…ï¼ŒProducerç±»è¡¨å¾ç”Ÿäº§è€…ã€‚</p>
</li>
<li>
<p>notFullä¿¡å·é‡è´Ÿè´£å‘æ”¾ç”Ÿäº§ä»¤ç‰Œï¼Œç”±ç”Ÿäº§è€…acquireï¼Œæ¶ˆè´¹è€…releaseã€‚</p>
</li>
<li>
<p>notEmptyä¿¡å·é‡è´Ÿè´£å‘æ”¾æ¶ˆè´¹ä»¤ç‰Œï¼Œç”±æ¶ˆè´¹è€…acquireï¼Œç”Ÿäº§è€…releaseã€‚</p>
</li>
<li>
<p>mutexä¿¡å·é‡è¡¨ç¤ºç”Ÿäº§å’Œæ¶ˆè´¹çš„äº’æ–¥ï¼Œç”¨æ¥ä¿è¯åˆ—è¡¨å…ƒç´ è¯»å–çš„çº¿ç¨‹å®‰å…¨æ€§ï¼Œå¯ä»¥ç”¨ReentrantLockä»£æ›¿ã€‚</p>
</li>
</ol>
<h1 id="dai-ma-xia-zai"><a class="zola-anchor" href="#dai-ma-xia-zai" aria-label="Anchor link for: dai-ma-xia-zai">ğŸ”—</a>
ä»£ç ä¸‹è½½</h1>
<ol>
<li><a href="https://www.wangbo.im/posts/2016-03-30-learning-java-concurrent-semaphore/SemaphoreCase.java">SemaphoreCase.java</a></li>
</ol>

        </div>
        
    
</div></div>
            
    <div class="pagination">
        <div class="pagination__buttons">
            </div>
    </div>
<footer class="footer">
                    <div class="footer__inner"><div class="copyright copyright--user"><span>Â© 2019 <a href="https://www.wangbo.im">wangbo&apos; blog</a> :: <a href="https://github.wangbo.im">Github</a> :: Powered by <a href="https://www.getzola.org/">Zola</a></span></div>
    <script type="text/javascript" src="https:&#x2F;&#x2F;www.wangbo.im&#x2F;assets&#x2F;js&#x2F;main.js"></script>
</div>
                    

                </footer></div>
    </body>
</html>
