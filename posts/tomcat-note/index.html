

<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>wangbo‚Äôs home &amp; blog - Tomcat Note</title>

      

      
          <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
          
      

      
          <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;site.css">
          
      

      
      
    </head>

    <body>
        <div class="container">

            <div id="mobile-navbar" class="mobile-navbar">
              <div class="mobile-header-logo">
                <a href="/" class="logo">WB Prime</a>
              </div>
              <div class="mobile-navbar-icon icon-out">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>

            <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
              <ul class="mobile-menu-list">
                
                    <li class="mobile-menu-item">
                        <a href="https://www.wangbo.im">
                            Home
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https://www.wangbo.im&#x2F;categories">
                            Categories
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https://www.wangbo.im&#x2F;tags">
                            Tags
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https://www.wangbo.im&#x2F;about">
                            About
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;github.wangbo.im">
                            Github
                        </a>
                    </li>
                
              </ul>
            </nav>

            <header id="header">
                <div class="logo"><a href="https:&#x2F;&#x2F;www.wangbo.im">WB Prime</a></div>
                <nav class="menu">
                    <ul>
                        
                            <li>
                                <a href="https://www.wangbo.im">
                                    Home
                                </a>
                            </li>
                        
                            <li>
                                <a href="https://www.wangbo.im&#x2F;categories">
                                    Categories
                                </a>
                            </li>
                        
                            <li>
                                <a href="https://www.wangbo.im&#x2F;tags">
                                    Tags
                                </a>
                            </li>
                        
                            <li>
                                <a href="https://www.wangbo.im&#x2F;about">
                                    About
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;github.wangbo.im">
                                    Github
                                </a>
                            </li>
                        
                    </ul>
                </nav>
            </header>

            <main>
                <div class="content" id="mobile-panel">
                    



<article class="post">
    
    <header class="post__header">
        <h1 class="post__title">
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;tomcat-note&#x2F;">Tomcat Note</a>
        </h1>
        <div class="post__meta">
            <span class="post__time">2018-02-06</span>
            
        </div>
    </header>

    <div class="post-content">
      <p>Notes of
<a href="https://www.ibm.com/developerworks/cn/java/j-lo-tomcat1/index.html">Tomcat Á≥ªÁªüÊû∂ÊûÑ‰∏éËÆæËÆ°Ê®°ÂºèÔºåÁ¨¨ 1
ÈÉ®ÂàÜ</a> and
<a href="https://www.ibm.com/developerworks/cn/java/j-lo-tomcat2/">Tomcat Á≥ªÁªüÊû∂ÊûÑ‰∏éËÆæËÆ°Ê®°ÂºèÔºåÁ¨¨ 2
ÈÉ®ÂàÜ</a>.</p>
<h1 id="tomcat-architecture"><a class="zola-anchor" href="#tomcat-architecture" aria-label="Anchor link for: tomcat-architecture">üîó</a>
Tomcat Architecture</h1>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">---------------------------------------------
</span><span style="color:#c0c5ce;">| Server                                    |
</span><span style="color:#c0c5ce;">| - Service                                 |
</span><span style="color:#c0c5ce;">|   - Connector Coyote                      |
</span><span style="color:#c0c5ce;">|   - Connector Coyote                      |
</span><span style="color:#c0c5ce;">|   - Connector Coyote                      |
</span><span style="color:#c0c5ce;">|   - Connector Coyote                      |
</span><span style="color:#c0c5ce;">|   - ...                                   |
</span><span style="color:#c0c5ce;">|   - Container Catalina                    |
</span><span style="color:#c0c5ce;">|   - Session                               |
</span><span style="color:#c0c5ce;">|   - Jasper                                |
</span><span style="color:#c0c5ce;">|   - Naming                                |
</span><span style="color:#c0c5ce;">|   - Logging                               |
</span><span style="color:#c0c5ce;">|   - JMX                                   |
</span><span style="color:#c0c5ce;">---------------------------------------------
</span></pre><h1 id="structures"><a class="zola-anchor" href="#structures" aria-label="Anchor link for: structures">üîó</a>
Structures</h1>
<h2 id="lifecycle"><a class="zola-anchor" href="#lifecycle" aria-label="Anchor link for: lifecycle">üîó</a>
LifeCycle</h2>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">void addLifecycleListner(...)
</span><span style="color:#c0c5ce;">void removeLifecycleListener(...)
</span><span style="color:#c0c5ce;">LifecycleListeners findLifecycleListeners()
</span><span style="color:#c0c5ce;">void start()
</span><span style="color:#c0c5ce;">void stop()
</span></pre><h2 id="server"><a class="zola-anchor" href="#server" aria-label="Anchor link for: server">üîó</a>
Server</h2>
<p>A &quot;Server&quot; is a manager of a collection of &quot;Service&quot;.</p>
<h2 id="service"><a class="zola-anchor" href="#service" aria-label="Anchor link for: service">üîó</a>
Service</h2>
<p>A &quot;Service&quot; is a combination of a &quot;Container&quot; and multi &quot;Connector&quot; together with several utils.</p>
<h2 id="connector"><a class="zola-anchor" href="#connector" aria-label="Anchor link for: connector">üîó</a>
Connector</h2>
<p>A &quot;Connector&quot; receive http request and post http response.</p>
<p>When a http connection comes, a &quot;Connector&quot; passed it to a &quot;Processor&quot; via
<code>Processor::assign()</code>.</p>
<h2 id="processor"><a class="zola-anchor" href="#processor" aria-label="Anchor link for: processor">üîó</a>
Processor</h2>
<p>A &quot;Processor&quot; constructs a http request and response and passed it to a
&quot;Container&quot;.</p>
<h2 id="container"><a class="zola-anchor" href="#container" aria-label="Anchor link for: container">üîó</a>
Container</h2>
<p>A &quot;Container&quot; is a role, including &quot;Wrapper&quot;, &quot;Context&quot;, &quot;Host&quot; and &quot;Engine&quot;.</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">Engine
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">|- Host 0
</span><span style="color:#c0c5ce;">        </span><span style="color:#c0c5ce;">|- Context
</span><span style="color:#c0c5ce;">            </span><span style="color:#c0c5ce;">|- Wrapper
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">|- Host 1
</span><span style="color:#c0c5ce;">        </span><span style="color:#c0c5ce;">|- Context
</span><span style="color:#c0c5ce;">            </span><span style="color:#c0c5ce;">|- Wrapper
</span></pre><h2 id="engine"><a class="zola-anchor" href="#engine" aria-label="Anchor link for: engine">üîó</a>
Engine</h2>
<p>An &quot;Engine&quot; has no parent.</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">Engine interface
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">- String get DefaultHost()
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">- void setDefaultHost(String)
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">- String getJvmRoute()
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">- void setJvmRoute(String)
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">- Service getService()
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">- void setService(Service)
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">- void addDefaultContext(DefaultContext)
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">- DefaultContext getDefaultContext()
</span><span style="color:#c0c5ce;">    </span><span style="color:#c0c5ce;">- void importDefaultContext()
</span></pre>
<p>StandardEngine implements Engine.</p>
<ul>
<li>Cluster: load balance</li>
<li>Realm: security management</li>
<li>Pipeline: logic</li>
<li>Valve: operations</li>
</ul>
<h2 id="host"><a class="zola-anchor" href="#host" aria-label="Anchor link for: host">üîó</a>
Host</h2>
<p>A &quot;Host&quot; is a deployer.</p>
<ul>
<li>Cluster: load balance</li>
<li>Realm: security management</li>
<li>Pipeline: logic</li>
<li>Valve: operations</li>
</ul>
<h2 id="context"><a class="zola-anchor" href="#context" aria-label="Anchor link for: context">üîó</a>
Context</h2>
<p>A &quot;Context&quot; is the place where to run a servlet.</p>
<ul>
<li>Cluster: load balance</li>
<li>Realm: security management</li>
<li>Pipeline: logic</li>
<li>Valve: operations</li>
<li>Manager: session management org.apache.catalina.session.StandardManager</li>
<li>Resources</li>
<li>Loader: class loader</li>
<li>Mapper: URL map to wrapper</li>
</ul>
<h2 id="wrapper"><a class="zola-anchor" href="#wrapper" aria-label="Anchor link for: wrapper">üîó</a>
Wrapper</h2>
<p>A &quot;Wrapper&quot; is a servlet.</p>
<ul>
<li>Pipeline: logic</li>
<li>Valve: operations</li>
<li>Servlet</li>
<li>Servelet stack</li>
</ul>
<p>Following classes implementing &quot;Wrapper&quot;.</p>
<ul>
<li><code>org.apache.catalina.servlets.DefaultServlet</code></li>
<li><code>org.apache.jasper.servlet.JspServlet</code></li>
</ul>
<h2 id="pipeline-and-valve"><a class="zola-anchor" href="#pipeline-and-valve" aria-label="Anchor link for: pipeline-and-valve">üîó</a>
Pipeline and Valve</h2>
<ul>
<li><code>org.apache.catalina.core.ContainerBase</code></li>
<li><code>org.apache.catalina.core.StandardEngine</code></li>
<li><code>org.apache.catalina.core.StandardHost</code></li>
<li><code>org.apache.catalina.core.StandardContext</code></li>
<li><code>org.apache.catalina.core.StandardWrapper</code></li>
<li><code>org.apache.catalina.core.StandardPipeline</code></li>
<li><code>org.apache.catalina.valves.ValveBase</code></li>
<li><code>org.apache.catalina.core.StandardEngineValve</code></li>
<li><code>org.apache.catalina.core.StandardHostValve</code></li>
<li><code>org.apache.catalina.core.StandardContextValve</code></li>
<li><code>org.apache.catalina.core.StandardWrapperValve</code></li>
</ul>

    </div>

    
    

    <div class="post-footer">
        
            
                <div class="post-tags">
                    
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;tomcat&#x2F;">#tomcat</a>
                    
                </div>
            
            
                <div class="post-nav">
                    
                        <a class="previous" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;2018-02-06-thrift-note&#x2F;">‚Äπ Thrift Note</a>
                    
                    
                        <a class="next" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;nginx-note-modules-design&#x2F;">Nginx Note - Modules Design ‚Ä∫</a>
                    
                    
                    
                </div>
            

        

    </div>

    
    
</article>


                </div>
            </main>

            
            
        </div>

      
          <script type="text/javascript" src="https:&#x2F;&#x2F;www.wangbo.im&#x2F;even.js" ></script>
      
    </body>

</html>
