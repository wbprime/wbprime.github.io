<!DOCTYPE html>
<html lang="en">
    <head>
    <title>Awk Tips: md5 - Elvis Wang</title>
    
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="wangboâ€™s home &amp; blog"/>

    <meta property="og:title" content="
    wangboâ€™s home &amp; blog -&nbsp;Awk Tips: md5" />
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;2017-06-01-awk-tips-md5&#x2F;"/>
    <meta property="og:description" content="Awk Tips: md5"/>
    <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;style.css">
    <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;color&#x2F;blue.css">
<link rel="shortcut icon" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;favicon.ico" type="image/x-icon" /></head>
    <body>
        <div class="container full">
<header class="header">
    <div class="header__inner">
        <div class="header__logo">
            <a href="&#x2F;">
    <div class="logo">
        WB Prime
    </div>
</a>
        </div>
        <div class="menu-trigger">menu</div>
    </div>
    
    <nav class="menu">
        <ul class="menu__inner menu__inner--desktop">
            
            
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">About</a>
                    </li>
                
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">Categories</a>
                    </li>
                
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">Tags</a>
                    </li>
                
            </ul>

        <ul class="menu__inner menu__inner--mobile">
            
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">About</a>
        </li>
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">Categories</a>
        </li>
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">Tags</a>
        </li>
        </ul>
    </nav>

    </header>
<div class="content"><div class="post">
        <h1 class="post-title">
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;2017-06-01-awk-tips-md5&#x2F;">Awk Tips: md5</a>
        </h1>
        
    <div class="post-meta">
        <span class="post-date">2017.06.01
                </span>

        <span class="post-author"></span>

        

    
    :: {<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories&#x2F;notes&#x2F;">Notes</a>} 

            
    ::
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;awk&#x2F;">awk</a>
        
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;tech&#x2F;">tech</a>
        
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;md5&#x2F;">md5</a>
        
    
            
        
    </div>



        

        <div class="post-content">
            <h1 id="awk-zhi-md5"><a class="zola-anchor" href="#awk-zhi-md5" aria-label="Anchor link for: awk-zhi-md5">ğŸ”—</a>
Awk ä¹‹ md5</h1>
<h2 id="yong-li"><a class="zola-anchor" href="#yong-li" aria-label="Anchor link for: yong-li">ğŸ”—</a>
ç”¨ä¾‹</h2>
<p>æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼šæ–‡æœ¬æ–‡ä»¶ä¸­æ¯ä¸€è¡Œæ˜¯ç”¨æˆ·åå’Œå¯†ç ï¼Œç°åœ¨éœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œå˜æ¢ï¼Œè¾“å‡ºç”¨æˆ·åå’Œå¯¹åº”çš„å¯†ç çš„md5å€¼ã€‚</p>
<p>åŸå§‹æ–‡ä»¶(&quot;input.txt&quot;)å¦‚ä¸‹ï¼š</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">user1 user1_password
</span><span style="color:#dcdcdc;">user2 user2_password
</span><span style="color:#dcdcdc;">user3 user3_password
</span><span style="color:#dcdcdc;">user4 user4_password
</span><span style="color:#dcdcdc;">user5 user5_password
</span><span style="color:#dcdcdc;">user6 user6_password
</span><span style="color:#dcdcdc;">user7 user7_password
</span></pre><h2 id="jie-jue"><a class="zola-anchor" href="#jie-jue" aria-label="Anchor link for: jie-jue">ğŸ”—</a>
è§£å†³</h2>
<p>å¯ä»¥ä½¿ç”¨æ”¯æŒGNUæ‰©å±•ç‰¹æ€§çš„awkæ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚</p>
<p>awk è„šæœ¬å¦‚ä¸‹:</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">#!/usr/bin/awk -f
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">BEGIN {
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">md5cmd = &quot;md5sum&quot;;
</span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">{
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">printf $2 |&amp; md5cmd;
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">close(md5cmd, &quot;to&quot;);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">md5cmd |&amp; getline md5result;
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">close(md5cmd);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">print $1, substr(md5result, 1, 32);
</span><span style="color:#dcdcdc;">}
</span></pre>
<p>è„šæœ¬å¦å­˜ä¸º &quot;md5.awk&quot; ã€‚</p>
<p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥:</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">&gt; awk -f md5.awk input.txt
</span></pre>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">user1 b4ca6e90dcef1196a20930c2d9ecfbc0
</span><span style="color:#dcdcdc;">user2 049914ab3268e59eb90526f64a5322d9
</span><span style="color:#dcdcdc;">user3 99675fb0c81fdf505a95318e4c72b685
</span><span style="color:#dcdcdc;">user4 5f3cca1f85aa649323c336546b3c7cc0
</span><span style="color:#dcdcdc;">user5 41a87fa27533b238ed77824267259837
</span><span style="color:#dcdcdc;">user6 758b093168f255636ad83f5f076213e6
</span><span style="color:#dcdcdc;">user7 c1293b0e2400acb1461d25dbe4c6e75c
</span></pre><h2 id="shi-yi"><a class="zola-anchor" href="#shi-yi" aria-label="Anchor link for: shi-yi">ğŸ”—</a>
é‡Šä¹‰</h2>
<p>è§£å†³æ–¹æ¡ˆä½¿ç”¨äº†GNU awkæ‰©å±•çš„åç¨‹åŠŸèƒ½ï¼Œè¯¦è§£å‚è§ [Two-Way Communications with Another Process](https://www.gnu.org/software/gawk/manual/html_node/Two_002dway-I_002fO.html#Two_002dway-I_002fOï¼‰ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œ<code>printf $2 |&amp; md5cmd;</code> è¿™ä¸€è¡Œä¼šå°†ç”¨æˆ·å¯†ç è¾“å‡ºï¼ŒåŒæ—¶ awk ä¼šä½¿ç”¨ sh å¯åŠ¨ md5cmd è¿›ç¨‹ï¼Œå¹¶å°†è¯¥è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥ä¸ awk çš„æ ‡å‡†è¾“å‡ºç›¸è¿æ¥ï¼›md5cmd è¯»å–æ ‡å‡†è¾“å…¥ä¹‹åä¼šè¾“å‡ºå…¶ md5sum çš„ç»“æœåˆ°æ ‡å‡†è¾“å‡ºï¼›<code>md5cmd |&amp; getline md5result;</code> è¿™ä¸€è¡Œä¼šå°† md5cmd è¿›ç¨‹çš„æ ‡å‡†è¾“å‡ºä½œä¸ºè¾“å…¥ï¼Œè¯»å–ä¸€è¡Œæ–‡æœ¬å¹¶å­˜å‚¨åˆ°å˜é‡ md5result ä¸­ã€‚</p>
<p>å› ä¸ºè¿™äº›è¯­å¥æ˜¯å¯¹æ¯ä¸€è¡Œè¾“å…¥æ–‡æœ¬éƒ½ä¼šæ‰§è¡Œçš„ï¼Œæ‰€ä»¥éœ€è¦åœ¨åˆé€‚çš„æ—¶å€™å…³é—­ md5cmd è¿›ç¨‹çš„è¾“å…¥è¾“å‡ºæ–‡ä»¶æ ‡è¯†ç¬¦ã€‚<code>close(md5cmd, &quot;to&quot;);</code> å…³é—­è¾“å…¥åˆ° md5cmd è¿›ç¨‹çš„æ–‡ä»¶æ ‡è¯†ç¬¦ï¼›<code>close(md5cmd)</code> å…³é—­å‰©ä¸‹çš„å…¶ä»–æ–‡ä»¶æ ‡è¯†ç¬¦ã€‚å¦‚æœä¸å…³é—­çš„è¯ï¼Œåœ¨æ–‡æœ¬æ–‡ä»¶è¡Œæ•°å¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå‡ºç°ç”±äºå¤§é‡æ‰“å¼€ä¸€æ¬¡æ€§æ–‡ä»¶æ ‡è¯†ç¬¦è€Œä¸é‡Šæ”¾å¯¼è‡´å¯ç”¨æ–‡ä»¶æ ‡è¯†ç¬¦è¢«è€—å°½çš„é”™è¯¯ã€‚</p>

        </div>
        
    
</div></div>
            
    <div class="pagination">
        <div class="pagination__buttons">
            </div>
    </div>
<footer class="footer">
                    <div class="footer__inner"><div class="copyright">
            <span>Â© 2019 <a href="https://github.com/ejmg/zerm">zerm</a> :: Powered by <a href="https://www.getzola.org/">Zola</a></span>
            <span>:: Theme made by <a href="https://github.com/ejmg">ejmg</a></span>
        </div>
    <script type="text/javascript" src="https:&#x2F;&#x2F;www.wangbo.im&#x2F;assets&#x2F;js&#x2F;main.js"></script>
</div>
                    

                </footer></div>
    </body>
</html>
