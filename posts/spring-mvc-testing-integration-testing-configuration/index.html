<!DOCTYPE html>
<html lang="en">
    <head>
    <title>Spring MVC Integration Testing - Configuration - Elvis Wang</title>
    
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="wangboâ€™s home &amp; blog"/>

    <meta property="og:title" content="
    wangboâ€™s home &amp; blog -&nbsp;Spring MVC Integration Testing - Configuration" />
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;spring-mvc-testing-integration-testing-configuration&#x2F;"/>
    <meta property="og:description" content="&lt;p&gt;æœ¬æ–‡æ˜¯ &lt;a href=&quot;https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;spring-mvc-testing-content&#x2F;&quot;&gt;Spring MVC Testing&lt;&#x2F;a&gt; é›†æˆæµ‹è¯•ç³»åˆ—çš„ç¬¬1ç¯‡ï¼ŒåŸæ–‡é“¾æ¥ï¼š&lt;a href=&quot;http:&#x2F;&#â€¦"/>
    <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;style.css">
    <link rel="stylesheet" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;color&#x2F;blue.css">
<link rel="shortcut icon" href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;favicon.ico" type="image/x-icon" /></head>
    <body>
        <div class="container full">
<header class="header">
    <div class="header__inner">
        <div class="header__logo">
            <a href="&#x2F;">
    <div class="logo">
        WB Prime
    </div>
</a>
        </div>
        <div class="menu-trigger">menu</div>
    </div>
    
    <nav class="menu">
        <ul class="menu__inner menu__inner--desktop">
            
            
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">About</a>
                    </li>
                
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">Categories</a>
                    </li>
                
                    <li>
                        <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">Tags</a>
                    </li>
                
            </ul>

        <ul class="menu__inner menu__inner--mobile">
            
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;about">About</a>
        </li>
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories">Categories</a>
        </li>
        <li>
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags">Tags</a>
        </li>
        </ul>
    </nav>

    </header>
<div class="content"><div class="post">
        <h1 class="post-title">
            <a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;posts&#x2F;spring-mvc-testing-integration-testing-configuration&#x2F;">Spring MVC Integration Testing - Configuration</a>
        </h1>
        
    <div class="post-meta">
        <span class="post-date">2016.04.09
                </span>

        <span class="post-author"></span>

        

    
    :: {<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;categories&#x2F;spring-mvc-testing&#x2F;">Spring MVC Testing</a>} 

            
    ::
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;spring-mvc&#x2F;">Spring MVC</a>
        
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;testing&#x2F;">testing</a>
        
    #<a href="https:&#x2F;&#x2F;www.wangbo.im&#x2F;tags&#x2F;java&#x2F;">java</a>
        
    
            
        
    </div>



        

        <div class="post-content">
            <p>æœ¬æ–‡æ˜¯ <a href="https://www.wangbo.im/posts/spring-mvc-testing-content/">Spring MVC Testing</a> é›†æˆæµ‹è¯•ç³»åˆ—çš„ç¬¬1ç¯‡ï¼ŒåŸæ–‡é“¾æ¥ï¼š<a href="http://www.petrikainulainen.net/programming/spring-framework/integration-testing-of-spring-mvc-applications-configuration/">Integration Testing of Spring MVC Applications: Configuration</a>ã€‚</p>
<p>æ²¡æœ‰äººä¼šå¦è®¤é›†æˆæµ‹è¯•çš„é‡è¦æ€§ï¼Œå®ƒæ˜¯éªŒè¯æˆ‘ä»¬å¼€å‘çš„ç»„ä»¶èƒ½å¤Ÿæ­£å¸¸ååŒå·¥ä½œçš„é‡è¦æ‰‹æ®µã€‚ä¸å¹¸çš„æ˜¯ï¼Œå¯¹ä½¿ç”¨Spring MVCå¼€å‘çš„webåº”ç”¨ç¨‹åºä½œé›†æˆæµ‹è¯•æœ‰ä¸€ç‚¹éº»çƒ¦ã€‚</p>
<p>è¿‡å»æˆ‘ä»¬ä¸€ç›´ç”¨ <a href="http://docs.seleniumhq.org">Selenium</a> å’Œ <a href="https://jwebunit.github.io/jwebunit/">JWebUnit</a> æ¥å¯¹webåº”ç”¨æ¥å£ä½œé›†æˆæµ‹è¯•ï¼Œç„¶åæ•ˆæœä¸æ˜¯å¾ˆå¥½ã€‚è¿™ç§æ–¹æ³•æœ‰ä»¥ä¸‹ä¸‰ä¸ªç¼ºç‚¹ï¼š</p>
<ul>
<li>å¯¹äºå¼€å‘ä¸­çš„webæ¥å£ï¼Œç¼–å†™å’Œç»´æŠ¤æµ‹è¯•çš„å·¥ä½œé‡æ¯”è¾ƒå¤§</li>
<li>å¯¹äºä½¿ç”¨Javascriptï¼Œå°¤å…¶æ˜¯Ajaxçš„webåº”ç”¨ï¼Œå¯ç”¨æ€§ä¸é«˜</li>
<li>å¿…é¡»åœ¨webå®¹å™¨ä¸­å¯åŠ¨è¿è¡Œï¼Œå¯¼è‡´é€Ÿåº¦æ…¢è€Œä¸”å¾ˆæ²¡æœ‰æ•ˆç‡</li>
</ul>
<p>ç»å¸¸å°±æ˜¯å¼€å‘è€…åœ¨åç»­å¼€å‘è¿‡ç¨‹ä¸­è§‰å¾—ç»´æŠ¤ä¹‹å‰çš„é›†æˆæµ‹è¯•ç”¨ä¾‹å¤ªè¿‡è€—æ—¶è€Œä¸”æ•ˆæœä¸å¤§ï¼Œæ‰€ä»¥åºŸå¼ƒäº†è¿™ç§å½¢å¼çš„é›†æˆæµ‹è¯•ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ç§æ–°å‹çš„é›†æˆæµ‹è¯•æ¡†æ¶Spring MVC Testå¯ä»¥ç”¨æ¥ç®€åŒ–æµ‹è¯•å·¥ä½œã€‚</p>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•é…ç½®Spring MVC Testæ¡†æ¶æ¥è¿›è¡Œwebåº”ç”¨çš„æµ‹è¯•ã€‚æœ¬ç³»åˆ—ä½¿ç”¨çš„å·¥å…·åŒ…æ‹¬ï¼š</p>
<ul>
<li>Spring Framework 3.2</li>
<li>JUnit 4.10</li>
<li>Maven 3.0.3</li>
</ul>
<p>æˆ‘ä»¬ä¸€èµ·æ¥å¼€å§‹è¿›å…¥Spring MVC Testçš„ä¸–ç•Œå§ï¼</p>
<p><a name="continue-reading"></a></p>
<h1 id="tong-guo-mavenhuo-qu-yi-lai"><a class="zola-anchor" href="#tong-guo-mavenhuo-qu-yi-lai" aria-label="Anchor link for: tong-guo-mavenhuo-qu-yi-lai">ğŸ”—</a>
é€šè¿‡Mavenè·å–ä¾èµ–</h1>
<p>è¯‘è€…æ³¨ï¼šåŸæ–‡å†™ä½œçš„æ—¶å€™æ˜¯åŸºäºSpring Framework 3.1.2ï¼Œå½“æ—¶Spring-test-mvcè¿˜æ˜¯ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„é¡¹ç›®è¿›è¡Œå¼€å‘å’Œå‘å¸ƒã€‚åœ¨Spring Framework 3.2ä»¥åï¼Œè¯¥é¡¹ç›®è¢«åˆå¹¶åˆ°Spring Frameworkä¸­å»äº†ã€‚ç°åœ¨Spring Frameworkå·²ç»å‘å¸ƒäº†4.Xç³»åˆ—ï¼Œå¾ˆå°‘æœ‰äººåœ¨ä½¿ç”¨3.2ä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œä¸ºäº†å‡å°‘æ··æ·†ï¼Œç›´æ¥å°†åŸæ–‡çš„pomæ–‡ä»¶åŠ ä»¥ä¿®æ”¹ã€‚ç‰¹æ­¤è¯´æ˜ã€‚</p>
<p>ç”Ÿæˆçš„pom.xmlæ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#808080;">&lt;</span><span style="color:#569cd6;">dependency</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">groupId</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">org.springframework</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">groupId</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">artifactId</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">spring-test</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">artifactId</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">version</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">3.2</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">version</span><span style="color:#808080;">&gt;
</span><span style="color:#dcdcdc;">    </span><span style="color:#808080;">&lt;</span><span style="color:#569cd6;">scope</span><span style="color:#808080;">&gt;</span><span style="color:#dcdcdc;">test</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">scope</span><span style="color:#808080;">&gt;
</span><span style="color:#808080;">&lt;/</span><span style="color:#569cd6;">dependency</span><span style="color:#808080;">&gt;
</span></pre><h1 id="mockmvc-pei-zhi"><a class="zola-anchor" href="#mockmvc-pei-zhi" aria-label="Anchor link for: mockmvc-pei-zhi">ğŸ”—</a>
MockMvc é…ç½®</h1>
<p>Spring MVC Testæ¡†æ¶æä¾›äº†<code>MockMvc</code>ç±»ä½“ç³»æ¥è¾…åŠ©ç¼–å†™åŸºäºSpring MVCå¼€å‘çš„webåº”ç”¨çš„æµ‹è¯•ä»£ç ã€‚æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯ä½¿ç”¨<code>MockMvcBuilder</code>æ¥å£çš„å®é™…å®ç°æ¥ç”Ÿæˆ<code>MockMvc</code>å®ä¾‹ã€‚<code>MockMvcBuilders</code>å·¥å‚ç±»æä¾›äº†ä¸¤ä¸ªå·¥å‚æ–¹æ³•åˆ›å»º<code>MockMvcBuilder</code>å®ä¾‹ï¼š</p>
<ul>
<li><code>StandaloneMockMvcBuilder standaloneSetup(Objectâ€¦ controllers)</code> ä¸»è¦ç”¨æ¥å¯¹å•ä¸ªControllerè¿›è¡Œæµ‹è¯•ï¼Œéœ€è¦æ‰‹åŠ¨åœ°é…ç½®å„ç§Bean</li>
<li><code>DefaultMockMvcBuilder webAppContextSetup(WebApplicationContext context)</code> ä¸»è¦ä½¿ç”¨é…ç½®å¥½çš„Springä¸Šä¸‹æ–‡æ¥é…ç½®Bean</li>
</ul>
<p>ä¸‹é¢æ¥è¯¦ç»†çœ‹ä¸€ä¸‹è¿™ä¸¤ç§æ–¹å¼åˆ†åˆ«å¦‚ä½•ä½¿ç”¨ã€‚</p>
<h2 id="standalonesetup"><a class="zola-anchor" href="#standalonesetup" aria-label="Anchor link for: standalonesetup">ğŸ”—</a>
standaloneSetup</h2>
<p>å¦‚æœè¦æµ‹è¯•çš„ç±»æ˜¯<code>HomeController</code>ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹çš„æ–¹å¼åˆ›å»ºä¸€ä¸ª<code>MockMvc</code>å®ä¾‹ï¼š</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">MockMvc mockMvc = MockMvcBuilders.standaloneSetup(</span><span style="color:#569cd6;">new </span><span style="color:#dcdcdc;">HomeController()).build();
</span></pre><h2 id="webappcontextsetup"><a class="zola-anchor" href="#webappcontextsetup" aria-label="Anchor link for: webappcontextsetup">ğŸ”—</a>
webAppContextSetup</h2>
<p>è¿™ç§æ–¹å¼æˆ‘ä»¬è¦å…ˆåˆå§‹åŒ–ä¸€ä¸ªé…ç½®å¥½çš„<code>WebApplicationContext</code>å®ä¾‹ï¼Œç„¶åé€šè¿‡å¦‚ä¸‹ä»£ç åˆ›å»ºä¸€ä¸ª<code>MockMvc</code>å®ä¾‹ï¼š</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">WebApplicationContext wac ;
</span><span style="color:#dcdcdc;">MockMvc mockMvc = MockMvcBuilders.webAppContextSetup(wac).build();
</span></pre><h1 id="ce-shi-yong-li-lei-de-pei-zhi"><a class="zola-anchor" href="#ce-shi-yong-li-lei-de-pei-zhi" aria-label="Anchor link for: ce-shi-yong-li-lei-de-pei-zhi">ğŸ”—</a>
æµ‹è¯•ç”¨ä¾‹ç±»çš„é…ç½®</h1>
<p>åœ¨é›†æˆæµ‹è¯•ä¸­æˆ‘ä»¬åº”è¯¥ä½¿ç”¨webAppContextSetupæ–¹å¼çš„<code>MockMvc</code>é…ç½®æ–¹å¼ï¼Œè¿™æ ·å¯ä»¥æœ€å¤§åŒ–åœ°å…±ç”¨Springé…ç½®ä»£ç ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æŒ‰ç…§å¦‚ä¸‹çš„æ­¥éª¤æ¥é…ç½®é›†æˆæµ‹è¯•ç”¨ä¾‹ç±»ï¼š</p>
<ol>
<li>å¯¹æµ‹è¯•ç”¨ä¾‹ç±»åŠ ä¸Š<code>@RunWith(SpringJUnit4ClassRunner.class)</code>æ³¨è§£</li>
<li>å¯¹æµ‹è¯•ç”¨ä¾‹ç±»åŠ ä¸Š<code>@ContextConfiguration</code>æ³¨è§£ï¼Œå¹¶æŒ‡å®šSpringé…ç½®æ–‡ä»¶ï¼ˆXMLï¼‰æˆ–è€…é…ç½®ç±»ï¼ˆJavaï¼‰</li>
<li>å¯¹æµ‹è¯•ç”¨ä¾‹ç±»åŠ ä¸Š<code>@WebAppConfiguration</code>æ³¨è§£ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªwebåº”ç”¨çš„æµ‹è¯•ç”¨ä¾‹</li>
<li>æµ‹è¯•ç”¨ä¾‹ç±»ä¸­æ·»åŠ ä¸€ä¸ª<code>MockMvc</code>ç±»å‹çš„æˆå‘˜</li>
<li>æµ‹è¯•ç”¨ä¾‹ç±»ä¸­æ·»åŠ ä¸€ä¸ª<code>setUp()</code>æ–¹æ³•å¹¶ç”¨<code>@Before</code>æ³¨è§£ï¼Œè°ƒç”¨<code>MockMvcBuilders</code>çš„é™æ€æ–¹æ³•<code>webAppContextSetup()</code>åˆ›å»ºå¹¶é…ç½®å¥½<code>MockMvc</code>ç±»å‹çš„æˆå‘˜</li>
</ol>
<p>å®Œæˆåçš„æµ‹è¯•ç”¨ä¾‹ç±»å¤§æ¦‚é•¿æˆè¿™ä¸ªæ ·å­ï¼š</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">@RunWith(SpringJUnit4ClassRunner.class)
</span><span style="color:#dcdcdc;">@ContextConfiguration(locations = {</span><span style="color:#d69d85;">&quot;classpath:testContext.xml&quot;</span><span style="color:#dcdcdc;">, </span><span style="color:#d69d85;">&quot;classpath:webMvcContext.xml&quot;</span><span style="color:#dcdcdc;">})
</span><span style="color:#608b4e;">//@ContextConfiguration(classes = {TestContext.class, WebMvcContext.class})
</span><span style="color:#dcdcdc;">@WebAppConfiguration
</span><span style="color:#569cd6;">public class </span><span style="color:#dcdcdc;">TodoControllerTest_WebAppContext {
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">private </span><span style="color:#dcdcdc;">MockMvc mockMvc;
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">@Autowired
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">private </span><span style="color:#dcdcdc;">WebApplicationContext webApplicationContext;
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">@Before
</span><span style="color:#dcdcdc;">    </span><span style="color:#569cd6;">public void </span><span style="color:#dcdcdc;">setUp() </span><span style="color:#569cd6;">throws </span><span style="color:#dcdcdc;">Exception {
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">Mockito.reset(mockedTodoService);
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">        </span><span style="color:#dcdcdc;">mockMvc = MockMvcBuilders.webAppContextSetup(webApplicationContext).build();
</span><span style="color:#dcdcdc;">    </span><span style="color:#dcdcdc;">}
</span><span style="color:#dcdcdc;">
</span><span style="color:#dcdcdc;">    </span><span style="color:#608b4e;">// Add tests here
</span><span style="color:#dcdcdc;">}
</span></pre>
<p>æœ¬æ–‡ä½¿ç”¨çš„ä»£ç è¢«æ”¾åœ¨äº† <a href="https://github.com/pkainulainen/spring-mvc-test-examples/tree/master/configuration">Github</a> ä¸Šã€‚ä½¿ç”¨Mavenè¿›è¡Œé›†æˆæµ‹è¯•çš„æ–¹æ³•å¯ä»¥å‚è§æˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç«  <a href="http://www.petrikainulainen.net/programming/maven/integration-testing-with-maven/">Integration Testing with Maven</a>ã€‚</p>
<h1 id="zong-jie"><a class="zola-anchor" href="#zong-jie" aria-label="Anchor link for: zong-jie">ğŸ”—</a>
æ€»ç»“</h1>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†å¦‚ä½•æ¥é…ç½®åŸºäºSpring MVC Testçš„é›†æˆæµ‹è¯•ï¼Œä¸»è¦å†…å®¹æœ‰ï¼š</p>
<ul>
<li>å¦‚ä½•ä½¿ç”¨ä¸åŒçš„Springé…ç½®æ–¹å¼ï¼ˆXML/Javaï¼‰æ¥é…ç½®æµ‹è¯•ç”¨ä¾‹</li>
<li>åº”è¯¥ä½¿ç”¨<code>webAppContextSetup</code>çš„æ–¹å¼è€Œä¸æ˜¯<code>standaloneSetup</code>æ–¹å¼</li>
<li>å¦‚ä½•ä½¿ç”¨<code>WebApplicationContext</code>æ³¨å…¥æ¥å®ŒæˆSpringé…ç½®çš„åŠ è½½</li>
</ul>
<p>ä¸‹ä¸€ç¯‡æ˜¯ <a href="https://www.wangbo.im/posts/spring-mvc-testing-integration-testing-controllers/">Spring MVC Integration Testing - Controllers</a>ã€‚</p>

        </div>
        
    
</div></div>
            
    <div class="pagination">
        <div class="pagination__buttons">
            </div>
    </div>
<footer class="footer">
                    <div class="footer__inner"><div class="copyright">
            <span>Â© 2019 <a href="https://github.com/ejmg/zerm">zerm</a> :: Powered by <a href="https://www.getzola.org/">Zola</a></span>
            <span>:: Theme made by <a href="https://github.com/ejmg">ejmg</a></span>
        </div>
    <script type="text/javascript" src="https:&#x2F;&#x2F;www.wangbo.im&#x2F;assets&#x2F;js&#x2F;main.js"></script>
</div>
                    

                </footer></div>
    </body>
</html>
